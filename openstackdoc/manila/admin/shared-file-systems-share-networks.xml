<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/manila/doc/source/admin/shared-file-systems-share-networks.rst">
    <target refid="shared-file-systems-share-networks"></target>
    <section ids="share-networks shared-file-systems-share-networks" names="share\ networks shared_file_systems_share_networks">
        <title>Share networks</title>
        <paragraph>Share network is an entity that encapsulates interaction with the OpenStack
            Networking service. If the share driver that you selected runs in a mode
            requiring Networking service interaction, specify the share network when
            creating a new share network.</paragraph>
        <section ids="how-to-create-share-network" names="how\ to\ create\ share\ network">
            <title>How to create share network</title>
            <paragraph>To list networks in a project, run:</paragraph>
            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack network list
+--------------+---------+--------------------+
| ID           | Name    | Subnets            |
+--------------+---------+--------------------+
| bee7411d-... | public  | 884a6564-0f11-...  |
|              |         | e6da81fa-5d5f-...  |
| 5ed5a854-... | private | 74dcfb5a-b4d7-...  |
|              |         | cc297be2-5213-...  |
+--------------+---------+--------------------+</literal_block>
            <paragraph>A share network stores network information that share servers can use where
                shares are hosted. You can associate a share with a single share network.
                When you create or update a share, you can optionally specify the ID of a share
                network through which instances can access the share.</paragraph>
            <paragraph>When you create a share network, you can specify only one type of network:</paragraph>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>OpenStack Networking (neutron). Specify a network ID and subnet ID.
                        In this case <literal>manila.network.nova_network_plugin.NeutronNetworkPlugin</literal>
                        will be used.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Legacy networking (nova-network). Specify a network ID.
                        In this case <literal>manila.network.nova_network_plugin.NoveNetworkPlugin</literal>
                        will be used.</paragraph>
                </list_item>
            </bullet_list>
            <paragraph>For more information about supported plug-ins for share networks, see
                <reference internal="True" refuri="shared-file-systems-network-plugins#shared-file-systems-network-plugins"><inline classes="std std-ref">Network plug-ins</inline></reference>.</paragraph>
            <paragraph>A share network has these attributes:</paragraph>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>The IP block in Classless Inter-Domain Routing (CIDR) notation from which to
                        allocate the network.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>The IP version of the network.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>The network type, which is <title_reference>vlan</title_reference>, <title_reference>vxlan</title_reference>, <title_reference>gre</title_reference>, or <title_reference>flat</title_reference>.</paragraph>
                </list_item>
            </bullet_list>
            <paragraph>If the network uses segmentation, a segmentation identifier. For example, VLAN,
                VXLAN, and GRE networks use segmentation.</paragraph>
            <paragraph>To create a share network with private network and subnetwork, run:</paragraph>
            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ manila share-network-create --neutron-net-id 5ed5a854-21dc-4ed3-870a-117b7064eb21 \
--neutron-subnet-id 74dcfb5a-b4d7-4855-86f5-a669729428dc --name my_share_net --description "My first share network"
+-------------------+--------------------------------------+
| Property          | Value                                |
+-------------------+--------------------------------------+
| name              | my_share_net                         |
| segmentation_id   | None                                 |
| created_at        | 2015-09-24T12:06:32.602174           |
| neutron_subnet_id | 74dcfb5a-b4d7-4855-86f5-a669729428dc |
| updated_at        | None                                 |
| network_type      | None                                 |
| neutron_net_id    | 5ed5a854-21dc-4ed3-870a-117b7064eb21 |
| ip_version        | None                                 |
| nova_net_id       | None                                 |
| cidr              | None                                 |
| project_id        | 20787a7ba11946adad976463b57d8a2f     |
| id                | 5c3cbabb-f4da-465f-bc7f-fadbe047b85a |
| description       | My first share network               |
+-------------------+--------------------------------------+</literal_block>
            <paragraph>The <literal>segmentation_id</literal>, <literal>cidr</literal>, <literal>ip_version</literal>, and <literal>network_type</literal>
                share network attributes are automatically set to the values determined by the
                network provider.</paragraph>
            <paragraph>To check the network list, run:</paragraph>
            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ manila share-network-list
+--------------------------------------+--------------+
| id                                   | name         |
+--------------------------------------+--------------+
| 5c3cbabb-f4da-465f-bc7f-fadbe047b85a | my_share_net |
+--------------------------------------+--------------+</literal_block>
            <paragraph>If you configured the generic driver with <literal>driver_handles_share_servers =
True</literal> (with the share servers) and already had previous operations in the Shared
                File Systems service, you can see <literal>manila_service_network</literal> in the neutron
                list of networks. This network was created by the generic driver for internal
                use.</paragraph>
            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack network list
+--------------+------------------------+--------------------+
| ID           | Name                   | Subnets            |
+--------------+------------------------+--------------------+
| 3b5a629a-e...| manila_service_network | 4f366100-50...     |
| bee7411d-... | public                 | 884a6564-0f11-...  |
|              |                        | e6da81fa-5d5f-...  |
| 5ed5a854-... | private                | 74dcfb5a-b4d7-...  |
|              |                        | cc297be2-5213-...  |
+--------------+------------------------+--------------------+</literal_block>
            <paragraph>You also can see detailed information about the share network including
                <literal>network_type</literal>, and <literal>segmentation_id</literal> fields:</paragraph>
            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack network show manila_service_network
+---------------------------+--------------------------------------+
| Field                     | Value                                |
+---------------------------+--------------------------------------+
| admin_state_up            | UP                                   |
| availability_zone_hints   |                                      |
| availability_zones        | nova                                 |
| created_at                | 2016-12-13T09:31:30Z                 |
| description               |                                      |
| id                        | 3b5a629a-e7a1-46a3-afb2-ab666fb884bc |
| ipv4_address_scope        | None                                 |
| ipv6_address_scope        | None                                 |
| mtu                       | 1450                                 |
| name                      | manila_service_network               |
| port_security_enabled     | True                                 |
| project_id                | f6ac448a469b45e888050cf837b6e628     |
| provider:network_type     | vxlan                                |
| provider:physical_network | None                                 |
| provider:segmentation_id  | 73                                   |
| revision_number           | 7                                    |
| router:external           | Internal                             |
| shared                    | False                                |
| status                    | ACTIVE                               |
| subnets                   | 682e3329-60b0-440f-8749-83ef53dd8544 |
| tags                      | []                                   |
| updated_at                | 2016-12-13T09:31:36Z                 |
+---------------------------+--------------------------------------+</literal_block>
            <paragraph>You also can add and remove the security services from the share network.
                For more detail, see <reference internal="True" refuri="shared-file-systems-security-services#shared-file-systems-security-services"><inline classes="std std-ref">Security services</inline></reference>.</paragraph>
        </section>
    </section>
</document>

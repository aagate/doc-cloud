<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/manila/doc/source/admin/shared-file-systems-security-services.rst">
    <target refid="shared-file-systems-security-services"></target>
    <section ids="security-services shared-file-systems-security-services" names="security\ services shared_file_systems_security_services">
        <title>Security services</title>
        <paragraph>A security service stores client configuration information used for
            authentication and authorization (AuthN/AuthZ). For example, a share server
            will be the client for an existing service such as LDAP, Kerberos, or
            Microsoft Active Directory.</paragraph>
        <paragraph>You can associate a share with one to three security service types:</paragraph>
        <bullet_list bullet="-">
            <list_item>
                <paragraph><literal>ldap</literal>: LDAP.</paragraph>
            </list_item>
            <list_item>
                <paragraph><literal>kerberos</literal>: Kerberos.</paragraph>
            </list_item>
            <list_item>
                <paragraph><literal>active_directory</literal>: Microsoft Active Directory.</paragraph>
            </list_item>
        </bullet_list>
        <paragraph>You can configure a security service with these options:</paragraph>
        <bullet_list bullet="-">
            <list_item>
                <paragraph>A DNS IP address.</paragraph>
            </list_item>
            <list_item>
                <paragraph>An IP address or host name.</paragraph>
            </list_item>
            <list_item>
                <paragraph>A domain.</paragraph>
            </list_item>
            <list_item>
                <paragraph>A user or group name.</paragraph>
            </list_item>
            <list_item>
                <paragraph>The password for the user, if you specify a user name.</paragraph>
            </list_item>
        </bullet_list>
        <paragraph>You can add the security service to the
            <reference internal="True" refuri="shared-file-systems-share-networks#shared-file-systems-share-networks"><inline classes="std std-ref">share network</inline></reference>.</paragraph>
        <paragraph>To create a security service, specify the security service type, a
            description of a security service, DNS IP address used inside projectâ€™s
            network, security service IP address or host name, domain, security
            service user or group used by project, and a password for the user. The
            share name is optional.</paragraph>
        <paragraph>Create a <literal>ldap</literal> security service:</paragraph>
        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ manila security-service-create ldap --dns-ip 8.8.8.8 --server 10.254.0.3 --name my_ldap_security_service
+-------------+--------------------------------------+
| Property    | Value                                |
+-------------+--------------------------------------+
| status      | new                                  |
| domain      | None                                 |
| password    | None                                 |
| name        | my_ldap_security_service             |
| dns_ip      | 8.8.8.8                              |
| created_at  | 2015-09-25T10:19:06.019527           |
| updated_at  | None                                 |
| server      | 10.254.0.3                           |
| user        | None                                 |
| project_id  | 20787a7ba11946adad976463b57d8a2f     |
| type        | ldap                                 |
| id          | 413479b2-0d20-4c58-a9d3-b129fa592d8e |
| description | None                                 |
+-------------+--------------------------------------+</literal_block>
        <paragraph>To create <literal>kerberos</literal> security service, run:</paragraph>
        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ manila security-service-create kerberos --server 10.254.0.3 --user demo --password secret --name my_kerberos_security_service --description "Kerberos security service"
+-------------+--------------------------------------+
| Property    | Value                                |
+-------------+--------------------------------------+
| status      | new                                  |
| domain      | None                                 |
| password    | secret                               |
| name        | my_kerberos_security_service         |
| dns_ip      | None                                 |
| created_at  | 2015-09-25T10:26:03.211849           |
| updated_at  | None                                 |
| server      | 10.254.0.3                           |
| user        | demo                                 |
| project_id  | 20787a7ba11946adad976463b57d8a2f     |
| type        | kerberos                             |
| id          | 7f46a447-2534-453d-924d-bd7c8e63bbec |
| description | Kerberos security service            |
+-------------+--------------------------------------+</literal_block>
        <paragraph>To see the list of created security service use
            <literal_strong classes="command">manila security-service-list</literal_strong>:</paragraph>
        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ manila security-service-list
+--------------------------------------+------------------------------+--------+----------+
| id                                   | name                         | status | type     |
+--------------------------------------+------------------------------+--------+----------+
| 413479b2-0d20-4c58-a9d3-b129fa592d8e | my_ldap_security_service     | new    | ldap     |
| 7f46a447-2534-453d-924d-bd7c8e63bbec | my_kerberos_security_service | new    | kerberos |
+--------------------------------------+------------------------------+--------+----------+</literal_block>
        <paragraph>You can add a security service to the existing
            <reference internal="True" refuri="shared-file-systems-share-networks#shared-file-systems-share-networks"><inline classes="std std-ref">share network</inline></reference>, which is not
            yet used (a <literal>share network</literal> not associated with a share).</paragraph>
        <paragraph>Add a security service to the share network with
            <literal>share-network-security-service-add</literal> specifying share network and
            security service. The command returns information about the
            security service. You can see view new attributes and <literal>share_networks</literal>
            using the associated share network ID.</paragraph>
        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ manila share-network-security-service-add share_net2 my_ldap_security_service

$ manila security-service-show my_ldap_security_service
+----------------+-------------------------------------------+
| Property       | Value                                     |
+----------------+-------------------------------------------+
| status         | new                                       |
| domain         | None                                      |
| password       | None                                      |
| name           | my_ldap_security_service                  |
| dns_ip         | 8.8.8.8                                   |
| created_at     | 2015-09-25T10:19:06.000000                |
| updated_at     | None                                      |
| server         | 10.254.0.3                                |
| share_networks | [u'6d36c41f-d310-4aff-a0c2-ffd870e91cab'] |
| user           | None                                      |
| project_id     | 20787a7ba11946adad976463b57d8a2f          |
| type           | ldap                                      |
| id             | 413479b2-0d20-4c58-a9d3-b129fa592d8e      |
| description    | None                                      |
+----------------+-------------------------------------------+</literal_block>
        <paragraph>It is possible to see the list of security services associated
            with a given share network. List security services for <literal>share_net2</literal>
            share network with:</paragraph>
        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ manila share-network-security-service-list share_net2
+--------------------------------------+--------------------------+--------+------+
| id                                   | name                     | status | type |
+--------------------------------------+--------------------------+--------+------+
| 413479b2-0d20-4c58-a9d3-b129fa592d8e | my_ldap_security_service | new    | ldap |
+--------------------------------------+--------------------------+--------+------+</literal_block>
        <paragraph>You also can dissociate a security service from the share network
            and confirm that the security service now has an empty list of
            share networks:</paragraph>
        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ manila share-network-security-service-remove share_net2 my_ldap_security_service

$ manila security-service-show my_ldap_security_service
+----------------+--------------------------------------+
| Property       | Value                                |
+----------------+--------------------------------------+
| status         | new                                  |
| domain         | None                                 |
| password       | None                                 |
| name           | my_ldap_security_service             |
| dns_ip         | 8.8.8.8                              |
| created_at     | 2015-09-25T10:19:06.000000           |
| updated_at     | None                                 |
| server         | 10.254.0.3                           |
| share_networks | []                                   |
| user           | None                                 |
| project_id     | 20787a7ba11946adad976463b57d8a2f     |
| type           | ldap                                 |
| id             | 413479b2-0d20-4c58-a9d3-b129fa592d8e |
| description    | None                                 |
+----------------+--------------------------------------+</literal_block>
        <paragraph>The Shared File Systems service allows you to update a security service field
            using <literal_strong classes="command">manila security-service-update</literal_strong> command with optional
            arguments such as <literal>--dns-ip</literal>, <literal>--server</literal>, <literal>--domain</literal>,
            <literal>--user</literal>, <literal>--password</literal>, <literal>--name</literal>, or
            <literal>--description</literal>.</paragraph>
        <paragraph>To remove a security service not associated with any share networks
            run:</paragraph>
        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ manila security-service-delete my_ldap_security_service</literal_block>
    </section>
</document>

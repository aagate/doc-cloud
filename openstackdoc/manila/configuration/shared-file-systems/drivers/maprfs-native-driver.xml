<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/manila/doc/source/configuration/shared-file-systems/drivers/maprfs-native-driver.rst">
    <section ids="maprfs-native-driver" names="maprfs\ native\ driver">
        <title>MapRFS native driver</title>
        <paragraph>MapR-FS native driver is a plug-in based on the Shared File Systems service
            and provides high-throughput access to the data on MapR-FS distributed file
            system, which is designed to hold very large amounts of data.</paragraph>
        <paragraph>A Shared File Systems service share in this driver is a volume in MapR-FS.
            Instances talk directly to the MapR-FS storage backend via the (mapr-posix)
            client. To mount a MapR-FS volume, the MapR POSIX client is required.
            Access to each share is allowed by user and group based access type, which is
            aligned with MapR-FS ACEs to support access control for multiple users and
            groups. If user name and group name are the same, the group access type will
            be used by default.</paragraph>
        <paragraph>For more details, see <reference name="MapR documentation" refuri="http://maprdocs.mapr.com/">MapR documentation</reference><target ids="mapr-documentation" names="mapr\ documentation" refuri="http://maprdocs.mapr.com/"></target>.</paragraph>
        <section ids="network-configuration" names="network\ configuration">
            <title>Network configuration</title>
            <paragraph>The storage backend and Shared File Systems service hosts should be in a flat
                network. Otherwise, the L3 connectivity between them should exist.</paragraph>
        </section>
        <section ids="supported-shared-filesystems-and-operations" names="supported\ shared\ filesystems\ and\ operations">
            <title>Supported shared filesystems and operations</title>
            <paragraph>The driver supports MapR-FS shares.</paragraph>
            <paragraph>The following operations are supported:</paragraph>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>Create MapR-FS share.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Delete MapR-FS share.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Allow MapR-FS Share access.</paragraph>
                    <bullet_list bullet="-">
                        <list_item>
                            <paragraph>Only support user and group access type.</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph>Support level of access (ro/rw).</paragraph>
                        </list_item>
                    </bullet_list>
                </list_item>
                <list_item>
                    <paragraph>Deny MapR-FS Share access.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Update MapR-FS Share access.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Create snapshot.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Delete snapshot.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Create share from snapshot.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Extend share.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Shrink share.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Manage share.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Unmanage share.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Manage snapshot.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Unmanage snapshot.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Ensure share.</paragraph>
                </list_item>
            </bullet_list>
        </section>
        <section ids="requirements" names="requirements">
            <title>Requirements</title>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>Install MapR core packages, version &gt;= 5.2.x, on the storage backend.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>To enable snapshots, the MapR cluster should have at least M5 license.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Establish network connection between the Shared File Systems service hosts
                        and storage backend.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Obtain a <reference name="ticket" refuri="http://maprdocs.mapr.com/home/SecurityGuide/Tickets.html">ticket</reference><target ids="ticket" names="ticket" refuri="http://maprdocs.mapr.com/home/SecurityGuide/Tickets.html"></target>
                        for user who will be used to access MapR-FS.</paragraph>
                </list_item>
            </bullet_list>
        </section>
        <section ids="back-end-configuration-manila-conf" names="back\ end\ configuration\ (manila.conf)">
            <title>Back end configuration (manila.conf)</title>
            <paragraph>Add MapR-FS protocol to <literal>enabled_share_protocols</literal>:</paragraph>
            <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">enabled_share_protocols = MAPRFS</literal_block>
            <paragraph>Create a section for MapR-FS backend. Example:</paragraph>
            <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">[maprfs]
driver_handles_share_servers = False
share_driver =
manila.share.drivers.maprfs.maprfs_native.MapRFSNativeShareDriver
maprfs_clinode_ip = example
maprfs_ssh_name = mapr
maprfs_ssh_pw = mapr
share_backend_name = maprfs</literal_block>
            <paragraph>Set <literal>driver-handles-share-servers</literal> to <literal>False</literal> as the driver does not
                manage the lifecycle of <literal>share-servers</literal>.</paragraph>
            <paragraph>Add driver backend to <literal>enabled_share_backends</literal>:</paragraph>
            <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">enabled_share_backends = maprfs</literal_block>
        </section>
        <section ids="driver-options" names="driver\ options">
            <title>Driver options</title>
            <paragraph>The following table contains the configuration options specific to this
                driver.</paragraph>
            <comment xml:space="preserve">Warning: Do not edit this file. It is automatically generated from the
software project's code and your changes will be overwritten.

The tool to generate this file lives in openstack-doc-tools repository.

Please make any changes needed in the code, then run the
autogenerate-config-doc tool from the openstack-doc-tools repository, or
ask for help on the documentation mailing list, IRC channel or meeting.</comment>
            <target refid="manila-maprfs"></target>
            <table classes="config-ref-table" ids="id1 manila-maprfs" names="manila-maprfs">
                <title>Description of MapRFS share driver configuration options</title>
                <tgroup cols="2">
                    <colspec colwidth="50"></colspec>
                    <colspec colwidth="50"></colspec>
                    <thead>
                        <row>
                            <entry>
                                <paragraph>Configuration option = Default value</paragraph>
                            </entry>
                            <entry>
                                <paragraph>Description</paragraph>
                            </entry>
                        </row>
                    </thead>
                    <tbody>
                        <row>
                            <entry>
                                <paragraph><strong>[DEFAULT]</strong></paragraph>
                            </entry>
                            <entry>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>maprfs_base_volume_dir</literal> = <literal>/</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Path in MapRFS where share volumes must be created.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>maprfs_cldb_ip</literal> = <literal>None</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(List) The list of IPs or hostnames of CLDB nodes.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>maprfs_clinode_ip</literal> = <literal>None</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(List) The list of IPs or hostnames of nodes where mapr-core is installed.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>maprfs_rename_managed_volume</literal> = <literal>True</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(Boolean) Specify whether existing volume should be renamed when start managing.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>maprfs_ssh_name</literal> = <literal>mapr</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Cluster admin user ssh login name.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>maprfs_ssh_port</literal> = <literal>22</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(Port number) CLDB node SSH port.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>maprfs_ssh_private_key</literal> = <literal>None</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Path to SSH private key for login.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>maprfs_ssh_pw</literal> = <literal>None</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Cluster node SSH login password, This parameter is not necessary, if ‘maprfs_ssh_private_key’ is configured.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>maprfs_zookeeper_ip</literal> = <literal>None</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(List) The list of IPs or hostnames of ZooKeeper nodes.</paragraph>
                            </entry>
                        </row>
                    </tbody>
                </tgroup>
            </table>
        </section>
        <section ids="known-restrictions" names="known\ restrictions">
            <title>Known restrictions</title>
            <paragraph>This driver does not handle user authentication, no tickets or users are
                created by this driver. This means that when ‘access_allow’ or
                ‘update_access’ is calling, this will have no effect without providing
                tickets to users.</paragraph>
        </section>
        <section ids="share-metadata" names="share\ metadata">
            <title>Share metadata</title>
            <paragraph>MapR-FS shares can be created by specifying additional options. Metadata is
                used for this purpose. Every metadata option with <literal>-</literal> prefix is passed to
                MapR-FS volume. For example, to specify advisory volume quota add
                <literal>_advisoryquota=10G</literal> option to metadata:</paragraph>
            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ manila create MAPRFS 1 --metadata _advisoryquota=10G</literal_block>
            <paragraph>If you need to create a share with your custom backend name or export location
                instead if uuid, you can specify <literal>_name</literal> and <literal>_path</literal> options:</paragraph>
            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ manila create MAPRFS 1 --metadata _name=example _path=/example</literal_block>
            <warning>
                <paragraph>Specifying invalid options will cause an error.</paragraph>
            </warning>
            <paragraph>The list of allowed options depends on mapr-core version.
                See <reference name="volume create" refuri="http://maprdocs.mapr.com/home/ReferenceGuide/volume-create.html">volume create</reference><target ids="volume-create" names="volume\ create" refuri="http://maprdocs.mapr.com/home/ReferenceGuide/volume-create.html"></target>
                for more information.</paragraph>
        </section>
    </section>
</document>

<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/manila/doc/source/configuration/shared-file-systems/drivers/glusterfs-driver.rst">
    <section ids="glusterfs-driver" names="glusterfs\ driver">
        <title>GlusterFS driver</title>
        <paragraph>GlusterFS driver uses GlusterFS, an open source distributed file system,
            as the storage back end for serving file shares to the Shared File
            Systems clients.</paragraph>
        <section ids="supported-shared-filesystems-and-operations" names="supported\ shared\ filesystems\ and\ operations">
            <title>Supported shared filesystems and operations</title>
            <paragraph>The driver supports NFS shares.</paragraph>
            <paragraph>The following operations are supported:</paragraph>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>Create a share.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Delete a share.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Allow share access.</paragraph>
                    <paragraph>Note the following limitations:</paragraph>
                    <bullet_list bullet="-">
                        <list_item>
                            <paragraph>Only IP access type is supported</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph>Only read-write access is supported.</paragraph>
                        </list_item>
                    </bullet_list>
                </list_item>
                <list_item>
                    <paragraph>Deny share access.</paragraph>
                </list_item>
            </bullet_list>
        </section>
        <section ids="requirements" names="requirements">
            <title>Requirements</title>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>Install glusterfs-server package, version &gt;= 3.5.x, on the storage
                        back end.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Install NFS-Ganesha, version &gt;=2.1, if using NFS-Ganesha as the NFS
                        server for the GlusterFS back end.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Install glusterfs and glusterfs-fuse package, version &gt;=3.5.x, on the
                        Shared File Systems service host.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Establish network connection between the Shared File Systems service
                        host and the storage back end.</paragraph>
                </list_item>
            </bullet_list>
        </section>
        <section ids="shared-file-systems-service-driver-configuration-setting" names="shared\ file\ systems\ service\ driver\ configuration\ setting">
            <title>Shared File Systems service driver configuration setting</title>
            <paragraph>The following parameters in the Shared File Systems service’s
                configuration file <literal>manila.conf</literal> need to be set:</paragraph>
            <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">share_driver = manila.share.drivers.glusterfs.GlusterfsShareDriver</literal_block>
            <paragraph>If the back-end GlusterFS server runs on the Shared File Systems
                service host machine:</paragraph>
            <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">glusterfs_target = &lt;glustervolserver&gt;:/&lt;glustervolid&gt;</literal_block>
            <paragraph>If the back-end GlusterFS server runs remotely:</paragraph>
            <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">glusterfs_target = &lt;username&gt;@&lt;glustervolserver&gt;:/&lt;glustervolid&gt;</literal_block>
        </section>
        <section ids="known-restrictions" names="known\ restrictions">
            <title>Known restrictions</title>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>The driver does not support network segmented multi-tenancy model,
                        but instead works over a flat network, where the tenants share a
                        network.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>If NFS Ganesha is the NFS server used by the GlusterFS back end, then
                        the shares can be accessed by NFSv3 and v4 protocols. However, if
                        Gluster NFS is used by the GlusterFS back end, then the shares can
                        only be accessed by NFSv3 protocol.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>All Shared File Systems service shares, which map to subdirectories
                        within a GlusterFS volume, are currently created within a single
                        GlusterFS volume of a GlusterFS storage pool.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>The driver does not provide read-only access level for shares.</paragraph>
                </list_item>
            </bullet_list>
        </section>
        <section ids="driver-options" names="driver\ options">
            <title>Driver options</title>
            <paragraph>The following table contains the configuration options specific to the
                share driver.</paragraph>
            <comment xml:space="preserve">Warning: Do not edit this file. It is automatically generated from the
software project's code and your changes will be overwritten.

The tool to generate this file lives in openstack-doc-tools repository.

Please make any changes needed in the code, then run the
autogenerate-config-doc tool from the openstack-doc-tools repository, or
ask for help on the documentation mailing list, IRC channel or meeting.</comment>
            <target refid="manila-glusterfs"></target>
            <table classes="config-ref-table" ids="id1 manila-glusterfs" names="manila-glusterfs">
                <title>Description of GlusterFS share driver configuration options</title>
                <tgroup cols="2">
                    <colspec colwidth="50"></colspec>
                    <colspec colwidth="50"></colspec>
                    <thead>
                        <row>
                            <entry>
                                <paragraph>Configuration option = Default value</paragraph>
                            </entry>
                            <entry>
                                <paragraph>Description</paragraph>
                            </entry>
                        </row>
                    </thead>
                    <tbody>
                        <row>
                            <entry>
                                <paragraph><strong>[DEFAULT]</strong></paragraph>
                            </entry>
                            <entry>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>glusterfs_ganesha_server_ip</literal> = <literal>None</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Remote Ganesha server node’s IP address.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>glusterfs_ganesha_server_password</literal> = <literal>None</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Remote Ganesha server node’s login password. This is not required if ‘glusterfs_path_to_private_key’ is configured.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>glusterfs_ganesha_server_username</literal> = <literal>root</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Remote Ganesha server node’s username.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>glusterfs_mount_point_base</literal> = <literal>$state_path/mnt</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Base directory containing mount points for Gluster volumes.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>glusterfs_nfs_server_type</literal> = <literal>Gluster</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Type of NFS server that mediate access to the Gluster volumes (Gluster or Ganesha).</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>glusterfs_path_to_private_key</literal> = <literal>None</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Path of Manila host’s private SSH key file.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>glusterfs_server_password</literal> = <literal>None</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Remote GlusterFS server node’s login password. This is not required if ‘glusterfs_path_to_private_key’ is configured.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>glusterfs_servers</literal> =</paragraph>
                            </entry>
                            <entry>
                                <paragraph>(List) List of GlusterFS servers that can be used to create shares. Each GlusterFS server should be of the form [remoteuser@]&lt;volserver&gt;, and they are assumed to belong to distinct Gluster clusters.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>glusterfs_share_layout</literal> = <literal>None</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Specifies GlusterFS share layout, that is, the method of associating backing GlusterFS resources to shares.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>glusterfs_target</literal> = <literal>None</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Specifies the GlusterFS volume to be mounted on the Manila host. It is of the form [remoteuser@]&lt;volserver&gt;:&lt;volid&gt;.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>glusterfs_volume_pattern</literal> = <literal>None</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Regular expression template used to filter GlusterFS volumes for share creation. The regex template can optionally (ie. with support of the GlusterFS backend) contain the #{size} parameter which matches an integer (sequence of digits) in which case the value shall be interpreted as size of the volume in GB. Examples: “manila-share-volume-d+$”, “manila-share-volume-#{size}G-d+$”; with matching volume names, respectively: “manila-share-volume-12”, “manila-share-volume-3G-13”. In latter example, the number that matches “#{size}”, that is, 3, is an indication that the size of volume is 3G.</paragraph>
                            </entry>
                        </row>
                    </tbody>
                </tgroup>
            </table>
        </section>
    </section>
</document>

<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/manila/doc/source/configuration/shared-file-systems/drivers/huawei-nas-driver.rst">
    <section ids="huawei-driver" names="huawei\ driver">
        <title>Huawei driver</title>
        <paragraph>Huawei NAS driver is a plug-in based on the Shared File Systems service.
            The Huawei NAS driver can be used to provide functions such as the share
            and snapshot for virtual machines, or instances, in OpenStack. Huawei
            NAS driver enables the OceanStor V3 series V300R002 storage system to
            provide only network filesystems for OpenStack.</paragraph>
        <section ids="requirements" names="requirements">
            <title>Requirements</title>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>The OceanStor V3 series V300R002 storage system.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>The following licenses should be activated on V3 for File: CIFS, NFS,
                        HyperSnap License (for snapshot).</paragraph>
                </list_item>
            </bullet_list>
        </section>
        <section ids="supported-shared-filesystems-and-operations" names="supported\ shared\ filesystems\ and\ operations">
            <title>Supported shared filesystems and operations</title>
            <paragraph>The driver supports CIFS and NFS shares.</paragraph>
            <paragraph>The following operations are supported:</paragraph>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>Create a share.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Delete a share.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Allow share access.</paragraph>
                    <paragraph>Note the following limitations:</paragraph>
                    <bullet_list bullet="-">
                        <list_item>
                            <paragraph>Only IP access type is supported for NFS.</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph>Only user access is supported for CIFS.</paragraph>
                        </list_item>
                    </bullet_list>
                </list_item>
                <list_item>
                    <paragraph>Deny share access.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Create a snapshot.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Delete a snapshot.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Support pools in one backend.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Extend a share.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Shrink a share.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Create a replica.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Delete a replica.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Promote a replica.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Update a replica state.</paragraph>
                </list_item>
            </bullet_list>
        </section>
        <section ids="pre-configurations-on-huawei" names="pre-configurations\ on\ huawei">
            <title>Pre-configurations on Huawei</title>
            <enumerated_list enumtype="arabic" prefix="" suffix=".">
                <list_item>
                    <paragraph>Create a driver configuration file. The driver configuration file
                        name must be the same as the <literal>manila_huawei_conf_file</literal> item in the
                        <literal>manila_conf</literal> configuration file.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Configure the product. Product indicates the storage system type.
                        For the OceanStor V3 series V300R002 storage systems, the driver
                        configuration file is as follows:</paragraph>
                    <literal_block highlight_args="{}" language="xml" linenos="False" xml:space="preserve">&lt;?xml version='1.0' encoding='UTF-8'?&gt;
&lt;Config&gt;
    &lt;Storage&gt;
        &lt;Product&gt;V3&lt;/Product&gt;
        &lt;LogicalPortIP&gt;x.x.x.x&lt;/LogicalPortIP&gt;
        &lt;RestURL&gt;https://x.x.x.x:8088/deviceManager/rest/&lt;/RestURL&gt;
        &lt;UserName&gt;xxxxxxxxx&lt;/UserName&gt;
        &lt;UserPassword&gt;xxxxxxxxx&lt;/UserPassword&gt;
    &lt;/Storage&gt;
    &lt;Filesystem&gt;
        &lt;Thin_StoragePool&gt;xxxxxxxxx&lt;/Thin_StoragePool&gt;
        &lt;Thick_StoragePool&gt;xxxxxxxxx&lt;/Thick_StoragePool&gt;
        &lt;WaitInterval&gt;3&lt;/WaitInterval&gt;
        &lt;Timeout&gt;60&lt;/Timeout&gt;
    &lt;/Filesystem&gt;
&lt;/Config&gt;</literal_block>
                    <paragraph>The options are:</paragraph>
                    <bullet_list bullet="-">
                        <list_item>
                            <paragraph><literal>Product</literal> is a type of storage product. Set it to <literal>V3</literal>.</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph><literal>LogicalPortIP</literal> is the IP address of the logical port.</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph><literal>RestURL</literal> is an access address of the REST interface.
                                Multiple RestURLs can be configured in <literal>&lt;RestURL&gt;</literal>,
                                separated by “;”. The driver will automatically retry another
                                <literal>RestURL</literal> if one fails to connect.</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph><literal>UserName</literal> is the user name of an administrator.</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph><literal>UserPassword</literal> is the password of an administrator.</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph><literal>Thin_StoragePool</literal> is the name of a thin storage pool to be used.</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph><literal>Thick_StoragePool</literal> is the name of a thick storage pool to be used.</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph><literal>WaitInterval</literal> is the interval time of querying the file
                                system status.</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph><literal>Timeout</literal> is the timeout period for waiting command
                                execution of a device to complete.</paragraph>
                        </list_item>
                    </bullet_list>
                </list_item>
            </enumerated_list>
        </section>
        <section ids="back-end-configuration" names="back\ end\ configuration">
            <title>Back end configuration</title>
            <paragraph>Modify the <literal>manila.conf</literal> Shared File Systems service configuration
                file and add <literal>share_driver</literal> and <literal>manila_huawei_conf_file</literal> items.
                Here is an example for configuring a storage system:</paragraph>
            <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">share_driver = manila.share.drivers.huawei.huawei_nas.HuaweiNasDriver
manila_huawei_conf_file = /etc/manila/manila_huawei_conf.xml
driver_handles_share_servers = False</literal_block>
        </section>
        <section ids="driver-options" names="driver\ options">
            <title>Driver options</title>
            <paragraph>The following table contains the configuration options specific to the
                share driver.</paragraph>
            <comment xml:space="preserve">Warning: Do not edit this file. It is automatically generated from the
software project's code and your changes will be overwritten.

The tool to generate this file lives in openstack-doc-tools repository.

Please make any changes needed in the code, then run the
autogenerate-config-doc tool from the openstack-doc-tools repository, or
ask for help on the documentation mailing list, IRC channel or meeting.</comment>
            <target refid="manila-huawei"></target>
            <table classes="config-ref-table" ids="id1 manila-huawei" names="manila-huawei">
                <title>Description of Huawei share driver configuration options</title>
                <tgroup cols="2">
                    <colspec colwidth="50"></colspec>
                    <colspec colwidth="50"></colspec>
                    <thead>
                        <row>
                            <entry>
                                <paragraph>Configuration option = Default value</paragraph>
                            </entry>
                            <entry>
                                <paragraph>Description</paragraph>
                            </entry>
                        </row>
                    </thead>
                    <tbody>
                        <row>
                            <entry>
                                <paragraph><strong>[DEFAULT]</strong></paragraph>
                            </entry>
                            <entry>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>manila_huawei_conf_file</literal> = <literal>/etc/manila/manila_huawei_conf.xml</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) The configuration file for the Manila Huawei driver.</paragraph>
                            </entry>
                        </row>
                    </tbody>
                </tgroup>
            </table>
        </section>
    </section>
</document>

<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/manila/doc/source/configuration/shared-file-systems/drivers/lvm-driver.rst">
    <section ids="lvm-share-driver" names="lvm\ share\ driver">
        <title>LVM share driver</title>
        <paragraph>The Shared File Systems service can be configured to use LVM share
            driver. LVM share driver relies solely on LVM running on the same host with
            manila-share service. It does not require any services not
            related to the Shared File Systems service to be present to work.</paragraph>
        <section ids="prerequisites" names="prerequisites">
            <title>Prerequisites</title>
            <paragraph>The following packages must be installed on the same host with manila-share
                service:</paragraph>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>NFS server</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Samba server &gt;= 3.2.0</paragraph>
                </list_item>
                <list_item>
                    <paragraph>LVM2 &gt;= 2.02.66</paragraph>
                </list_item>
            </bullet_list>
            <paragraph>Services must be up and running, ports used by the services must not be
                blocked. A node with manila-share service should be accessible to share
                service users.</paragraph>
            <paragraph>LVM should be preconfigured. By default, LVM driver expects to find a volume
                group named <literal>lvm-shares</literal>. This volume group will be used by the driver for
                share provisioning. It should be managed by node administrator separately.</paragraph>
        </section>
        <section ids="shared-file-systems-service-driver-configuration-setting" names="shared\ file\ systems\ service\ driver\ configuration\ setting">
            <title>Shared File Systems service driver configuration setting</title>
            <paragraph>To use the driver, one should set up a corresponding back end. A driver
                must be explicitly specified as well as export IP address. A
                minimal back-end specification that will enable LVM share driver is presented
                below:</paragraph>
            <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">[LVM_sample_backend]
driver_handles_share_servers = False
share_driver = manila.share.drivers.lvm.LVMShareDriver
lvm_share_export_ip = 1.2.3.4</literal_block>
            <paragraph>In the example above, <literal>lvm_share_export_ip</literal> is the address to be used by
                clients for accessing shares. In the simplest case, it should be the same
                as hostâ€™s address.</paragraph>
        </section>
        <section ids="supported-shared-file-systems-and-operations" names="supported\ shared\ file\ systems\ and\ operations">
            <title>Supported shared file systems and operations</title>
            <paragraph>The driver supports CIFS and NFS shares.</paragraph>
            <paragraph>The following operations are supported:</paragraph>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>Create a share.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Delete a share.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Allow share access.</paragraph>
                    <paragraph>Note the following limitations:</paragraph>
                    <bullet_list bullet="-">
                        <list_item>
                            <paragraph>Only IP access type is supported for NFS.</paragraph>
                        </list_item>
                    </bullet_list>
                </list_item>
                <list_item>
                    <paragraph>Deny share access.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Create a snapshot.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Delete a snapshot.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Create a share from a snapshot.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Extend a share.</paragraph>
                </list_item>
            </bullet_list>
        </section>
        <section ids="known-restrictions" names="known\ restrictions">
            <title>Known restrictions</title>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>LVM driver should not be used on a host running Neutron agents, simultaneous
                        usage might cause issues with share deletion (shares will not get deleted
                        from volume groups).</paragraph>
                </list_item>
            </bullet_list>
        </section>
        <section ids="driver-options" names="driver\ options">
            <title>Driver options</title>
            <paragraph>The following table contains the configuration options specific to this
                driver.</paragraph>
            <comment xml:space="preserve">Warning: Do not edit this file. It is automatically generated from the
software project's code and your changes will be overwritten.

The tool to generate this file lives in openstack-doc-tools repository.

Please make any changes needed in the code, then run the
autogenerate-config-doc tool from the openstack-doc-tools repository, or
ask for help on the documentation mailing list, IRC channel or meeting.</comment>
            <target refid="manila-lvm"></target>
            <table classes="config-ref-table" ids="id1 manila-lvm" names="manila-lvm">
                <title>Description of LVM share driver configuration options</title>
                <tgroup cols="2">
                    <colspec colwidth="50"></colspec>
                    <colspec colwidth="50"></colspec>
                    <thead>
                        <row>
                            <entry>
                                <paragraph>Configuration option = Default value</paragraph>
                            </entry>
                            <entry>
                                <paragraph>Description</paragraph>
                            </entry>
                        </row>
                    </thead>
                    <tbody>
                        <row>
                            <entry>
                                <paragraph><strong>[DEFAULT]</strong></paragraph>
                            </entry>
                            <entry>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>lvm_share_export_ip</literal> = <literal>None</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) IP to be added to export string.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>lvm_share_export_root</literal> = <literal>$state_path/mnt</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Base folder where exported shares are located.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>lvm_share_helpers</literal> = <literal>CIFS=manila.share.drivers.helpers.CIFSHelperUserAccess, NFS=manila.share.drivers.helpers.NFSHelper</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(List) Specify list of share export helpers.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>lvm_share_mirrors</literal> = <literal>0</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(Integer) If set, create LVMs with multiple mirrors. Note that this requires lvm_mirrors + 2 PVs with available space.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>lvm_share_volume_group</literal> = <literal>lvm-shares</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Name for the VG that will contain exported shares.</paragraph>
                            </entry>
                        </row>
                    </tbody>
                </tgroup>
            </table>
        </section>
    </section>
</document>

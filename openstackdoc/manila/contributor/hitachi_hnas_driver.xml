<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/manila/doc/source/contributor/hitachi_hnas_driver.rst">
    <comment xml:space="preserve">Copyright 2016 Hitachi Data Systems, Inc.
All Rights Reserved.

Licensed under the Apache License, Version 2.0 (the "License"); you may
not use this file except in compliance with the License. You may obtain
a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations
under the License.</comment>
    <section ids="hitachi-nas-platform-file-services-driver-for-openstack" names="hitachi\ nas\ platform\ file\ services\ driver\ for\ openstack">
        <title>Hitachi NAS Platform File Services Driver for OpenStack</title>
        <section ids="driver-version-3-0" names="driver\ version\ 3.0">
            <title>Driver Version 3.0</title>
            <section ids="hitachi-nas-platform-storage-requirements" names="hitachi\ nas\ platform\ storage\ requirements">
                <title>Hitachi NAS Platform Storage Requirements</title>
                <paragraph>This Hitachi NAS Platform File Services Driver for OpenStack provides support
                    for Hitachi NAS Platform (HNAS) models 3080, 3090, 4040, 4060, 4080 and 4100
                    with NAS OS 12.2 or higher.
                    Before configuring the driver, ensure the HNAS has at least:</paragraph>
                <bullet_list bullet="-">
                    <list_item>
                        <paragraph>1 storage pool (span) configured.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>1 EVS configured.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>1 file system in this EVS, created without replication target option and
                            should be in mounted state. It is recommended to disable auto-expansion,
                            because the scheduler uses the current free space reported by the file
                            system when creating shares.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>1 Management User configured with “supervisor” permission level.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Hitachi NAS Management interface should be reachable from manila-share
                            node.</paragraph>
                    </list_item>
                </bullet_list>
                <paragraph>Also, if the driver is going to create CIFS shares, either LDAP servers or
                    domains must be configured previously in HNAS to provide the users and groups.</paragraph>
            </section>
            <section ids="supported-operations" names="supported\ operations">
                <title>Supported Operations</title>
                <paragraph>The following operations are supported in this version of Hitachi NAS Platform
                    File Services Driver for OpenStack:</paragraph>
                <bullet_list bullet="-">
                    <list_item>
                        <paragraph>Create and delete CIFS and NFS shares;</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Extend and shrink shares;</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Manage rules to shares (allow/deny access);</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Allow and deny share access;</paragraph>
                        <bullet_list bullet="-">
                            <list_item>
                                <paragraph><literal>IP</literal> access type supported for <literal>NFS</literal> shares;</paragraph>
                            </list_item>
                            <list_item>
                                <paragraph><literal>User</literal> access type supported for <literal>CIFS</literal> shares;</paragraph>
                            </list_item>
                            <list_item>
                                <paragraph>Both <literal>RW</literal> and <literal>RO</literal> access level are supported for NFS and CIFS shares;</paragraph>
                            </list_item>
                        </bullet_list>
                    </list_item>
                    <list_item>
                        <paragraph>Manage and unmanage shares;</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Create and delete snapshots;</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Create shares from snapshots.</paragraph>
                    </list_item>
                </bullet_list>
            </section>
            <section ids="driver-configuration" names="driver\ configuration">
                <title>Driver Configuration</title>
                <paragraph>This document contains the installation and user guide of the Hitachi NAS
                    Platform File Services Driver for OpenStack. Although mentioning some Shared
                    File Systems service operations and HNAS commands, both are not in the scope of
                    this document. Please refer to their own guides for details.</paragraph>
                <paragraph>Before configuring the driver, make sure that the nodes running the
                    manila-share service have access to the HNAS management port, and compute and
                    network nodes have access to the data ports (EVS IPs or aggregations).</paragraph>
                <paragraph>The driver configuration can be summarized in the following steps:</paragraph>
                <enumerated_list enumtype="arabic" prefix="" suffix=".">
                    <list_item>
                        <paragraph>Configure HNAS parameters on <literal>manila.conf</literal>;</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Prepare the network ensuring all OpenStack-HNAS connections mentioned above;</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Configure/create share type;</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Restart the services;</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Configure OpenStack networks.</paragraph>
                    </list_item>
                </enumerated_list>
                <section ids="step-1-hnas-parameters-configuration" names="step\ 1\ -\ hnas\ parameters\ configuration">
                    <title>Step 1 - HNAS Parameters Configuration</title>
                    <paragraph>The following parameters need to be configured in the [DEFAULT] section
                        of <literal>/etc/manila/manila.conf</literal>:</paragraph>
                    <table>
                        <tgroup cols="2">
                            <colspec colwidth="28"></colspec>
                            <colspec colwidth="48"></colspec>
                            <thead>
                                <row>
                                    <entry>
                                        <paragraph><strong>Option</strong></paragraph>
                                    </entry>
                                    <entry>
                                        <paragraph><strong>Description</strong></paragraph>
                                    </entry>
                                </row>
                            </thead>
                            <tbody>
                                <row>
                                    <entry>
                                        <paragraph>enabled_share_backends</paragraph>
                                    </entry>
                                    <entry>
                                        <paragraph>Name of the section on <literal>manila.conf</literal> used to
                                            specify a backend. For example:
                                            <emphasis>enabled_share_backends = hnas1</emphasis></paragraph>
                                    </entry>
                                </row>
                                <row>
                                    <entry>
                                        <paragraph>enabled_share_protocols</paragraph>
                                    </entry>
                                    <entry>
                                        <paragraph>Specify a list of protocols to be allowed for
                                            share creation. This driver version supports
                                            NFS and/or CIFS.</paragraph>
                                    </entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </table>
                    <paragraph>The following parameters need to be configured in the [backend] section
                        of <literal>/etc/manila/manila.conf</literal>:</paragraph>
                    <table>
                        <tgroup cols="2">
                            <colspec colwidth="49"></colspec>
                            <colspec colwidth="101"></colspec>
                            <thead>
                                <row>
                                    <entry>
                                        <paragraph><strong>Option</strong></paragraph>
                                    </entry>
                                    <entry>
                                        <paragraph><strong>Description</strong></paragraph>
                                    </entry>
                                </row>
                            </thead>
                            <tbody>
                                <row>
                                    <entry>
                                        <paragraph>share_backend_name</paragraph>
                                    </entry>
                                    <entry>
                                        <paragraph>A name for the backend.</paragraph>
                                    </entry>
                                </row>
                                <row>
                                    <entry>
                                        <paragraph>share_driver</paragraph>
                                    </entry>
                                    <entry>
                                        <paragraph>Python module path. For this driver <strong>this must be</strong>:
                                            <emphasis>manila.share.drivers.hitachi.hnas.driver.HitachiHNASDriver</emphasis></paragraph>
                                    </entry>
                                </row>
                                <row>
                                    <entry>
                                        <paragraph>driver_handles_share_servers</paragraph>
                                    </entry>
                                    <entry>
                                        <paragraph>Driver working mode. For this driver <strong>this must be</strong>:
                                            <emphasis>False</emphasis>.</paragraph>
                                    </entry>
                                </row>
                                <row>
                                    <entry>
                                        <paragraph>hitachi_hnas_ip</paragraph>
                                    </entry>
                                    <entry>
                                        <paragraph>HNAS management interface IP for communication between manila-share node and HNAS.</paragraph>
                                    </entry>
                                </row>
                                <row>
                                    <entry>
                                        <paragraph>hitachi_hnas_user</paragraph>
                                    </entry>
                                    <entry>
                                        <paragraph>This field is used to provide user credential to HNAS. Provided management user must have
                                            “supervisor” level.</paragraph>
                                    </entry>
                                </row>
                                <row>
                                    <entry>
                                        <paragraph>hitachi_hnas_password</paragraph>
                                    </entry>
                                    <entry>
                                        <paragraph>This field is used to provide password credential to HNAS.
                                            Either hitachi_hnas_password or hitachi_hnas_ssh_private_key must be set.</paragraph>
                                    </entry>
                                </row>
                                <row>
                                    <entry>
                                        <paragraph>hitachi_hnas_ssh_private_key</paragraph>
                                    </entry>
                                    <entry>
                                        <paragraph>Set this parameter with RSA/DSA private key path to allow the driver to connect into HNAS.</paragraph>
                                    </entry>
                                </row>
                                <row>
                                    <entry>
                                        <paragraph>hitachi_hnas_evs_id</paragraph>
                                    </entry>
                                    <entry>
                                        <paragraph>ID from EVS which this backend is assigned to (ID can be listed by CLI “evs list”
                                            or EVS Management in HNAS Interface).</paragraph>
                                    </entry>
                                </row>
                                <row>
                                    <entry>
                                        <paragraph>hitachi_hnas_evs_ip</paragraph>
                                    </entry>
                                    <entry>
                                        <paragraph>EVS IP for mounting shares (this can be listed by CLI “evs list” or EVS Management in HNAS
                                            interface).</paragraph>
                                    </entry>
                                </row>
                                <row>
                                    <entry>
                                        <paragraph>hitachi_hnas_file_system_name</paragraph>
                                    </entry>
                                    <entry>
                                        <paragraph>Name of the file system in HNAS, located in the specified EVS.</paragraph>
                                    </entry>
                                </row>
                                <row>
                                    <entry>
                                        <paragraph>hitachi_hnas_cluster_admin_ip0*</paragraph>
                                    </entry>
                                    <entry>
                                        <paragraph>If HNAS is in a multi-farm (one SMU managing multiple HNAS) configuration, set this parameter with
                                            the IP of the cluster’s admin node.</paragraph>
                                    </entry>
                                </row>
                                <row>
                                    <entry>
                                        <paragraph>hitachi_hnas_stalled_job_timeout*</paragraph>
                                    </entry>
                                    <entry>
                                        <paragraph>Tree-clone-job commands are used to create snapshots and create shares from snapshots.
                                            This parameter sets a timeout (in seconds) to wait for jobs to complete. Default value is
                                            30 seconds.</paragraph>
                                    </entry>
                                </row>
                                <row>
                                    <entry>
                                        <paragraph>hitachi_hnas_driver_helper*</paragraph>
                                    </entry>
                                    <entry>
                                        <paragraph>Python module path for the driver helper. For this driver, it should use (default value):
                                            <emphasis>manila.share.drivers.hitachi.hnas.ssh.HNASSSHBackend</emphasis></paragraph>
                                    </entry>
                                </row>
                                <row>
                                    <entry>
                                        <paragraph>hitachi_hnas_allow_cifs_snapshot_while_mounted*</paragraph>
                                    </entry>
                                    <entry>
                                        <paragraph>By default, CIFS snapshots are not allowed to be taken while the share has clients connected
                                            because point-in-time replica cannot be guaranteed for all files. This parameter can be set
                                            to <emphasis>True</emphasis> to allow snapshots to be taken while the share has clients connected. <strong>WARNING</strong>:
                                            Setting this parameter to <emphasis>True</emphasis> might cause inconsistent snapshots on CIFS shares. Default
                                            value is <emphasis>False</emphasis>.</paragraph>
                                    </entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </table>
                    <paragraph>* Non mandatory parameters.</paragraph>
                    <paragraph>Below is an example of a valid configuration of HNAS driver:</paragraph>
                    <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">[DEFAULT]``
...
enabled_share_backends = hitachi1
enabled_share_protocols = CIFS,NFS
...

[hitachi1]
share_backend_name = HITACHI1
share_driver = manila.share.drivers.hitachi.hnas.driver.HitachiHNASDriver
driver_handles_share_servers = False
hitachi_hnas_ip = 172.24.44.15
hitachi_hnas_user = supervisor
hitachi_hnas_password = supervisor
hitachi_hnas_evs_id = 1
hitachi_hnas_evs_ip = 10.0.1.20
hitachi_hnas_file_system_name = FS-Manila</literal_block>
                </section>
                <section ids="step-2-prepare-the-network" names="step\ 2\ -\ prepare\ the\ network">
                    <title>Step 2 - Prepare the Network</title>
                    <paragraph>In the driver mode used by Hitachi NAS Platform File Services Driver for
                        OpenStack, driver_handles_share_servers (DHSS) as False, the driver does not
                        handle network configuration, it is up to the administrator to configure it.
                        It is mandatory that HNAS management interface is reachable from a manila-share
                        node through admin network, while the selected EVS data interface is reachable
                        from OpenStack Cloud, such as through neutron flat networking. Here is a
                        step-by-step of an example configuration:</paragraph>
                    <line_block>
                        <line><strong>Manila-Share Node:</strong></line>
                        <line><strong>eth0</strong>: Admin Network, can ping HNAS management interface.</line>
                        <line><strong>eth1</strong>: Data Network, can ping HNAS EVS IP (data interface). This interface
                            is only required if you plan to use Share Migration.</line>
                    </line_block>
                    <line_block>
                        <line><strong>Network Node and Compute Nodes:</strong></line>
                        <line><strong>eth0</strong>: Admin Network, can ping HNAS management interface.</line>
                        <line><strong>eth1</strong>: Data Network, can ping HNAS EVS IP (data interface).</line>
                    </line_block>
                    <paragraph>The following image represents the described scenario:</paragraph>
                    <image candidates="{'*': 'images/rpc/hds_network.jpg'}" uri="images/rpc/hds_network.jpg" width="60%"></image>
                    <paragraph>Run in <strong>Network Node</strong>:</paragraph>
                    <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ sudo ifconfig eth1 0
$ sudo ovs-vsctl add-br br-eth1
$ sudo ovs-vsctl add-port br-eth1 eth1
$ sudo ifconfig eth1 up</literal_block>
                    <paragraph>Edit <emphasis>/etc/neutron/plugins/ml2/ml2_conf.ini</emphasis> (default directory), change the
                        following settings as follows in their respective tags:</paragraph>
                    <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">[ml2]
type_drivers = flat,vlan,vxlan,gre
mechanism_drivers = openvswitch

[ml2_type_flat]
flat_networks = physnet1,physnet2

[ml2_type_vlan]
network_vlan_ranges = physnet1:1000:1500,physnet2:2000:2500

[ovs]
bridge_mappings = physnet1:br-ex,physnet2:br-eth1</literal_block>
                    <paragraph>You may have to repeat the last line above in another file in the Compute Node,
                        if it exists is located in: <emphasis>/etc/neutron/plugins/openvswitch/ovs_neutron_plugin.ini</emphasis>.</paragraph>
                    <paragraph>Create a route in HNAS to the tenant network. Please make sure
                        multi-tenancy is enabled and routes are configured per EVS. Use the command
                        “route-net-add” in HNAS console, where the network parameter should be the
                        tenant’s private network, while the gateway parameter should be the flat
                        network gateway and the “console-context –evs” parameter should be the ID of
                        EVS in use, such as in the following example:</paragraph>
                    <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ console-context --evs 3 route-net-add --gateway 192.168.1.1 10.0.0.0/24</literal_block>
                </section>
                <section ids="step-3-share-type-configuration" names="step\ 3\ -\ share\ type\ configuration">
                    <title>Step 3 - Share Type Configuration</title>
                    <paragraph>Shared File Systems service requires that the share type includes the
                        driver_handles_share_servers extra-spec. This ensures that the share will be
                        created on a backend that supports the requested driver_handles_share_servers
                        capability. For the Hitachi NAS Platform File Services Driver for OpenStack
                        this must be set to False.</paragraph>
                    <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ manila type-create hitachi False</literal_block>
                    <paragraph>Additionally, the driver also reports the following common capabilities that
                        can be specified in the share type:</paragraph>
                    <table>
                        <tgroup cols="2">
                            <colspec colwidth="28"></colspec>
                            <colspec colwidth="46"></colspec>
                            <thead>
                                <row>
                                    <entry>
                                        <paragraph><strong>Capability</strong></paragraph>
                                    </entry>
                                    <entry>
                                        <paragraph><strong>Description</strong></paragraph>
                                    </entry>
                                </row>
                            </thead>
                            <tbody>
                                <row>
                                    <entry>
                                        <paragraph>thin_provisioning = True</paragraph>
                                    </entry>
                                    <entry>
                                        <paragraph>All shares created on HNAS are always thin
                                            provisioned. So, if you set it, the value
                                            <strong>must be</strong>: <emphasis>True</emphasis>.</paragraph>
                                    </entry>
                                </row>
                                <row>
                                    <entry>
                                        <paragraph>dedupe = True/False</paragraph>
                                    </entry>
                                    <entry>
                                        <paragraph>HNAS supports deduplication on its file
                                            systems and the driver will report
                                            <emphasis>dedupe=True</emphasis> if it is enabled on the file
                                            system being used. To use it, go to HNAS and
                                            enable the feature on the file system used.</paragraph>
                                    </entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </table>
                    <paragraph>To specify a common capability on the share type, use the <emphasis>type-key</emphasis> command,
                        for example:</paragraph>
                    <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ manila type-key hitachi set dedupe=True</literal_block>
                </section>
                <section ids="step-4-restart-the-services" names="step\ 4\ -\ restart\ the\ services">
                    <title>Step 4 - Restart the Services</title>
                    <paragraph>Restart all Shared File Systems services (manila-share, manila-scheduler and
                        manila-api) and neutron services (neutron-*). This step is specific to your
                        environment. If you are running in devstack for example, you have to log into
                        screen (<literal>screen -r</literal>), stop the process (<literal>Ctrl^C</literal>) and run it again. If you
                        are running it in a distro like RHEL or SUSE, a service command (for example
                        <emphasis>service manila-api restart</emphasis>) is used to restart the service.</paragraph>
                </section>
                <section ids="step-5-configure-openstack-networks" names="step\ 5\ -\ configure\ openstack\ networks">
                    <title>Step 5 - Configure OpenStack Networks</title>
                    <paragraph>In Neutron Controller it is necessary to create a network, a subnet and to add
                        this subnet interface to a router:</paragraph>
                    <paragraph>Create a network to the given tenant (demo), providing the DEMO_ID (this can be
                        fetched using <emphasis>keystone tenant-list</emphasis>), a name for the network, the name of the
                        physical network over which the virtual network is implemented and the type of
                        the physical mechanism by which the virtual network is implemented:</paragraph>
                    <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ neutron net-create --tenant-id &lt;DEMO_ID&gt; hnas_network
--provider:physical_network=physnet2 --provider:network_type=flat</literal_block>
                    <paragraph>Create a subnet to same tenant (demo), providing the DEMO_ID (this can be fetched
                        using <emphasis>keystone tenant-list</emphasis>), the gateway IP of this subnet, a name for the
                        subnet, the network ID created on previously step (this can be fetched using
                        <emphasis>neutron net-list</emphasis>) and CIDR of subnet:</paragraph>
                    <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ neutron subnet-create --tenant-id &lt;DEMO_ID&gt; --gateway &lt;GATEWAY&gt;
--name hnas_subnet &lt;NETWORK_ID&gt; &lt;SUBNET_CIDR&gt;</literal_block>
                    <paragraph>Finally, add the subnet interface to a router, providing the router ID and
                        subnet ID created on previously step (can be fetched using <emphasis>neutron subnet-list</emphasis>):</paragraph>
                    <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ neutron router-interface-add &lt;ROUTER_ID&gt; &lt;SUBNET_ID&gt;</literal_block>
                </section>
            </section>
            <section ids="manage-and-unmanage-shares" names="manage\ and\ unmanage\ shares">
                <title>Manage and Unmanage Shares</title>
                <paragraph>Manila has the ability to manage and unmanage shares. If there is a share in
                    the storage and it is not in OpenStack, you can manage that share and use it
                    as a manila share. Hitachi NAS Platform File Services Driver for OpenStack use
                    virtual-volumes (V-VOLs) to create shares. Only V-VOLs with a quota limit
                    can be used by the driver, also, they must be created or moved inside the
                    directory ‘/shares/’ and exported (as NFS or CIFS shares). The unmanage
                    operation only unlinks the share from OpenStack, preserving all data in the
                    share.</paragraph>
                <paragraph>To <strong>manage</strong> shares use:</paragraph>
                <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ manila manage [--name &lt;name&gt;] [--description &lt;description&gt;]
[--share_type &lt;share_type&gt;] [--driver_options [&lt;key=value&gt; [&lt;key=value&gt; ...]]]
&lt;service_host&gt; &lt;protocol&gt; &lt;export_path&gt;</literal_block>
                <paragraph>Where:</paragraph>
                <table>
                    <tgroup cols="3">
                        <colspec colwidth="18"></colspec>
                        <colspec colwidth="21"></colspec>
                        <colspec colwidth="36"></colspec>
                        <thead>
                            <row>
                                <entry>
                                    <paragraph>Parameter</paragraph>
                                </entry>
                                <entry morecols="1">
                                    <paragraph>Description</paragraph>
                                </entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry>
                                    <paragraph>service_host</paragraph>
                                </entry>
                                <entry morecols="1">
                                    <paragraph>Manila host, backend and share name. For example
                                        ubuntu@hitachi1#HITACHI1. The available hosts can be
                                        listed with the command: <emphasis>manila pool-list</emphasis> (admin only).</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>protocol</paragraph>
                                </entry>
                                <entry morecols="1">
                                    <paragraph>NFS or CIFS protocols are currently supported.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>export_path</paragraph>
                                </entry>
                                <entry morecols="1">
                                    <paragraph>The export path of the share.
                                        For example: <emphasis>172.24.44.31:/shares/some_share_id</emphasis></paragraph>
                                </entry>
                            </row>
                        </tbody>
                    </tgroup>
                </table>
                <paragraph>To <strong>unmanage</strong> a share use:</paragraph>
                <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ manila unmanage &lt;share_id&gt;</literal_block>
                <paragraph>Where:</paragraph>
                <table>
                    <tgroup cols="3">
                        <colspec colwidth="18"></colspec>
                        <colspec colwidth="21"></colspec>
                        <colspec colwidth="35"></colspec>
                        <thead>
                            <row>
                                <entry>
                                    <paragraph>Parameter</paragraph>
                                </entry>
                                <entry morecols="1">
                                    <paragraph>Description</paragraph>
                                </entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry>
                                    <paragraph>share_id</paragraph>
                                </entry>
                                <entry morecols="1">
                                    <paragraph>Manila ID of the share to be unmanaged. This list can
                                        be fetched with: <emphasis>manila list</emphasis>.</paragraph>
                                </entry>
                            </row>
                        </tbody>
                    </tgroup>
                </table>
            </section>
            <section ids="additional-notes" names="additional\ notes">
                <title>Additional Notes</title>
                <bullet_list bullet="-">
                    <list_item>
                        <paragraph>HNAS has some restrictions about the number of EVSs, file systems,
                            virtual-volumes and simultaneous SSC connections. Check the manual
                            specification for your system.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Shares and snapshots are thin provisioned. It is reported to manila only the
                            real used space in HNAS. Also, a snapshot does not initially take any space in
                            HNAS, it only stores the difference between the share and the snapshot, so it
                            grows when share data is changed.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Admins should manage the tenant’s quota (<emphasis>manila quota-update</emphasis>) to control
                            the backend usage.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>By default, CIFS snapshots are disabled when the share is mounted, since it
                            uses tree-clone to create snapshots and does not guarantee point-in-time
                            replicas when the source directory tree is changing, also, changing
                            permissions to <emphasis>read-only</emphasis> does not affect already mounted shares. So,
                            enable it if your source directory can be static while taking snapshots.
                            Currently, it affects only CIFS protocol. For more information check the
                            tree-clone feature in HNAS with <emphasis>man tree-clone</emphasis>.</paragraph>
                    </list_item>
                </bullet_list>
            </section>
            <section ids="the-manila-share-drivers-hitachi-hnas-driver-module" names="the\ manila.share.drivers.hitachi.hnas.driver\ module">
                <title>The <literal classes="xref py py-mod">manila.share.drivers.hitachi.hnas.driver</literal> Module</title>
                <index entries=""></index>
                <desc desctype="class" domain="py" noindex="True" objtype="class">
                    <desc_signature class="" first="False" fullname="HitachiHNASDriver" module="manila.share.drivers.hitachi.hnas.driver"><desc_annotation xml:space="preserve">class </desc_annotation><desc_name xml:space="preserve">HitachiHNASDriver</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">*args</desc_parameter><desc_parameter xml:space="preserve">**kwargs</desc_parameter></desc_parameterlist></desc_signature>
                    <desc_content>
                        <paragraph>Bases: <reference internal="True" reftitle="manila.share.driver.ShareDriver" refuri="share_replication#manila.share.driver.ShareDriver"><literal classes="xref py py-class">manila.share.driver.ShareDriver</literal></reference></paragraph>
                        <paragraph>Manila HNAS Driver implementation.</paragraph>
                        <paragraph>Driver versions:</paragraph>
                        <literal_block xml:space="preserve">1.0.0 - Initial Version.
2.0.0 - Refactoring, bugfixes, implemented Share Shrink and
        Update Access.
3.0.0 - New driver location, implemented support for CIFS protocol.
3.1.0 - Added admin network export location support.
4.0.0 - Added mountable snapshots, revert-to-snapshot and
        manage snapshots features support.</literal_block>
                        <index entries=""></index>
                        <desc desctype="method" domain="py" noindex="True" objtype="method">
                            <desc_signature class="HitachiHNASDriver" first="False" fullname="HitachiHNASDriver.create_share" module="manila.share.drivers.hitachi.hnas.driver"><desc_name xml:space="preserve">create_share</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">share</desc_parameter><desc_parameter xml:space="preserve">share_server=None</desc_parameter></desc_parameterlist></desc_signature>
                            <desc_content>
                                <paragraph>Creates share.</paragraph>
                                <field_list>
                                    <field>
                                        <field_name>Parameters</field_name>
                                        <field_body>
                                            <bullet_list>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">context</literal_strong> – The <title_reference>context.RequestContext</title_reference> object for the request</paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">share</literal_strong> – Share that will be created.</paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">share_server</literal_strong> – Data structure with share server information.
                                                        Not used by this driver.</paragraph>
                                                </list_item>
                                            </bullet_list>
                                        </field_body>
                                    </field>
                                    <field>
                                        <field_name>Returns</field_name>
                                        <field_body>
                                            <paragraph><paragraph>Returns a list of dicts containing the EVS IP concatenated
                                                    with the path of share in the filesystem.</paragraph><paragraph>Example for NFS:</paragraph><literal_block xml:space="preserve">[</literal_block><block_quote><paragraph>{</paragraph><block_quote><paragraph>‘path’: ‘172.24.44.10:/shares/id’,
                                                            ‘metadata’: {},
                                                            ‘is_admin_only’: False</paragraph></block_quote><paragraph>},</paragraph><paragraph>{</paragraph><block_quote><paragraph>‘path’: ‘192.168.0.10:/shares/id’,
                                                            ‘metadata’: {},
                                                            ‘is_admin_only’: True</paragraph></block_quote><paragraph>}</paragraph></block_quote><paragraph>]</paragraph><paragraph>Example for CIFS:</paragraph><literal_block xml:space="preserve">[</literal_block><block_quote><paragraph>{</paragraph><block_quote><paragraph>‘path’: ‘172.24.44.10id’,
                                                            ‘metadata’: {},
                                                            ‘is_admin_only’: False</paragraph></block_quote><paragraph>},</paragraph><paragraph>{</paragraph><block_quote><paragraph>‘path’: ‘192.168.0.10id’,
                                                            ‘metadata’: {},
                                                            ‘is_admin_only’: True</paragraph></block_quote><paragraph>}</paragraph></block_quote><paragraph>]</paragraph></paragraph>
                                        </field_body>
                                    </field>
                                </field_list>
                            </desc_content>
                        </desc>
                        <index entries=""></index>
                        <desc desctype="method" domain="py" noindex="True" objtype="method">
                            <desc_signature class="HitachiHNASDriver" first="False" fullname="HitachiHNASDriver.create_share_from_snapshot" module="manila.share.drivers.hitachi.hnas.driver"><desc_name xml:space="preserve">create_share_from_snapshot</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">share</desc_parameter><desc_parameter xml:space="preserve">snapshot</desc_parameter><desc_parameter xml:space="preserve">share_server=None</desc_parameter></desc_parameterlist></desc_signature>
                            <desc_content>
                                <paragraph>Creates a new share from snapshot.</paragraph>
                                <field_list>
                                    <field>
                                        <field_name>Parameters</field_name>
                                        <field_body>
                                            <bullet_list>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">context</literal_strong> – The <title_reference>context.RequestContext</title_reference> object for the request</paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">share</literal_strong> – Information about the new share.</paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">snapshot</literal_strong> – Information about the snapshot that will be copied
                                                        to new share.</paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">share_server</literal_strong> – Data structure with share server information.
                                                        Not used by this driver.</paragraph>
                                                </list_item>
                                            </bullet_list>
                                        </field_body>
                                    </field>
                                    <field>
                                        <field_name>Returns</field_name>
                                        <field_body>
                                            <paragraph><paragraph>Returns a list of dicts containing the EVS IP concatenated
                                                    with the path of share in the filesystem.</paragraph><paragraph>Example for NFS:</paragraph><literal_block xml:space="preserve">[</literal_block><block_quote><paragraph>{</paragraph><block_quote><paragraph>‘path’: ‘172.24.44.10:/shares/id’,
                                                            ‘metadata’: {},
                                                            ‘is_admin_only’: False</paragraph></block_quote><paragraph>},</paragraph><paragraph>{</paragraph><block_quote><paragraph>‘path’: ‘192.168.0.10:/shares/id’,
                                                            ‘metadata’: {},
                                                            ‘is_admin_only’: True</paragraph></block_quote><paragraph>}</paragraph></block_quote><paragraph>]</paragraph><paragraph>Example for CIFS:</paragraph><literal_block xml:space="preserve">[</literal_block><block_quote><paragraph>{</paragraph><block_quote><paragraph>‘path’: ‘172.24.44.10id’,
                                                            ‘metadata’: {},
                                                            ‘is_admin_only’: False</paragraph></block_quote><paragraph>},</paragraph><paragraph>{</paragraph><block_quote><paragraph>‘path’: ‘192.168.0.10id’,
                                                            ‘metadata’: {},
                                                            ‘is_admin_only’: True</paragraph></block_quote><paragraph>}</paragraph></block_quote><paragraph>]</paragraph></paragraph>
                                        </field_body>
                                    </field>
                                </field_list>
                            </desc_content>
                        </desc>
                        <index entries=""></index>
                        <desc desctype="method" domain="py" noindex="True" objtype="method">
                            <desc_signature class="HitachiHNASDriver" first="False" fullname="HitachiHNASDriver.create_snapshot" module="manila.share.drivers.hitachi.hnas.driver"><desc_name xml:space="preserve">create_snapshot</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">snapshot</desc_parameter><desc_parameter xml:space="preserve">share_server=None</desc_parameter></desc_parameterlist></desc_signature>
                            <desc_content>
                                <paragraph>Creates snapshot.</paragraph>
                                <field_list>
                                    <field>
                                        <field_name>Parameters</field_name>
                                        <field_body>
                                            <bullet_list>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">context</literal_strong> – The <title_reference>context.RequestContext</title_reference> object for the request</paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">snapshot</literal_strong> – Snapshot that will be created.</paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">share_server</literal_strong> – Data structure with share server information.
                                                        Not used by this driver.</paragraph>
                                                </list_item>
                                            </bullet_list>
                                        </field_body>
                                    </field>
                                </field_list>
                            </desc_content>
                        </desc>
                        <index entries=""></index>
                        <desc desctype="method" domain="py" noindex="True" objtype="method">
                            <desc_signature class="HitachiHNASDriver" first="False" fullname="HitachiHNASDriver.delete_share" module="manila.share.drivers.hitachi.hnas.driver"><desc_name xml:space="preserve">delete_share</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">share</desc_parameter><desc_parameter xml:space="preserve">share_server=None</desc_parameter></desc_parameterlist></desc_signature>
                            <desc_content>
                                <paragraph>Deletes share.</paragraph>
                                <field_list>
                                    <field>
                                        <field_name>Parameters</field_name>
                                        <field_body>
                                            <bullet_list>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">context</literal_strong> – The <title_reference>context.RequestContext</title_reference> object for the request</paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">share</literal_strong> – Share that will be deleted.</paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">share_server</literal_strong> – Data structure with share server information.
                                                        Not used by this driver.</paragraph>
                                                </list_item>
                                            </bullet_list>
                                        </field_body>
                                    </field>
                                </field_list>
                            </desc_content>
                        </desc>
                        <index entries=""></index>
                        <desc desctype="method" domain="py" noindex="True" objtype="method">
                            <desc_signature class="HitachiHNASDriver" first="False" fullname="HitachiHNASDriver.delete_snapshot" module="manila.share.drivers.hitachi.hnas.driver"><desc_name xml:space="preserve">delete_snapshot</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">snapshot</desc_parameter><desc_parameter xml:space="preserve">share_server=None</desc_parameter></desc_parameterlist></desc_signature>
                            <desc_content>
                                <paragraph>Deletes snapshot.</paragraph>
                                <field_list>
                                    <field>
                                        <field_name>Parameters</field_name>
                                        <field_body>
                                            <bullet_list>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">context</literal_strong> – The <title_reference>context.RequestContext</title_reference> object for the request</paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">snapshot</literal_strong> – Snapshot that will be deleted.</paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">share_server</literal_strong> – Data structure with share server information.
                                                        Not used by this driver.</paragraph>
                                                </list_item>
                                            </bullet_list>
                                        </field_body>
                                    </field>
                                </field_list>
                            </desc_content>
                        </desc>
                        <index entries=""></index>
                        <desc desctype="method" domain="py" noindex="True" objtype="method">
                            <desc_signature class="HitachiHNASDriver" first="False" fullname="HitachiHNASDriver.ensure_share" module="manila.share.drivers.hitachi.hnas.driver"><desc_name xml:space="preserve">ensure_share</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">share</desc_parameter><desc_parameter xml:space="preserve">share_server=None</desc_parameter></desc_parameterlist></desc_signature>
                            <desc_content>
                                <paragraph>Ensure that share is exported.</paragraph>
                                <field_list>
                                    <field>
                                        <field_name>Parameters</field_name>
                                        <field_body>
                                            <bullet_list>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">context</literal_strong> – The <title_reference>context.RequestContext</title_reference> object for the request</paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">share</literal_strong> – Share that will be checked.</paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">share_server</literal_strong> – Data structure with share server information.
                                                        Not used by this driver.</paragraph>
                                                </list_item>
                                            </bullet_list>
                                        </field_body>
                                    </field>
                                    <field>
                                        <field_name>Returns</field_name>
                                        <field_body>
                                            <paragraph><paragraph>Returns a list of dicts containing the EVS IP concatenated
                                                    with the path of share in the filesystem.</paragraph><paragraph>Example for NFS:</paragraph><literal_block xml:space="preserve">[</literal_block><block_quote><paragraph>{</paragraph><block_quote><paragraph>‘path’: ‘172.24.44.10:/shares/id’,
                                                            ‘metadata’: {},
                                                            ‘is_admin_only’: False</paragraph></block_quote><paragraph>},</paragraph><paragraph>{</paragraph><block_quote><paragraph>‘path’: ‘192.168.0.10:/shares/id’,
                                                            ‘metadata’: {},
                                                            ‘is_admin_only’: True</paragraph></block_quote><paragraph>}</paragraph></block_quote><paragraph>]</paragraph><paragraph>Example for CIFS:</paragraph><literal_block xml:space="preserve">[</literal_block><block_quote><paragraph>{</paragraph><block_quote><paragraph>‘path’: ‘172.24.44.10id’,
                                                            ‘metadata’: {},
                                                            ‘is_admin_only’: False</paragraph></block_quote><paragraph>},</paragraph><paragraph>{</paragraph><block_quote><paragraph>‘path’: ‘192.168.0.10id’,
                                                            ‘metadata’: {},
                                                            ‘is_admin_only’: True</paragraph></block_quote><paragraph>}</paragraph></block_quote><paragraph>]</paragraph></paragraph>
                                        </field_body>
                                    </field>
                                </field_list>
                            </desc_content>
                        </desc>
                        <index entries=""></index>
                        <desc desctype="method" domain="py" noindex="True" objtype="method">
                            <desc_signature class="HitachiHNASDriver" first="False" fullname="HitachiHNASDriver.ensure_snapshot" module="manila.share.drivers.hitachi.hnas.driver"><desc_name xml:space="preserve">ensure_snapshot</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">snapshot</desc_parameter><desc_parameter xml:space="preserve">share_server=None</desc_parameter></desc_parameterlist></desc_signature>
                            <desc_content>
                                <paragraph>Ensure that snapshot is exported.</paragraph>
                                <field_list>
                                    <field>
                                        <field_name>Parameters</field_name>
                                        <field_body>
                                            <bullet_list>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">context</literal_strong> – The <title_reference>context.RequestContext</title_reference> object for the request.</paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">snapshot</literal_strong> – Snapshot that will be checked.</paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">share_server</literal_strong> – Data structure with share server information.
                                                        Not used by this driver.</paragraph>
                                                </list_item>
                                            </bullet_list>
                                        </field_body>
                                    </field>
                                    <field>
                                        <field_name>Returns</field_name>
                                        <field_body>
                                            <paragraph><paragraph>Returns a list of dicts containing the EVS IP concatenated
                                                    with the path of snapshot in the filesystem or None if
                                                    mount_snapshot_support is False.</paragraph><paragraph>Example for NFS:</paragraph><literal_block xml:space="preserve">[</literal_block><block_quote><paragraph>{</paragraph><block_quote><paragraph>‘path’: ‘172.24.44.10:/snapshots/id’,
                                                            ‘metadata’: {},
                                                            ‘is_admin_only’: False</paragraph></block_quote><paragraph>},</paragraph><paragraph>{</paragraph><block_quote><paragraph>‘path’: ‘192.168.0.10:/snapshots/id’,
                                                            ‘metadata’: {},
                                                            ‘is_admin_only’: True</paragraph></block_quote><paragraph>}</paragraph></block_quote><paragraph>]</paragraph><paragraph>Example for CIFS:</paragraph><literal_block xml:space="preserve">[</literal_block><block_quote><paragraph>{</paragraph><block_quote><paragraph>‘path’: ‘172.24.44.10id’,
                                                            ‘metadata’: {},
                                                            ‘is_admin_only’: False</paragraph></block_quote><paragraph>},</paragraph><paragraph>{</paragraph><block_quote><paragraph>‘path’: ‘192.168.0.10id’,
                                                            ‘metadata’: {},
                                                            ‘is_admin_only’: True</paragraph></block_quote><paragraph>}</paragraph></block_quote><paragraph>]</paragraph></paragraph>
                                        </field_body>
                                    </field>
                                </field_list>
                            </desc_content>
                        </desc>
                        <index entries=""></index>
                        <desc desctype="method" domain="py" noindex="True" objtype="method">
                            <desc_signature class="HitachiHNASDriver" first="False" fullname="HitachiHNASDriver.extend_share" module="manila.share.drivers.hitachi.hnas.driver"><desc_name xml:space="preserve">extend_share</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">share</desc_parameter><desc_parameter xml:space="preserve">new_size</desc_parameter><desc_parameter xml:space="preserve">share_server=None</desc_parameter></desc_parameterlist></desc_signature>
                            <desc_content>
                                <paragraph>Extends a share to new size.</paragraph>
                                <field_list>
                                    <field>
                                        <field_name>Parameters</field_name>
                                        <field_body>
                                            <bullet_list>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">share</literal_strong> – Share that will be extended.</paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">new_size</literal_strong> – New size of share.</paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">share_server</literal_strong> – Data structure with share server information.
                                                        Not used by this driver.</paragraph>
                                                </list_item>
                                            </bullet_list>
                                        </field_body>
                                    </field>
                                </field_list>
                            </desc_content>
                        </desc>
                        <index entries=""></index>
                        <desc desctype="method" domain="py" noindex="True" objtype="method">
                            <desc_signature class="HitachiHNASDriver" first="False" fullname="HitachiHNASDriver.get_network_allocations_number" module="manila.share.drivers.hitachi.hnas.driver"><desc_name xml:space="preserve">get_network_allocations_number</desc_name><desc_parameterlist xml:space="preserve"></desc_parameterlist></desc_signature>
                            <desc_content>
                                <paragraph>Track allocations_number in DHSS = true.</paragraph>
                                <paragraph>When using the setting driver_handles_share_server = false
                                    does not require to track allocations_number because we do not handle
                                    network stuff.</paragraph>
                            </desc_content>
                        </desc>
                        <index entries=""></index>
                        <desc desctype="method" domain="py" noindex="True" objtype="method">
                            <desc_signature class="HitachiHNASDriver" first="False" fullname="HitachiHNASDriver.manage_existing" module="manila.share.drivers.hitachi.hnas.driver"><desc_name xml:space="preserve">manage_existing</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">share</desc_parameter><desc_parameter xml:space="preserve">driver_options</desc_parameter></desc_parameterlist></desc_signature>
                            <desc_content>
                                <paragraph>Manages a share that exists on backend.</paragraph>
                                <field_list>
                                    <field>
                                        <field_name>Parameters</field_name>
                                        <field_body>
                                            <bullet_list>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">share</literal_strong> – Share that will be managed.</paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">driver_options</literal_strong> – Empty dict or dict with ‘volume_id’ option.</paragraph>
                                                </list_item>
                                            </bullet_list>
                                        </field_body>
                                    </field>
                                    <field>
                                        <field_name>Returns</field_name>
                                        <field_body>
                                            <paragraph><paragraph>Returns a dict with size of the share managed and a list of
                                                    dicts containing its export locations.</paragraph><paragraph>Example for NFS:</paragraph><literal_block xml:space="preserve">{</literal_block><block_quote><paragraph>‘size’: 10,
                                                        ‘export_locations’: [</paragraph><block_quote><paragraph>{</paragraph><block_quote><paragraph>‘path’: ‘172.24.44.10:/shares/id’,
                                                                ‘metadata’: {},
                                                                ‘is_admin_only’: False</paragraph></block_quote><paragraph>},</paragraph><paragraph>{</paragraph><block_quote><paragraph>‘path’: ‘192.168.0.10:/shares/id’,
                                                                ‘metadata’: {},
                                                                ‘is_admin_only’: True</paragraph></block_quote><paragraph>}</paragraph></block_quote><paragraph>]</paragraph></block_quote><paragraph>}</paragraph><paragraph>Example for CIFS:</paragraph><literal_block xml:space="preserve">{</literal_block><block_quote><paragraph>‘size’: 10,
                                                        ‘export_locations’: [</paragraph><block_quote><paragraph>{</paragraph><block_quote><paragraph>‘path’: ‘172.24.44.10id’,
                                                                ‘metadata’: {},
                                                                ‘is_admin_only’: False</paragraph></block_quote><paragraph>},</paragraph><paragraph>{</paragraph><block_quote><paragraph>‘path’: ‘192.168.0.10id’,
                                                                ‘metadata’: {},
                                                                ‘is_admin_only’: True</paragraph></block_quote><paragraph>}</paragraph></block_quote><paragraph>]</paragraph></block_quote><paragraph>}</paragraph></paragraph>
                                        </field_body>
                                    </field>
                                </field_list>
                            </desc_content>
                        </desc>
                        <index entries=""></index>
                        <desc desctype="method" domain="py" noindex="True" objtype="method">
                            <desc_signature class="HitachiHNASDriver" first="False" fullname="HitachiHNASDriver.manage_existing_snapshot" module="manila.share.drivers.hitachi.hnas.driver"><desc_name xml:space="preserve">manage_existing_snapshot</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">snapshot</desc_parameter><desc_parameter xml:space="preserve">driver_options</desc_parameter></desc_parameterlist></desc_signature>
                            <desc_content>
                                <paragraph>Manages a snapshot that exists only in HNAS.</paragraph>
                                <paragraph>The snapshot to be managed should be in the path
                                    /snapshots/SHARE_ID/SNAPSHOT_ID. Also, the size of snapshot should be
                                    provided as –driver_options size=&lt;size&gt;.
                                    :param snapshot: snapshot that will be managed.
                                    :param driver_options: expects only one key ‘size’. It must be
                                    provided in order to manage a snapshot.</paragraph>
                                <field_list>
                                    <field>
                                        <field_name>Returns</field_name>
                                        <field_body>
                                            <paragraph>Returns a dict with size of snapshot managed</paragraph>
                                        </field_body>
                                    </field>
                                </field_list>
                            </desc_content>
                        </desc>
                        <index entries=""></index>
                        <desc desctype="method" domain="py" noindex="True" objtype="method">
                            <desc_signature class="HitachiHNASDriver" first="False" fullname="HitachiHNASDriver.revert_to_snapshot" module="manila.share.drivers.hitachi.hnas.driver"><desc_name xml:space="preserve">revert_to_snapshot</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">snapshot</desc_parameter><desc_parameter xml:space="preserve">share_access_rules</desc_parameter><desc_parameter xml:space="preserve">snapshot_access_rules</desc_parameter><desc_parameter xml:space="preserve">share_server=None</desc_parameter></desc_parameterlist></desc_signature>
                            <desc_content>
                                <paragraph>Reverts a share to a given snapshot.</paragraph>
                                <field_list>
                                    <field>
                                        <field_name>Parameters</field_name>
                                        <field_body>
                                            <bullet_list>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">context</literal_strong> – The <title_reference>context.RequestContext</title_reference> object for the request</paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">snapshot</literal_strong> – The snapshot to which the share is to be reverted to.</paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">share_access_rules</literal_strong> – List of all access rules for the affected
                                                        share. Not used by this driver.</paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">snapshot_access_rules</literal_strong> – List of all access rules for the affected
                                                        snapshot. Not used by this driver.</paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">share_server</literal_strong> – Data structure with share server information.
                                                        Not used by this driver.</paragraph>
                                                </list_item>
                                            </bullet_list>
                                        </field_body>
                                    </field>
                                </field_list>
                            </desc_content>
                        </desc>
                        <index entries=""></index>
                        <desc desctype="method" domain="py" noindex="True" objtype="method">
                            <desc_signature class="HitachiHNASDriver" first="False" fullname="HitachiHNASDriver.shrink_share" module="manila.share.drivers.hitachi.hnas.driver"><desc_name xml:space="preserve">shrink_share</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">share</desc_parameter><desc_parameter xml:space="preserve">new_size</desc_parameter><desc_parameter xml:space="preserve">share_server=None</desc_parameter></desc_parameterlist></desc_signature>
                            <desc_content>
                                <paragraph>Shrinks a share to new size.</paragraph>
                                <field_list>
                                    <field>
                                        <field_name>Parameters</field_name>
                                        <field_body>
                                            <bullet_list>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">share</literal_strong> – Share that will be shrunk.</paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">new_size</literal_strong> – New size of share.</paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">share_server</literal_strong> – Data structure with share server information.
                                                        Not used by this driver.</paragraph>
                                                </list_item>
                                            </bullet_list>
                                        </field_body>
                                    </field>
                                </field_list>
                            </desc_content>
                        </desc>
                        <index entries=""></index>
                        <desc desctype="method" domain="py" noindex="True" objtype="method">
                            <desc_signature class="HitachiHNASDriver" first="False" fullname="HitachiHNASDriver.snapshot_update_access" module="manila.share.drivers.hitachi.hnas.driver"><desc_name xml:space="preserve">snapshot_update_access</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">snapshot</desc_parameter><desc_parameter xml:space="preserve">access_rules</desc_parameter><desc_parameter xml:space="preserve">add_rules</desc_parameter><desc_parameter xml:space="preserve">delete_rules</desc_parameter><desc_parameter xml:space="preserve">share_server=None</desc_parameter></desc_parameterlist></desc_signature>
                            <desc_content>
                                <paragraph>Update access rules for given snapshot.</paragraph>
                                <paragraph>Drivers should support 2 different cases in this method:
                                    1. Recovery after error - ‘access_rules’ contains all access rules,
                                    ‘add_rules’ and ‘delete_rules’ shall be empty. Driver should clear any
                                    existent access rules and apply all access rules for given snapshot.
                                    This recovery is made at driver start up.</paragraph>
                                <paragraph>2. Adding/Deleting of several access rules - ‘access_rules’ contains
                                    all access rules, ‘add_rules’ and ‘delete_rules’ contain rules which
                                    should be added/deleted. Driver can ignore rules in ‘access_rules’ and
                                    apply only rules from ‘add_rules’ and ‘delete_rules’. All snapshots
                                    rules should be read only.</paragraph>
                                <field_list>
                                    <field>
                                        <field_name>Parameters</field_name>
                                        <field_body>
                                            <bullet_list>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">context</literal_strong> – Current context</paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">snapshot</literal_strong> – Snapshot model with snapshot data.</paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">access_rules</literal_strong> – All access rules for given snapshot</paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">add_rules</literal_strong> – Empty List or List of access rules which should be
                                                        added. access_rules already contains these rules.</paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">delete_rules</literal_strong> – Empty List or List of access rules which should be
                                                        removed. access_rules doesn’t contain these rules.</paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">share_server</literal_strong> – None or Share server model</paragraph>
                                                </list_item>
                                            </bullet_list>
                                        </field_body>
                                    </field>
                                </field_list>
                            </desc_content>
                        </desc>
                        <index entries=""></index>
                        <desc desctype="method" domain="py" noindex="True" objtype="method">
                            <desc_signature class="HitachiHNASDriver" first="False" fullname="HitachiHNASDriver.unmanage" module="manila.share.drivers.hitachi.hnas.driver"><desc_name xml:space="preserve">unmanage</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">share</desc_parameter></desc_parameterlist></desc_signature>
                            <desc_content>
                                <paragraph>Unmanages a share.</paragraph>
                                <field_list>
                                    <field>
                                        <field_name>Parameters</field_name>
                                        <field_body>
                                            <paragraph><literal_strong refspecific="True">share</literal_strong> – Share that will be unmanaged.</paragraph>
                                        </field_body>
                                    </field>
                                </field_list>
                            </desc_content>
                        </desc>
                        <index entries=""></index>
                        <desc desctype="method" domain="py" noindex="True" objtype="method">
                            <desc_signature class="HitachiHNASDriver" first="False" fullname="HitachiHNASDriver.unmanage_snapshot" module="manila.share.drivers.hitachi.hnas.driver"><desc_name xml:space="preserve">unmanage_snapshot</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">snapshot</desc_parameter></desc_parameterlist></desc_signature>
                            <desc_content>
                                <paragraph>Unmanage a share snapshot</paragraph>
                                <field_list>
                                    <field>
                                        <field_name>Parameters</field_name>
                                        <field_body>
                                            <paragraph><literal_strong refspecific="True">snapshot</literal_strong> – Snapshot that will be unmanaged.</paragraph>
                                        </field_body>
                                    </field>
                                </field_list>
                            </desc_content>
                        </desc>
                        <index entries=""></index>
                        <desc desctype="method" domain="py" noindex="True" objtype="method">
                            <desc_signature class="HitachiHNASDriver" first="False" fullname="HitachiHNASDriver.update_access" module="manila.share.drivers.hitachi.hnas.driver"><desc_name xml:space="preserve">update_access</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">share</desc_parameter><desc_parameter xml:space="preserve">access_rules</desc_parameter><desc_parameter xml:space="preserve">add_rules</desc_parameter><desc_parameter xml:space="preserve">delete_rules</desc_parameter><desc_parameter xml:space="preserve">share_server=None</desc_parameter></desc_parameterlist></desc_signature>
                            <desc_content>
                                <paragraph>Update access rules for given share.</paragraph>
                                <field_list>
                                    <field>
                                        <field_name>Parameters</field_name>
                                        <field_body>
                                            <bullet_list>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">context</literal_strong> – The <title_reference>context.RequestContext</title_reference> object for the request</paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">share</literal_strong> – Share that will have its access rules updated.</paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">access_rules</literal_strong> – All access rules for given share.</paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">add_rules</literal_strong> – Empty List or List of access rules which should be
                                                        added. access_rules already contains these rules.</paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">delete_rules</literal_strong> – Empty List or List of access rules which should be
                                                        removed. access_rules doesn’t contain these rules.</paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">share_server</literal_strong> – Data structure with share server information.
                                                        Not used by this driver.</paragraph>
                                                </list_item>
                                            </bullet_list>
                                        </field_body>
                                    </field>
                                </field_list>
                            </desc_content>
                        </desc>
                    </desc_content>
                </desc>
            </section>
        </section>
    </section>
</document>

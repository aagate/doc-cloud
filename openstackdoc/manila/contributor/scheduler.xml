<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/manila/doc/source/contributor/scheduler.rst">
    <comment xml:space="preserve">Copyright 2010-2011 United States Government as represented by the
Administrator of the National Aeronautics and Space Administration.
All Rights Reserved.

Licensed under the Apache License, Version 2.0 (the "License"); you may
not use this file except in compliance with the License. You may obtain
a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations
under the License.</comment>
    <section ids="scheduler" names="scheduler">
        <title>Scheduler</title>
        <section ids="the-manila-scheduler-manager-module" names="the\ manila.scheduler.manager\ module">
            <title>The <literal classes="xref py py-mod">manila.scheduler.manager</literal> Module</title>
            <paragraph>Scheduler Service</paragraph>
            <index entries=""></index>
            <desc desctype="class" domain="py" noindex="True" objtype="class">
                <desc_signature class="" first="False" fullname="SchedulerManager" module="manila.scheduler.manager"><desc_annotation xml:space="preserve">class </desc_annotation><desc_name xml:space="preserve">SchedulerManager</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">scheduler_driver=None</desc_parameter><desc_parameter xml:space="preserve">service_name=None</desc_parameter><desc_parameter xml:space="preserve">*args</desc_parameter><desc_parameter xml:space="preserve">**kwargs</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">manila.manager.Manager</literal></paragraph>
                    <paragraph>Chooses a host to create shares.</paragraph>
                    <index entries=""></index>
                    <desc desctype="attribute" domain="py" noindex="True" objtype="attribute">
                        <desc_signature class="SchedulerManager" first="False" fullname="SchedulerManager.RPC_API_VERSION" module="manila.scheduler.manager"><desc_name xml:space="preserve">RPC_API_VERSION</desc_name><desc_annotation xml:space="preserve"> = '1.8'</desc_annotation></desc_signature>
                        <desc_content>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="SchedulerManager" first="False" fullname="SchedulerManager.create_share_group" module="manila.scheduler.manager"><desc_name xml:space="preserve">create_share_group</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">share_group_id</desc_parameter><desc_parameter xml:space="preserve">request_spec=None</desc_parameter><desc_parameter xml:space="preserve">filter_properties=None</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="SchedulerManager" first="False" fullname="SchedulerManager.create_share_instance" module="manila.scheduler.manager"><desc_name xml:space="preserve">create_share_instance</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">request_spec=None</desc_parameter><desc_parameter xml:space="preserve">filter_properties=None</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="SchedulerManager" first="False" fullname="SchedulerManager.create_share_replica" module="manila.scheduler.manager"><desc_name xml:space="preserve">create_share_replica</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">request_spec=None</desc_parameter><desc_parameter xml:space="preserve">filter_properties=None</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="SchedulerManager" first="False" fullname="SchedulerManager.get_host_list" module="manila.scheduler.manager"><desc_name xml:space="preserve">get_host_list</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Get a list of hosts from the HostManager.</paragraph>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="SchedulerManager" first="False" fullname="SchedulerManager.get_pools" module="manila.scheduler.manager"><desc_name xml:space="preserve">get_pools</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">filters=None</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Get active pools from the scheduler’s cache.</paragraph>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="SchedulerManager" first="False" fullname="SchedulerManager.get_service_capabilities" module="manila.scheduler.manager"><desc_name xml:space="preserve">get_service_capabilities</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Get the normalized set of capabilities for this zone.</paragraph>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="SchedulerManager" first="False" fullname="SchedulerManager.init_host" module="manila.scheduler.manager"><desc_name xml:space="preserve">init_host</desc_name><desc_parameterlist xml:space="preserve"></desc_parameterlist></desc_signature>
                        <desc_content>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="SchedulerManager" first="False" fullname="SchedulerManager.manage_share" module="manila.scheduler.manager"><desc_name xml:space="preserve">manage_share</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">share_id</desc_parameter><desc_parameter xml:space="preserve">driver_options</desc_parameter><desc_parameter xml:space="preserve">request_spec</desc_parameter><desc_parameter xml:space="preserve">filter_properties=None</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Ensure that the host exists and can accept the share.</paragraph>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="SchedulerManager" first="False" fullname="SchedulerManager.migrate_share_to_host" module="manila.scheduler.manager"><desc_name xml:space="preserve">migrate_share_to_host</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">share_id</desc_parameter><desc_parameter xml:space="preserve">host</desc_parameter><desc_parameter xml:space="preserve">force_host_assisted_migration</desc_parameter><desc_parameter xml:space="preserve">preserve_metadata</desc_parameter><desc_parameter xml:space="preserve">writable</desc_parameter><desc_parameter xml:space="preserve">nondisruptive</desc_parameter><desc_parameter xml:space="preserve">preserve_snapshots</desc_parameter><desc_parameter xml:space="preserve">new_share_network_id</desc_parameter><desc_parameter xml:space="preserve">new_share_type_id</desc_parameter><desc_parameter xml:space="preserve">request_spec</desc_parameter><desc_parameter xml:space="preserve">filter_properties=None</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Ensure that the host exists and can accept the share.</paragraph>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="SchedulerManager" first="False" fullname="SchedulerManager.request_service_capabilities" module="manila.scheduler.manager"><desc_name xml:space="preserve">request_service_capabilities</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="SchedulerManager" first="False" fullname="SchedulerManager.update_service_capabilities" module="manila.scheduler.manager"><desc_name xml:space="preserve">update_service_capabilities</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">service_name=None</desc_parameter><desc_parameter xml:space="preserve">host=None</desc_parameter><desc_parameter xml:space="preserve">capabilities=None</desc_parameter><desc_parameter xml:space="preserve">**kwargs</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Process a capability update from a service node.</paragraph>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
        </section>
        <section ids="the-manila-scheduler-base-handler-module" names="the\ manila.scheduler.base_handler\ module">
            <title>The <literal classes="xref py py-mod">manila.scheduler.base_handler</literal> Module</title>
            <paragraph>A common base for handling extension classes.</paragraph>
            <paragraph>Used by BaseFilterHandler and BaseWeightHandler</paragraph>
            <index entries=""></index>
            <desc desctype="class" domain="py" noindex="True" objtype="class">
                <desc_signature class="" first="False" fullname="BaseHandler" module="manila.scheduler.base_handler"><desc_annotation xml:space="preserve">class </desc_annotation><desc_name xml:space="preserve">BaseHandler</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">modifier_class_type</desc_parameter><desc_parameter xml:space="preserve">modifier_namespace</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">object</literal></paragraph>
                    <paragraph>Base class to handle loading filter and weight classes.</paragraph>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="BaseHandler" first="False" fullname="BaseHandler.get_all_classes" module="manila.scheduler.base_handler"><desc_name xml:space="preserve">get_all_classes</desc_name><desc_parameterlist xml:space="preserve"></desc_parameterlist></desc_signature>
                        <desc_content>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
        </section>
        <section ids="the-manila-scheduler-host-manager-module" names="the\ manila.scheduler.host_manager\ module">
            <title>The <literal classes="xref py py-mod">manila.scheduler.host_manager</literal> Module</title>
            <paragraph>Manage hosts in the current zone.</paragraph>
            <index entries=""></index>
            <desc desctype="class" domain="py" noindex="True" objtype="class">
                <desc_signature class="" first="False" fullname="HostManager" module="manila.scheduler.host_manager"><desc_annotation xml:space="preserve">class </desc_annotation><desc_name xml:space="preserve">HostManager</desc_name></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">object</literal></paragraph>
                    <paragraph>Base HostManager class.</paragraph>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="HostManager" first="False" fullname="HostManager.get_all_host_states_share" module="manila.scheduler.host_manager"><desc_name xml:space="preserve">get_all_host_states_share</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Returns a dict of all the hosts the HostManager knows about.</paragraph>
                            <paragraph>Each of the consumable resources in HostState are
                                populated with capabilities scheduler received from RPC.</paragraph>
                            <definition_list>
                                <definition_list_item>
                                    <term>For example:</term>
                                    <definition>
                                        <paragraph>{‘192.168.1.100’: HostState(), …}</paragraph>
                                    </definition>
                                </definition_list_item>
                            </definition_list>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="HostManager" first="False" fullname="HostManager.get_filtered_hosts" module="manila.scheduler.host_manager"><desc_name xml:space="preserve">get_filtered_hosts</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">hosts</desc_parameter><desc_parameter xml:space="preserve">filter_properties</desc_parameter><desc_parameter xml:space="preserve">filter_class_names=None</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Filter hosts and return only ones passing all filters.</paragraph>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="HostManager" first="False" fullname="HostManager.get_pools" module="manila.scheduler.host_manager"><desc_name xml:space="preserve">get_pools</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">filters=None</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Returns a dict of all pools on all hosts HostManager knows about.</paragraph>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="HostManager" first="False" fullname="HostManager.get_weighed_hosts" module="manila.scheduler.host_manager"><desc_name xml:space="preserve">get_weighed_hosts</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">hosts</desc_parameter><desc_parameter xml:space="preserve">weight_properties</desc_parameter><desc_parameter xml:space="preserve">weigher_class_names=None</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Weigh the hosts.</paragraph>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="attribute" domain="py" noindex="True" objtype="attribute">
                        <desc_signature class="HostManager" first="False" fullname="HostManager.host_state_cls" module="manila.scheduler.host_manager"><desc_name xml:space="preserve">host_state_cls</desc_name></desc_signature>
                        <desc_content>
                            <paragraph>alias of <literal classes="xref py py-class">HostState</literal></paragraph>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="HostManager" first="False" fullname="HostManager.update_service_capabilities" module="manila.scheduler.host_manager"><desc_name xml:space="preserve">update_service_capabilities</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">service_name</desc_parameter><desc_parameter xml:space="preserve">host</desc_parameter><desc_parameter xml:space="preserve">capabilities</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Update the per-service capabilities based on this notification.</paragraph>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
            <index entries=""></index>
            <desc desctype="class" domain="py" noindex="True" objtype="class">
                <desc_signature class="" first="False" fullname="HostState" module="manila.scheduler.host_manager"><desc_annotation xml:space="preserve">class </desc_annotation><desc_name xml:space="preserve">HostState</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">host</desc_parameter><desc_parameter xml:space="preserve">capabilities=None</desc_parameter><desc_parameter xml:space="preserve">service=None</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">object</literal></paragraph>
                    <paragraph>Mutable and immutable information tracked for a host.</paragraph>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="HostState" first="False" fullname="HostState.consume_from_share" module="manila.scheduler.host_manager"><desc_name xml:space="preserve">consume_from_share</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">share</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Incrementally update host state from an share.</paragraph>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="HostState" first="False" fullname="HostState.update_backend" module="manila.scheduler.host_manager"><desc_name xml:space="preserve">update_backend</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">capability</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="HostState" first="False" fullname="HostState.update_capabilities" module="manila.scheduler.host_manager"><desc_name xml:space="preserve">update_capabilities</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">capabilities=None</desc_parameter><desc_parameter xml:space="preserve">service=None</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="HostState" first="False" fullname="HostState.update_from_share_capability" module="manila.scheduler.host_manager"><desc_name xml:space="preserve">update_from_share_capability</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">capability</desc_parameter><desc_parameter xml:space="preserve">service=None</desc_parameter><desc_parameter xml:space="preserve">context=None</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Update information about a host from its share_node info.</paragraph>
                            <paragraph>‘capability’ is the status info reported by share backend, a typical
                                capability looks like this:</paragraph>
                            <literal_block xml:space="preserve">capability = {
    'share_backend_name': 'Local NFS',    #                'vendor_name': 'OpenStack',           #  backend level
    'driver_version': '1.0',              #  mandatory/fixed
    'storage_protocol': 'NFS',            #/ stats&amp;capabilities

    'active_shares': 10,                  #                'IOPS_provisioned': 30000,            #  optional custom
    'fancy_capability_1': 'eat',          #  stats &amp; capabilities
    'fancy_capability_2': 'drink',        #/

    'pools':[
      {
         'pool_name': '1st pool',         #                     'total_capacity_gb': 500,        #  mandatory stats
         'free_capacity_gb': 230,         #   for pools
         'allocated_capacity_gb': 270,    # |
         'qos': 'False',                  # |
         'reserved_percentage': 0,        #/

         'dying_disks': 100,              #                     'super_hero_1': 'spider-man',    #  optional custom
         'super_hero_2': 'flash',         #  stats &amp;
         'super_hero_3': 'neoncat',       #  capabilities
         'super_hero_4': 'green lantern', #/
       },
      {
         'pool_name': '2nd pool',
         'total_capacity_gb': 1024,
         'free_capacity_gb': 1024,
         'allocated_capacity_gb': 0,
         'qos': 'False',
         'reserved_percentage': 0,

         'dying_disks': 200,
         'super_hero_1': 'superman',
         'super_hero_2': 'Hulk',
      }]
}</literal_block>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="HostState" first="False" fullname="HostState.update_pools" module="manila.scheduler.host_manager"><desc_name xml:space="preserve">update_pools</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">capability</desc_parameter><desc_parameter xml:space="preserve">service</desc_parameter><desc_parameter xml:space="preserve">context=None</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Update storage pools information from backend reported info.</paragraph>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
            <index entries=""></index>
            <desc desctype="class" domain="py" noindex="True" objtype="class">
                <desc_signature class="" first="False" fullname="PoolState" module="manila.scheduler.host_manager"><desc_annotation xml:space="preserve">class </desc_annotation><desc_name xml:space="preserve">PoolState</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">host</desc_parameter><desc_parameter xml:space="preserve">capabilities</desc_parameter><desc_parameter xml:space="preserve">pool_name</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">manila.scheduler.host_manager.HostState</literal></paragraph>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="PoolState" first="False" fullname="PoolState.update_from_share_capability" module="manila.scheduler.host_manager"><desc_name xml:space="preserve">update_from_share_capability</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">capability</desc_parameter><desc_parameter xml:space="preserve">service=None</desc_parameter><desc_parameter xml:space="preserve">context=None</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Update information about a pool from its share_node info.</paragraph>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="PoolState" first="False" fullname="PoolState.update_pools" module="manila.scheduler.host_manager"><desc_name xml:space="preserve">update_pools</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">capability</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
            <index entries=""></index>
            <desc desctype="class" domain="py" noindex="True" objtype="class">
                <desc_signature class="" first="False" fullname="ReadOnlyDict" module="manila.scheduler.host_manager"><desc_annotation xml:space="preserve">class </desc_annotation><desc_name xml:space="preserve">ReadOnlyDict</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">source=None</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">collections.UserDict</literal></paragraph>
                    <paragraph>A read-only dict.</paragraph>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="ReadOnlyDict" first="False" fullname="ReadOnlyDict.clear" module="manila.scheduler.host_manager"><desc_name xml:space="preserve">clear</desc_name><desc_parameterlist xml:space="preserve"></desc_parameterlist></desc_signature>
                        <desc_content>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="ReadOnlyDict" first="False" fullname="ReadOnlyDict.pop" module="manila.scheduler.host_manager"><desc_name xml:space="preserve">pop</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">key</desc_parameter><desc_parameter xml:space="preserve">*args</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="ReadOnlyDict" first="False" fullname="ReadOnlyDict.popitem" module="manila.scheduler.host_manager"><desc_name xml:space="preserve">popitem</desc_name><desc_parameterlist xml:space="preserve"></desc_parameterlist></desc_signature>
                        <desc_content>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="ReadOnlyDict" first="False" fullname="ReadOnlyDict.update" module="manila.scheduler.host_manager"><desc_name xml:space="preserve">update</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">source=None</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
        </section>
        <section ids="the-manila-scheduler-rpcapi-module" names="the\ manila.scheduler.rpcapi\ module">
            <title>The <literal classes="xref py py-mod">manila.scheduler.rpcapi</literal> Module</title>
            <paragraph>Client side of the scheduler manager RPC API.</paragraph>
            <index entries=""></index>
            <desc desctype="class" domain="py" noindex="True" objtype="class">
                <desc_signature class="" first="False" fullname="SchedulerAPI" module="manila.scheduler.rpcapi"><desc_annotation xml:space="preserve">class </desc_annotation><desc_name xml:space="preserve">SchedulerAPI</desc_name></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">object</literal></paragraph>
                    <paragraph>Client side of the scheduler rpc API.</paragraph>
                    <paragraph>API version history:</paragraph>
                    <block_quote>
                        <paragraph>1.0 - Initial version.
                            1.1 - Add get_pools method
                            1.2 - Introduce Share Instances. Replace <literal>create_share()</literal> with
                            <literal>create_share_instance()</literal>
                            1.3 - Add create_consistency_group method (renamed in 1.7)
                            1.4 - Add migrate_share_to_host method
                            1.5 - Add create_share_replica
                            1.6 - Add manage_share
                            1.7 - Updated migrate_share_to_host method with new parameters
                            1.8 - Rename create_consistency_group -&gt; create_share_group method</paragraph>
                    </block_quote>
                    <index entries=""></index>
                    <desc desctype="attribute" domain="py" noindex="True" objtype="attribute">
                        <desc_signature class="SchedulerAPI" first="False" fullname="SchedulerAPI.RPC_API_VERSION" module="manila.scheduler.rpcapi"><desc_name xml:space="preserve">RPC_API_VERSION</desc_name><desc_annotation xml:space="preserve"> = '1.8'</desc_annotation></desc_signature>
                        <desc_content>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="SchedulerAPI" first="False" fullname="SchedulerAPI.create_share_group" module="manila.scheduler.rpcapi"><desc_name xml:space="preserve">create_share_group</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">share_group_id</desc_parameter><desc_parameter xml:space="preserve">request_spec=None</desc_parameter><desc_parameter xml:space="preserve">filter_properties=None</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Casts an rpc to the scheduler to create a share group.</paragraph>
                            <paragraph>Example of ‘request_spec’ argument value:</paragraph>
                            <literal_block xml:space="preserve">{

    'share_group_type_id': 'fake_share_group_type_id',
    'share_group_id': 'some_fake_uuid',
    'availability_zone_id': 'some_fake_az_uuid',
    'share_types': [models.ShareType],
    'resource_type': models.ShareGroup,

}</literal_block>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="SchedulerAPI" first="False" fullname="SchedulerAPI.create_share_instance" module="manila.scheduler.rpcapi"><desc_name xml:space="preserve">create_share_instance</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">request_spec=None</desc_parameter><desc_parameter xml:space="preserve">filter_properties=None</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="SchedulerAPI" first="False" fullname="SchedulerAPI.create_share_replica" module="manila.scheduler.rpcapi"><desc_name xml:space="preserve">create_share_replica</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">request_spec=None</desc_parameter><desc_parameter xml:space="preserve">filter_properties=None</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="SchedulerAPI" first="False" fullname="SchedulerAPI.get_pools" module="manila.scheduler.rpcapi"><desc_name xml:space="preserve">get_pools</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">filters=None</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="SchedulerAPI" first="False" fullname="SchedulerAPI.manage_share" module="manila.scheduler.rpcapi"><desc_name xml:space="preserve">manage_share</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">share_id</desc_parameter><desc_parameter xml:space="preserve">driver_options</desc_parameter><desc_parameter xml:space="preserve">request_spec=None</desc_parameter><desc_parameter xml:space="preserve">filter_properties=None</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="SchedulerAPI" first="False" fullname="SchedulerAPI.migrate_share_to_host" module="manila.scheduler.rpcapi"><desc_name xml:space="preserve">migrate_share_to_host</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">share_id</desc_parameter><desc_parameter xml:space="preserve">host</desc_parameter><desc_parameter xml:space="preserve">force_host_assisted_migration</desc_parameter><desc_parameter xml:space="preserve">preserve_metadata</desc_parameter><desc_parameter xml:space="preserve">writable</desc_parameter><desc_parameter xml:space="preserve">nondisruptive</desc_parameter><desc_parameter xml:space="preserve">preserve_snapshots</desc_parameter><desc_parameter xml:space="preserve">new_share_network_id</desc_parameter><desc_parameter xml:space="preserve">new_share_type_id</desc_parameter><desc_parameter xml:space="preserve">request_spec=None</desc_parameter><desc_parameter xml:space="preserve">filter_properties=None</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="SchedulerAPI" first="False" fullname="SchedulerAPI.update_service_capabilities" module="manila.scheduler.rpcapi"><desc_name xml:space="preserve">update_service_capabilities</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">service_name</desc_parameter><desc_parameter xml:space="preserve">host</desc_parameter><desc_parameter xml:space="preserve">capabilities</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
        </section>
        <section ids="the-manila-scheduler-scheduler-options-module" names="the\ manila.scheduler.scheduler_options\ module">
            <title>The <literal classes="xref py py-mod">manila.scheduler.scheduler_options</literal> Module</title>
            <paragraph>SchedulerOptions monitors a local .json file for changes and loads
                it if needed. This file is converted to a data structure and passed
                into the filtering and weighing functions which can use it for
                dynamic configuration.</paragraph>
            <index entries=""></index>
            <desc desctype="class" domain="py" noindex="True" objtype="class">
                <desc_signature class="" first="False" fullname="SchedulerOptions" module="manila.scheduler.scheduler_options"><desc_annotation xml:space="preserve">class </desc_annotation><desc_name xml:space="preserve">SchedulerOptions</desc_name></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">object</literal></paragraph>
                    <paragraph>Monitor and load local .json file for filtering and weighing.</paragraph>
                    <paragraph>SchedulerOptions monitors a local .json file for changes and loads it
                        if needed. This file is converted to a data structure and passed into
                        the filtering and weighing functions which can use it for dynamic
                        configuration.</paragraph>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="SchedulerOptions" first="False" fullname="SchedulerOptions.get_configuration" module="manila.scheduler.scheduler_options"><desc_name xml:space="preserve">get_configuration</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">filename=None</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Check the json file for changes and load it if needed.</paragraph>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
        </section>
        <section ids="the-manila-scheduler-drivers-filter-module" names="the\ manila.scheduler.drivers.filter\ module">
            <title>The <literal classes="xref py py-mod">manila.scheduler.drivers.filter</literal> Module</title>
            <paragraph>The FilterScheduler is for scheduling of share and share group creation.
                You can customize this scheduler by specifying your own share/share group
                filters and weighing functions.</paragraph>
            <index entries=""></index>
            <desc desctype="class" domain="py" noindex="True" objtype="class">
                <desc_signature class="" first="False" fullname="FilterScheduler" module="manila.scheduler.drivers.filter"><desc_annotation xml:space="preserve">class </desc_annotation><desc_name xml:space="preserve">FilterScheduler</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">*args</desc_parameter><desc_parameter xml:space="preserve">**kwargs</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">manila.scheduler.drivers.base.Scheduler</literal></paragraph>
                    <paragraph>Scheduler that can be used for filtering and weighing.</paragraph>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="FilterScheduler" first="False" fullname="FilterScheduler.get_pools" module="manila.scheduler.drivers.filter"><desc_name xml:space="preserve">get_pools</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">filters</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="FilterScheduler" first="False" fullname="FilterScheduler.host_passes_filters" module="manila.scheduler.drivers.filter"><desc_name xml:space="preserve">host_passes_filters</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">host</desc_parameter><desc_parameter xml:space="preserve">request_spec</desc_parameter><desc_parameter xml:space="preserve">filter_properties</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="FilterScheduler" first="False" fullname="FilterScheduler.populate_filter_properties_share" module="manila.scheduler.drivers.filter"><desc_name xml:space="preserve">populate_filter_properties_share</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">request_spec</desc_parameter><desc_parameter xml:space="preserve">filter_properties</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Stuff things into filter_properties.</paragraph>
                            <paragraph>Can be overridden in a subclass to add more data.</paragraph>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="FilterScheduler" first="False" fullname="FilterScheduler.schedule_create_replica" module="manila.scheduler.drivers.filter"><desc_name xml:space="preserve">schedule_create_replica</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">request_spec</desc_parameter><desc_parameter xml:space="preserve">filter_properties</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="FilterScheduler" first="False" fullname="FilterScheduler.schedule_create_share" module="manila.scheduler.drivers.filter"><desc_name xml:space="preserve">schedule_create_share</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">request_spec</desc_parameter><desc_parameter xml:space="preserve">filter_properties</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="FilterScheduler" first="False" fullname="FilterScheduler.schedule_create_share_group" module="manila.scheduler.drivers.filter"><desc_name xml:space="preserve">schedule_create_share_group</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">share_group_id</desc_parameter><desc_parameter xml:space="preserve">request_spec</desc_parameter><desc_parameter xml:space="preserve">filter_properties</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
        </section>
        <section ids="the-manila-scheduler-drivers-base-module" names="the\ manila.scheduler.drivers.base\ module">
            <title>The <literal classes="xref py py-mod">manila.scheduler.drivers.base</literal> Module</title>
            <paragraph>Scheduler base class that all Schedulers should inherit from</paragraph>
            <index entries=""></index>
            <desc desctype="class" domain="py" noindex="True" objtype="class">
                <desc_signature class="" first="False" fullname="Scheduler" module="manila.scheduler.drivers.base"><desc_annotation xml:space="preserve">class </desc_annotation><desc_name xml:space="preserve">Scheduler</desc_name></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">object</literal></paragraph>
                    <paragraph>The base class that all Scheduler classes should inherit from.</paragraph>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="Scheduler" first="False" fullname="Scheduler.get_host_list" module="manila.scheduler.drivers.base"><desc_name xml:space="preserve">get_host_list</desc_name><desc_parameterlist xml:space="preserve"></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Get a list of hosts from the HostManager.</paragraph>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="Scheduler" first="False" fullname="Scheduler.get_pools" module="manila.scheduler.drivers.base"><desc_name xml:space="preserve">get_pools</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">filters</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Must override schedule method for scheduler to work.</paragraph>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="Scheduler" first="False" fullname="Scheduler.get_service_capabilities" module="manila.scheduler.drivers.base"><desc_name xml:space="preserve">get_service_capabilities</desc_name><desc_parameterlist xml:space="preserve"></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Get the normalized set of capabilities for the services.</paragraph>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="Scheduler" first="False" fullname="Scheduler.host_passes_filters" module="manila.scheduler.drivers.base"><desc_name xml:space="preserve">host_passes_filters</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">host</desc_parameter><desc_parameter xml:space="preserve">request_spec</desc_parameter><desc_parameter xml:space="preserve">filter_properties</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Must override schedule method for migration to work.</paragraph>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="Scheduler" first="False" fullname="Scheduler.hosts_up" module="manila.scheduler.drivers.base"><desc_name xml:space="preserve">hosts_up</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">topic</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Return the list of hosts that have a running service for topic.</paragraph>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="Scheduler" first="False" fullname="Scheduler.schedule" module="manila.scheduler.drivers.base"><desc_name xml:space="preserve">schedule</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">topic</desc_parameter><desc_parameter xml:space="preserve">method</desc_parameter><desc_parameter xml:space="preserve">*_args</desc_parameter><desc_parameter xml:space="preserve">**_kwargs</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Must override schedule method for scheduler to work.</paragraph>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="Scheduler" first="False" fullname="Scheduler.schedule_create_replica" module="manila.scheduler.drivers.base"><desc_name xml:space="preserve">schedule_create_replica</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">request_spec</desc_parameter><desc_parameter xml:space="preserve">filter_properties</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Must override schedule method for create replica to work.</paragraph>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="Scheduler" first="False" fullname="Scheduler.schedule_create_share" module="manila.scheduler.drivers.base"><desc_name xml:space="preserve">schedule_create_share</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">request_spec</desc_parameter><desc_parameter xml:space="preserve">filter_properties</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Must override schedule method for scheduler to work.</paragraph>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="Scheduler" first="False" fullname="Scheduler.schedule_create_share_group" module="manila.scheduler.drivers.base"><desc_name xml:space="preserve">schedule_create_share_group</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">share_group_id</desc_parameter><desc_parameter xml:space="preserve">request_spec</desc_parameter><desc_parameter xml:space="preserve">filter_properties</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Must override schedule method for scheduler to work.</paragraph>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="Scheduler" first="False" fullname="Scheduler.update_service_capabilities" module="manila.scheduler.drivers.base"><desc_name xml:space="preserve">update_service_capabilities</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">service_name</desc_parameter><desc_parameter xml:space="preserve">host</desc_parameter><desc_parameter xml:space="preserve">capabilities</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Process a capability update from a service node.</paragraph>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
            <index entries=""></index>
            <desc desctype="function" domain="py" noindex="True" objtype="function">
                <desc_signature class="" first="False" fullname="share_group_update_db" module="manila.scheduler.drivers.base"><desc_name xml:space="preserve">share_group_update_db</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">share_group_id</desc_parameter><desc_parameter xml:space="preserve">host</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Set the host and set the updated_at field of a share group.</paragraph>
                    <field_list>
                        <field>
                            <field_name>Returns</field_name>
                            <field_body>
                                <paragraph>A share group with the updated fields set properly.</paragraph>
                            </field_body>
                        </field>
                    </field_list>
                </desc_content>
            </desc>
            <index entries=""></index>
            <desc desctype="function" domain="py" noindex="True" objtype="function">
                <desc_signature class="" first="False" fullname="share_replica_update_db" module="manila.scheduler.drivers.base"><desc_name xml:space="preserve">share_replica_update_db</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">share_replica_id</desc_parameter><desc_parameter xml:space="preserve">host</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Set the host and the scheduled_at field of a share replica.</paragraph>
                    <field_list>
                        <field>
                            <field_name>Returns</field_name>
                            <field_body>
                                <paragraph>A Share Replica with the updated fields set.</paragraph>
                            </field_body>
                        </field>
                    </field_list>
                </desc_content>
            </desc>
            <index entries=""></index>
            <desc desctype="function" domain="py" noindex="True" objtype="function">
                <desc_signature class="" first="False" fullname="share_update_db" module="manila.scheduler.drivers.base"><desc_name xml:space="preserve">share_update_db</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">share_id</desc_parameter><desc_parameter xml:space="preserve">host</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Set the host and set the scheduled_at field of a share.</paragraph>
                    <field_list>
                        <field>
                            <field_name>Returns</field_name>
                            <field_body>
                                <paragraph>A Share with the updated fields set properly.</paragraph>
                            </field_body>
                        </field>
                    </field_list>
                </desc_content>
            </desc>
        </section>
        <section ids="the-manila-scheduler-drivers-chance-module" names="the\ manila.scheduler.drivers.chance\ module">
            <title>The <literal classes="xref py py-mod">manila.scheduler.drivers.chance</literal> Module</title>
            <paragraph>Chance (Random) Scheduler implementation</paragraph>
            <index entries=""></index>
            <desc desctype="class" domain="py" noindex="True" objtype="class">
                <desc_signature class="" first="False" fullname="ChanceScheduler" module="manila.scheduler.drivers.chance"><desc_annotation xml:space="preserve">class </desc_annotation><desc_name xml:space="preserve">ChanceScheduler</desc_name></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">manila.scheduler.drivers.base.Scheduler</literal></paragraph>
                    <paragraph>Implements Scheduler as a random node selector.</paragraph>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="ChanceScheduler" first="False" fullname="ChanceScheduler.schedule_create_share" module="manila.scheduler.drivers.chance"><desc_name xml:space="preserve">schedule_create_share</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">request_spec</desc_parameter><desc_parameter xml:space="preserve">filter_properties</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Picks a host that is up at random.</paragraph>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
        </section>
        <section ids="the-manila-scheduler-drivers-simple-module" names="the\ manila.scheduler.drivers.simple\ module">
            <title>The <literal classes="xref py py-mod">manila.scheduler.drivers.simple</literal> Module</title>
            <paragraph>Simple Scheduler</paragraph>
            <index entries=""></index>
            <desc desctype="class" domain="py" noindex="True" objtype="class">
                <desc_signature class="" first="False" fullname="SimpleScheduler" module="manila.scheduler.drivers.simple"><desc_annotation xml:space="preserve">class </desc_annotation><desc_name xml:space="preserve">SimpleScheduler</desc_name></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">manila.scheduler.drivers.chance.ChanceScheduler</literal></paragraph>
                    <paragraph>Implements Naive Scheduler that tries to find least loaded host.</paragraph>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="SimpleScheduler" first="False" fullname="SimpleScheduler.schedule_create_share" module="manila.scheduler.drivers.simple"><desc_name xml:space="preserve">schedule_create_share</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">request_spec</desc_parameter><desc_parameter xml:space="preserve">filter_properties</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Picks a host that is up and has the fewest shares.</paragraph>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
        </section>
    </section>
    <section ids="scheduler-filters" names="scheduler\ filters">
        <title>Scheduler Filters</title>
        <section ids="the-manila-scheduler-filters-availability-zone-filter" names="the\ manila.scheduler.filters.availability_zone\ filter">
            <title>The <literal classes="xref py py-mod">manila.scheduler.filters.availability_zone</literal> Filter</title>
            <index entries=""></index>
            <desc desctype="class" domain="py" noindex="True" objtype="class">
                <desc_signature class="" first="False" fullname="AvailabilityZoneFilter" module="manila.scheduler.filters.availability_zone"><desc_annotation xml:space="preserve">class </desc_annotation><desc_name xml:space="preserve">AvailabilityZoneFilter</desc_name></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">manila.scheduler.filters.base_host.BaseHostFilter</literal></paragraph>
                    <paragraph>Filters Hosts by availability zone.</paragraph>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="AvailabilityZoneFilter" first="False" fullname="AvailabilityZoneFilter.host_passes" module="manila.scheduler.filters.availability_zone"><desc_name xml:space="preserve">host_passes</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">host_state</desc_parameter><desc_parameter xml:space="preserve">filter_properties</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="attribute" domain="py" noindex="True" objtype="attribute">
                        <desc_signature class="AvailabilityZoneFilter" first="False" fullname="AvailabilityZoneFilter.run_filter_once_per_request" module="manila.scheduler.filters.availability_zone"><desc_name xml:space="preserve">run_filter_once_per_request</desc_name><desc_annotation xml:space="preserve"> = True</desc_annotation></desc_signature>
                        <desc_content>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
        </section>
        <section ids="the-manila-scheduler-filters-base-filter" names="the\ manila.scheduler.filters.base\ filter">
            <title>The <literal classes="xref py py-mod">manila.scheduler.filters.base</literal> Filter</title>
            <paragraph>Filter support</paragraph>
            <index entries=""></index>
            <desc desctype="class" domain="py" noindex="True" objtype="class">
                <desc_signature class="" first="False" fullname="BaseFilter" module="manila.scheduler.filters.base"><desc_annotation xml:space="preserve">class </desc_annotation><desc_name xml:space="preserve">BaseFilter</desc_name></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">object</literal></paragraph>
                    <paragraph>Base class for all filter classes.</paragraph>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="BaseFilter" first="False" fullname="BaseFilter.filter_all" module="manila.scheduler.filters.base"><desc_name xml:space="preserve">filter_all</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">filter_obj_list</desc_parameter><desc_parameter xml:space="preserve">filter_properties</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Yield objects that pass the filter.</paragraph>
                            <paragraph>Can be overridden in a subclass, if you need to base filtering
                                decisions on all objects.  Otherwise, one can just override
                                _filter_one() to filter a single object.</paragraph>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="BaseFilter" first="False" fullname="BaseFilter.run_filter_for_index" module="manila.scheduler.filters.base"><desc_name xml:space="preserve">run_filter_for_index</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">index</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Check if filter needs to be run for the “index-th” instance.</paragraph>
                            <paragraph>Return True if the filter needs to be run for the “index-th”
                                instance in a request.  Only need to override this if a filter
                                needs anything other than “first only” or “all” behaviour.</paragraph>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="attribute" domain="py" noindex="True" objtype="attribute">
                        <desc_signature class="BaseFilter" first="False" fullname="BaseFilter.run_filter_once_per_request" module="manila.scheduler.filters.base"><desc_name xml:space="preserve">run_filter_once_per_request</desc_name><desc_annotation xml:space="preserve"> = False</desc_annotation></desc_signature>
                        <desc_content>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
            <index entries=""></index>
            <desc desctype="class" domain="py" noindex="True" objtype="class">
                <desc_signature class="" first="False" fullname="BaseFilterHandler" module="manila.scheduler.filters.base"><desc_annotation xml:space="preserve">class </desc_annotation><desc_name xml:space="preserve">BaseFilterHandler</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">modifier_class_type</desc_parameter><desc_parameter xml:space="preserve">modifier_namespace</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">manila.scheduler.base_handler.BaseHandler</literal></paragraph>
                    <paragraph>Base class to handle loading filter classes.</paragraph>
                    <paragraph>This class should be subclassed where one needs to use filters.</paragraph>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="BaseFilterHandler" first="False" fullname="BaseFilterHandler.get_filtered_objects" module="manila.scheduler.filters.base"><desc_name xml:space="preserve">get_filtered_objects</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">filter_classes</desc_parameter><desc_parameter xml:space="preserve">objs</desc_parameter><desc_parameter xml:space="preserve">filter_properties</desc_parameter><desc_parameter xml:space="preserve">index=0</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Get objects after filter</paragraph>
                            <field_list>
                                <field>
                                    <field_name>Parameters</field_name>
                                    <field_body>
                                        <bullet_list>
                                            <list_item>
                                                <paragraph><literal_strong refspecific="True">filter_classes</literal_strong> – filters that will be used to filter the
                                                    objects</paragraph>
                                            </list_item>
                                            <list_item>
                                                <paragraph><literal_strong refspecific="True">objs</literal_strong> – objects that will be filtered</paragraph>
                                            </list_item>
                                            <list_item>
                                                <paragraph><literal_strong refspecific="True">filter_properties</literal_strong> – client filter properties</paragraph>
                                            </list_item>
                                            <list_item>
                                                <paragraph><literal_strong refspecific="True">index</literal_strong> – This value needs to be increased in the caller
                                                    function of get_filtered_objects when handling
                                                    each resource.</paragraph>
                                            </list_item>
                                        </bullet_list>
                                    </field_body>
                                </field>
                            </field_list>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
        </section>
        <section ids="the-manila-scheduler-filters-base-host-filter" names="the\ manila.scheduler.filters.base_host\ filter">
            <title>The <literal classes="xref py py-mod">manila.scheduler.filters.base_host</literal> Filter</title>
            <paragraph>Scheduler host filters</paragraph>
            <index entries=""></index>
            <desc desctype="class" domain="py" noindex="True" objtype="class">
                <desc_signature class="" first="False" fullname="BaseHostFilter" module="manila.scheduler.filters.base_host"><desc_annotation xml:space="preserve">class </desc_annotation><desc_name xml:space="preserve">BaseHostFilter</desc_name></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">manila.scheduler.filters.base.BaseFilter</literal></paragraph>
                    <paragraph>Base class for host filters.</paragraph>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="BaseHostFilter" first="False" fullname="BaseHostFilter.host_passes" module="manila.scheduler.filters.base_host"><desc_name xml:space="preserve">host_passes</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">host_state</desc_parameter><desc_parameter xml:space="preserve">filter_properties</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Return True if the HostState passes the filter, otherwise False.</paragraph>
                            <paragraph>Override this in a subclass.</paragraph>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
            <index entries=""></index>
            <desc desctype="class" domain="py" noindex="True" objtype="class">
                <desc_signature class="" first="False" fullname="HostFilterHandler" module="manila.scheduler.filters.base_host"><desc_annotation xml:space="preserve">class </desc_annotation><desc_name xml:space="preserve">HostFilterHandler</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">namespace</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">manila.scheduler.filters.base.BaseFilterHandler</literal></paragraph>
                </desc_content>
            </desc>
        </section>
        <section ids="the-manila-scheduler-filters-capabilities-filter" names="the\ manila.scheduler.filters.capabilities\ filter">
            <title>The <literal classes="xref py py-mod">manila.scheduler.filters.capabilities</literal> Filter</title>
            <index entries=""></index>
            <desc desctype="class" domain="py" noindex="True" objtype="class">
                <desc_signature class="" first="False" fullname="CapabilitiesFilter" module="manila.scheduler.filters.capabilities"><desc_annotation xml:space="preserve">class </desc_annotation><desc_name xml:space="preserve">CapabilitiesFilter</desc_name></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">manila.scheduler.filters.base_host.BaseHostFilter</literal></paragraph>
                    <paragraph>HostFilter to work with resource (instance &amp; volume) type records.</paragraph>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="CapabilitiesFilter" first="False" fullname="CapabilitiesFilter.host_passes" module="manila.scheduler.filters.capabilities"><desc_name xml:space="preserve">host_passes</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">host_state</desc_parameter><desc_parameter xml:space="preserve">filter_properties</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Return a list of hosts that can create resource_type.</paragraph>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
        </section>
        <section ids="the-manila-scheduler-filters-capacity-filter" names="the\ manila.scheduler.filters.capacity\ filter">
            <title>The <literal classes="xref py py-mod">manila.scheduler.filters.capacity</literal> Filter</title>
            <index entries=""></index>
            <desc desctype="class" domain="py" noindex="True" objtype="class">
                <desc_signature class="" first="False" fullname="CapacityFilter" module="manila.scheduler.filters.capacity"><desc_annotation xml:space="preserve">class </desc_annotation><desc_name xml:space="preserve">CapacityFilter</desc_name></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">manila.scheduler.filters.base_host.BaseHostFilter</literal></paragraph>
                    <paragraph>CapacityFilter filters based on share host’s capacity utilization.</paragraph>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="CapacityFilter" first="False" fullname="CapacityFilter.host_passes" module="manila.scheduler.filters.capacity"><desc_name xml:space="preserve">host_passes</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">host_state</desc_parameter><desc_parameter xml:space="preserve">filter_properties</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Return True if host has sufficient capacity.</paragraph>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
        </section>
        <section ids="the-manila-scheduler-filters-extra-specs-ops-filter" names="the\ manila.scheduler.filters.extra_specs_ops\ filter">
            <title>The <literal classes="xref py py-mod">manila.scheduler.filters.extra_specs_ops</literal> Filter</title>
            <index entries=""></index>
            <desc desctype="function" domain="py" noindex="True" objtype="function">
                <desc_signature class="" first="False" fullname="match" module="manila.scheduler.filters.extra_specs_ops"><desc_name xml:space="preserve">match</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">value</desc_parameter><desc_parameter xml:space="preserve">req</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                </desc_content>
            </desc>
        </section>
        <section ids="the-manila-scheduler-filters-ignore-attempted-hosts-filter" names="the\ manila.scheduler.filters.ignore_attempted_hosts\ filter">
            <title>The <literal classes="xref py py-mod">manila.scheduler.filters.ignore_attempted_hosts</literal> Filter</title>
            <index entries=""></index>
            <desc desctype="class" domain="py" noindex="True" objtype="class">
                <desc_signature class="" first="False" fullname="IgnoreAttemptedHostsFilter" module="manila.scheduler.filters.ignore_attempted_hosts"><desc_annotation xml:space="preserve">class </desc_annotation><desc_name xml:space="preserve">IgnoreAttemptedHostsFilter</desc_name></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">manila.scheduler.filters.base_host.BaseHostFilter</literal></paragraph>
                    <paragraph>Filter out previously attempted hosts</paragraph>
                    <paragraph>A host passes this filter if it has not already been attempted for
                        scheduling. The scheduler needs to add previously attempted hosts
                        to the ‘retry’ key of filter_properties in order for this to work
                        correctly. For example:</paragraph>
                    <literal_block xml:space="preserve">{
 'retry': {
           'hosts': ['host1', 'host2'],
           'num_attempts': 3,
          }
}</literal_block>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="IgnoreAttemptedHostsFilter" first="False" fullname="IgnoreAttemptedHostsFilter.host_passes" module="manila.scheduler.filters.ignore_attempted_hosts"><desc_name xml:space="preserve">host_passes</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">host_state</desc_parameter><desc_parameter xml:space="preserve">filter_properties</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Skip nodes that have already been attempted.</paragraph>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
        </section>
        <section ids="the-manila-scheduler-filters-json-filter" names="the\ manila.scheduler.filters.json\ filter">
            <title>The <literal classes="xref py py-mod">manila.scheduler.filters.json</literal> Filter</title>
            <index entries=""></index>
            <desc desctype="class" domain="py" noindex="True" objtype="class">
                <desc_signature class="" first="False" fullname="JsonFilter" module="manila.scheduler.filters.json"><desc_annotation xml:space="preserve">class </desc_annotation><desc_name xml:space="preserve">JsonFilter</desc_name></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">manila.scheduler.filters.base_host.BaseHostFilter</literal></paragraph>
                    <paragraph>Host Filter to allow simple JSON-based grammar for selecting hosts.</paragraph>
                    <index entries=""></index>
                    <desc desctype="attribute" domain="py" noindex="True" objtype="attribute">
                        <desc_signature class="JsonFilter" first="False" fullname="JsonFilter.commands" module="manila.scheduler.filters.json"><desc_name xml:space="preserve">commands</desc_name><desc_annotation xml:space="preserve"> = {'=': &lt;function JsonFilter._equals&gt;, '&lt;': &lt;function JsonFilter._less_than&gt;, '&gt;': &lt;function JsonFilter._greater_than&gt;, 'in': &lt;function JsonFilter._in&gt;, '&lt;=': &lt;function JsonFilter._less_than_equal&gt;, '&gt;=': &lt;function JsonFilter._greater_than_equal&gt;, 'not': &lt;function JsonFilter._not&gt;, 'or': &lt;function JsonFilter._or&gt;, 'and': &lt;function JsonFilter._and&gt;}</desc_annotation></desc_signature>
                        <desc_content>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="JsonFilter" first="False" fullname="JsonFilter.host_passes" module="manila.scheduler.filters.json"><desc_name xml:space="preserve">host_passes</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">host_state</desc_parameter><desc_parameter xml:space="preserve">filter_properties</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Filters hosts.</paragraph>
                            <paragraph>Return a list of hosts that can fulfill the requirements
                                specified in the query.</paragraph>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
        </section>
        <section ids="the-manila-scheduler-filters-retry-filter" names="the\ manila.scheduler.filters.retry\ filter">
            <title>The <literal classes="xref py py-mod">manila.scheduler.filters.retry</literal> Filter</title>
            <index entries=""></index>
            <desc desctype="class" domain="py" noindex="True" objtype="class">
                <desc_signature class="" first="False" fullname="RetryFilter" module="manila.scheduler.filters.retry"><desc_annotation xml:space="preserve">class </desc_annotation><desc_name xml:space="preserve">RetryFilter</desc_name></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">manila.scheduler.filters.base_host.BaseHostFilter</literal></paragraph>
                    <paragraph>Filter out already tried nodes for scheduling purposes.</paragraph>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="RetryFilter" first="False" fullname="RetryFilter.host_passes" module="manila.scheduler.filters.retry"><desc_name xml:space="preserve">host_passes</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">host_state</desc_parameter><desc_parameter xml:space="preserve">filter_properties</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Skip nodes that have already been attempted.</paragraph>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
        </section>
        <section ids="the-manila-scheduler-filters-share-replication-filter" names="the\ manila.scheduler.filters.share_replication\ filter">
            <title>The <literal classes="xref py py-mod">manila.scheduler.filters.share_replication</literal> Filter</title>
            <index entries=""></index>
            <desc desctype="class" domain="py" noindex="True" objtype="class">
                <desc_signature class="" first="False" fullname="ShareReplicationFilter" module="manila.scheduler.filters.share_replication"><desc_annotation xml:space="preserve">class </desc_annotation><desc_name xml:space="preserve">ShareReplicationFilter</desc_name></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">manila.scheduler.filters.base_host.BaseHostFilter</literal></paragraph>
                    <paragraph>ShareReplicationFilter filters hosts based on replication support.</paragraph>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="ShareReplicationFilter" first="False" fullname="ShareReplicationFilter.host_passes" module="manila.scheduler.filters.share_replication"><desc_name xml:space="preserve">host_passes</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">host_state</desc_parameter><desc_parameter xml:space="preserve">filter_properties</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Return True if ‘active’ replica’s host can replicate with host.</paragraph>
                            <paragraph>Design of this filter:</paragraph>
                            <block_quote>
                                <bullet_list bullet="-">
                                    <list_item>
                                        <paragraph>Share replication is symmetric. All backends that can
                                            replicate between each other must share the same
                                            ‘replication_domain’.</paragraph>
                                    </list_item>
                                    <list_item>
                                        <paragraph>For scheduling a share that can be replicated in the future,
                                            this filter checks for ‘replication_domain’ capability.</paragraph>
                                    </list_item>
                                    <list_item>
                                        <paragraph>For scheduling a replica, it checks for the
                                            ‘replication_domain’ compatibility.</paragraph>
                                    </list_item>
                                </bullet_list>
                            </block_quote>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
        </section>
    </section>
    <section ids="scheduler-weighers" names="scheduler\ weighers">
        <title>Scheduler Weighers</title>
        <section ids="the-manila-scheduler-weighers-base-weigher" names="the\ manila.scheduler.weighers.base\ weigher">
            <title>The <literal classes="xref py py-mod">manila.scheduler.weighers.base</literal> Weigher</title>
            <paragraph>Pluggable Weighing support</paragraph>
            <index entries=""></index>
            <desc desctype="class" domain="py" noindex="True" objtype="class">
                <desc_signature class="" first="False" fullname="BaseWeigher" module="manila.scheduler.weighers.base"><desc_annotation xml:space="preserve">class </desc_annotation><desc_name xml:space="preserve">BaseWeigher</desc_name></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">object</literal></paragraph>
                    <paragraph>Base class for pluggable weighers.</paragraph>
                    <paragraph>The attributes maxval and minval can be specified to set up the maximum
                        and minimum values for the weighed objects. These values will then be
                        taken into account in the normalization step, instead of taking the values
                        from the calculated weighers.</paragraph>
                    <index entries=""></index>
                    <desc desctype="attribute" domain="py" noindex="True" objtype="attribute">
                        <desc_signature class="BaseWeigher" first="False" fullname="BaseWeigher.maxval" module="manila.scheduler.weighers.base"><desc_name xml:space="preserve">maxval</desc_name><desc_annotation xml:space="preserve"> = None</desc_annotation></desc_signature>
                        <desc_content>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="attribute" domain="py" noindex="True" objtype="attribute">
                        <desc_signature class="BaseWeigher" first="False" fullname="BaseWeigher.minval" module="manila.scheduler.weighers.base"><desc_name xml:space="preserve">minval</desc_name><desc_annotation xml:space="preserve"> = None</desc_annotation></desc_signature>
                        <desc_content>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="BaseWeigher" first="False" fullname="BaseWeigher.weigh_objects" module="manila.scheduler.weighers.base"><desc_name xml:space="preserve">weigh_objects</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">weighed_obj_list</desc_parameter><desc_parameter xml:space="preserve">weight_properties</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Weigh multiple objects.</paragraph>
                            <paragraph>Override in a subclass if you need access to all objects in order
                                to calculate weighers. Do not modify the weight of an object here,
                                just return a list of weighers.</paragraph>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="BaseWeigher" first="False" fullname="BaseWeigher.weight_multiplier" module="manila.scheduler.weighers.base"><desc_name xml:space="preserve">weight_multiplier</desc_name><desc_parameterlist xml:space="preserve"></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>How weighted this weigher should be.</paragraph>
                            <paragraph>Override this method in a subclass, so that the returned value is
                                read from a configuration option to permit operators specify a
                                multiplier for the weigher.</paragraph>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
            <index entries=""></index>
            <desc desctype="class" domain="py" noindex="True" objtype="class">
                <desc_signature class="" first="False" fullname="BaseWeightHandler" module="manila.scheduler.weighers.base"><desc_annotation xml:space="preserve">class </desc_annotation><desc_name xml:space="preserve">BaseWeightHandler</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">modifier_class_type</desc_parameter><desc_parameter xml:space="preserve">modifier_namespace</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">manila.scheduler.base_handler.BaseHandler</literal></paragraph>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="BaseWeightHandler" first="False" fullname="BaseWeightHandler.get_weighed_objects" module="manila.scheduler.weighers.base"><desc_name xml:space="preserve">get_weighed_objects</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">weigher_classes</desc_parameter><desc_parameter xml:space="preserve">obj_list</desc_parameter><desc_parameter xml:space="preserve">weighing_properties</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Return a sorted (descending), normalized list of WeighedObjects.</paragraph>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="attribute" domain="py" noindex="True" objtype="attribute">
                        <desc_signature class="BaseWeightHandler" first="False" fullname="BaseWeightHandler.object_class" module="manila.scheduler.weighers.base"><desc_name xml:space="preserve">object_class</desc_name></desc_signature>
                        <desc_content>
                            <paragraph>alias of <literal classes="xref py py-class">WeighedObject</literal></paragraph>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
            <index entries=""></index>
            <desc desctype="class" domain="py" noindex="True" objtype="class">
                <desc_signature class="" first="False" fullname="WeighedObject" module="manila.scheduler.weighers.base"><desc_annotation xml:space="preserve">class </desc_annotation><desc_name xml:space="preserve">WeighedObject</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">obj</desc_parameter><desc_parameter xml:space="preserve">weight</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">object</literal></paragraph>
                    <paragraph>Object with weight information.</paragraph>
                </desc_content>
            </desc>
            <index entries=""></index>
            <desc desctype="function" domain="py" noindex="True" objtype="function">
                <desc_signature class="" first="False" fullname="normalize" module="manila.scheduler.weighers.base"><desc_name xml:space="preserve">normalize</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">weight_list</desc_parameter><desc_parameter xml:space="preserve">minval=None</desc_parameter><desc_parameter xml:space="preserve">maxval=None</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Normalize the values in a list between 0 and 1.0.</paragraph>
                    <paragraph>The normalization is made regarding the lower and upper values present in
                        weight_list. If the minval and/or maxval parameters are set, these values
                        will be used instead of the minimum and maximum from the list.</paragraph>
                    <paragraph>If all the values are equal, they are normalized to 0.</paragraph>
                </desc_content>
            </desc>
        </section>
        <section ids="the-manila-scheduler-weighers-base-host-weigher" names="the\ manila.scheduler.weighers.base_host\ weigher">
            <title>The <literal classes="xref py py-mod">manila.scheduler.weighers.base_host</literal> Weigher</title>
            <paragraph>Scheduler host weighers</paragraph>
            <index entries=""></index>
            <desc desctype="class" domain="py" noindex="True" objtype="class">
                <desc_signature class="" first="False" fullname="BaseHostWeigher" module="manila.scheduler.weighers.base_host"><desc_annotation xml:space="preserve">class </desc_annotation><desc_name xml:space="preserve">BaseHostWeigher</desc_name></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">manila.scheduler.weighers.base.BaseWeigher</literal></paragraph>
                    <paragraph>Base class for host weighers.</paragraph>
                </desc_content>
            </desc>
            <index entries=""></index>
            <desc desctype="class" domain="py" noindex="True" objtype="class">
                <desc_signature class="" first="False" fullname="HostWeightHandler" module="manila.scheduler.weighers.base_host"><desc_annotation xml:space="preserve">class </desc_annotation><desc_name xml:space="preserve">HostWeightHandler</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">namespace</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">manila.scheduler.weighers.base.BaseWeightHandler</literal></paragraph>
                    <index entries=""></index>
                    <desc desctype="attribute" domain="py" noindex="True" objtype="attribute">
                        <desc_signature class="HostWeightHandler" first="False" fullname="HostWeightHandler.object_class" module="manila.scheduler.weighers.base_host"><desc_name xml:space="preserve">object_class</desc_name></desc_signature>
                        <desc_content>
                            <paragraph>alias of <literal classes="xref py py-class">WeighedHost</literal></paragraph>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
            <index entries=""></index>
            <desc desctype="class" domain="py" noindex="True" objtype="class">
                <desc_signature class="" first="False" fullname="WeighedHost" module="manila.scheduler.weighers.base_host"><desc_annotation xml:space="preserve">class </desc_annotation><desc_name xml:space="preserve">WeighedHost</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">obj</desc_parameter><desc_parameter xml:space="preserve">weight</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">manila.scheduler.weighers.base.WeighedObject</literal></paragraph>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="WeighedHost" first="False" fullname="WeighedHost.to_dict" module="manila.scheduler.weighers.base_host"><desc_name xml:space="preserve">to_dict</desc_name><desc_parameterlist xml:space="preserve"></desc_parameterlist></desc_signature>
                        <desc_content>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
        </section>
        <section ids="the-manila-scheduler-weighers-capacity-weigher" names="the\ manila.scheduler.weighers.capacity\ weigher">
            <title>The <literal classes="xref py py-mod">manila.scheduler.weighers.capacity</literal> Weigher</title>
            <paragraph>Capacity Weigher.  Weigh hosts by their virtual or actual free capacity.</paragraph>
            <paragraph>For thin provisioning, weigh hosts by their virtual free capacity calculated
                by the total capacity multiplied by the max over subscription ratio and
                subtracting the provisioned capacity; Otherwise, weigh hosts by their actual
                free capacity, taking into account the reserved space.</paragraph>
            <paragraph>The default is to spread shares across all hosts evenly.  If you prefer
                stacking, you can set the ‘capacity_weight_multiplier’ option to a negative
                number and the weighing has the opposite effect of the default.</paragraph>
            <index entries=""></index>
            <desc desctype="class" domain="py" noindex="True" objtype="class">
                <desc_signature class="" first="False" fullname="CapacityWeigher" module="manila.scheduler.weighers.capacity"><desc_annotation xml:space="preserve">class </desc_annotation><desc_name xml:space="preserve">CapacityWeigher</desc_name></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">manila.scheduler.weighers.base_host.BaseHostWeigher</literal></paragraph>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="CapacityWeigher" first="False" fullname="CapacityWeigher.weigh_objects" module="manila.scheduler.weighers.capacity"><desc_name xml:space="preserve">weigh_objects</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">weighed_obj_list</desc_parameter><desc_parameter xml:space="preserve">weight_properties</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                        </desc_content>
                    </desc>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="CapacityWeigher" first="False" fullname="CapacityWeigher.weight_multiplier" module="manila.scheduler.weighers.capacity"><desc_name xml:space="preserve">weight_multiplier</desc_name><desc_parameterlist xml:space="preserve"></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Override the weight multiplier.</paragraph>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
        </section>
        <section ids="the-manila-scheduler-weighers-pool-weigher" names="the\ manila.scheduler.weighers.pool\ weigher">
            <title>The <literal classes="xref py py-mod">manila.scheduler.weighers.pool</literal> Weigher</title>
            <index entries=""></index>
            <desc desctype="class" domain="py" noindex="True" objtype="class">
                <desc_signature class="" first="False" fullname="PoolWeigher" module="manila.scheduler.weighers.pool"><desc_annotation xml:space="preserve">class </desc_annotation><desc_name xml:space="preserve">PoolWeigher</desc_name></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">manila.scheduler.weighers.base_host.BaseHostWeigher</literal></paragraph>
                    <index entries=""></index>
                    <desc desctype="method" domain="py" noindex="True" objtype="method">
                        <desc_signature class="PoolWeigher" first="False" fullname="PoolWeigher.weight_multiplier" module="manila.scheduler.weighers.pool"><desc_name xml:space="preserve">weight_multiplier</desc_name><desc_parameterlist xml:space="preserve"></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Override the weight multiplier.</paragraph>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
        </section>
    </section>
</document>

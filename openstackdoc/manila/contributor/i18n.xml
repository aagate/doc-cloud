<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/manila/doc/source/contributor/i18n.rst">
    <section ids="internationalization" names="internationalization">
        <title>Internationalization</title>
        <paragraph>Manila uses <reference name="gettext" refuri="http://docs.python.org/library/gettext.html">gettext</reference><target ids="gettext" names="gettext" refuri="http://docs.python.org/library/gettext.html"></target> so that
            user-facing strings appear in the appropriate language in different locales.</paragraph>
        <paragraph>Beginning with the Pike series, OpenStack no longer supports log translation.
            It is not useful to add translation instructions to new code, and the
            instructions can be removed from old code.</paragraph>
        <paragraph>Other user-facing strings, e.g. in exception messages, should be translated.</paragraph>
        <paragraph>To use gettext, make sure that the strings passed to the logger are wrapped
            in a <literal>_()</literal> function call. For example:</paragraph>
        <literal_block xml:space="preserve">msg = _("Share group %s not found.") % share_group_id
raise exc.HTTPNotFound(explanation=msg)</literal_block>
        <paragraph>Do not use <literal>locals()</literal> for formatting messages because:
            1. It is not as clear as using explicit dicts.
            2. It could produce hidden errors during refactoring.
            3. Changing the name of a variable causes a change in the message.
            4. It creates a lot of otherwise unused variables.</paragraph>
        <paragraph>If you do not follow the project conventions, your code may cause the
            LocalizationTestCase.test_multiple_positional_format_placeholders test to fail
            in manila/tests/test_localization.py.</paragraph>
        <paragraph>The <literal>_()</literal> function is brought into the global scope by doing:</paragraph>
        <literal_block xml:space="preserve">from manila.openstack.common import gettextutils
gettextutils.install("manila")</literal_block>
        <paragraph>These lines are needed in any toplevel script before any manila modules are
            imported. If this code is missing, it may result in an error that looks like:</paragraph>
        <literal_block xml:space="preserve">NameError: name '_' is not defined</literal_block>
    </section>
</document>

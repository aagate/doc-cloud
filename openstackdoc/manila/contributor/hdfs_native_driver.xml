<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/manila/doc/source/contributor/hdfs_native_driver.rst">
    <comment xml:space="preserve">Copyright 2015 Intel, Corp.
All Rights Reserved.

Licensed under the Apache License, Version 2.0 (the "License"); you may
not use this file except in compliance with the License. You may obtain
a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations
under the License.</comment>
    <section ids="hdfs-native-driver" names="hdfs\ native\ driver">
        <title>HDFS native driver</title>
        <paragraph>HDFS native driver is a plugin based on the OpenStack manila service, which uses
            Hadoop distributed file system (HDFS), a distributed file system designed to hold
            very large amounts of data, and provide high-throughput access to the data.</paragraph>
        <paragraph>A manila share in this driver is a subdirectory in hdfs root directory. Instances
            talk directly to the HDFS storage backend with ‘hdfs’ protocol. And access to each
            share is allowed by user based access type, which is aligned with HDFS ACLs to
            support access control of multiple users and groups.</paragraph>
        <section ids="network-configuration" names="network\ configuration">
            <title>Network configuration</title>
            <paragraph>The storage backend and manila hosts should be in a flat network, otherwise, the L3
                connectivity between them should exist.</paragraph>
        </section>
        <section ids="supported-shared-filesystems" names="supported\ shared\ filesystems">
            <title>Supported shared filesystems</title>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>HDFS (authentication by user)</paragraph>
                </list_item>
            </bullet_list>
        </section>
        <section ids="supported-operations" names="supported\ operations">
            <title>Supported Operations</title>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>Create HDFS share</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Delete HDFS share</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Allow HDFS Share access
                        * Only support user access type
                        * Support level of access (ro/rw)</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Deny HDFS Share access</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Create snapshot</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Delete snapshot</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Create share from snapshot</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Extend share</paragraph>
                </list_item>
            </bullet_list>
        </section>
        <section ids="requirements" names="requirements">
            <title>Requirements</title>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>Install HDFS package, version &gt;= 2.4.x, on the storage backend</paragraph>
                </list_item>
                <list_item>
                    <paragraph>To enable access control, the HDFS file system must have ACLs enabled</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Establish network connection between the manila host and storage backend</paragraph>
                </list_item>
            </bullet_list>
        </section>
        <section ids="manila-driver-configuration" names="manila\ driver\ configuration">
            <title>Manila driver configuration</title>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph><title_reference>share_driver</title_reference> = manila.share.drivers.hdfs.hdfs_native.HDFSNativeShareDriver</paragraph>
                </list_item>
                <list_item>
                    <definition_list>
                        <definition_list_item>
                            <term><title_reference>hdfs_namenode_ip</title_reference> = the IP address of the HDFS namenode, and only single</term>
                            <definition>
                                <paragraph>namenode is supported now</paragraph>
                            </definition>
                        </definition_list_item>
                    </definition_list>
                </list_item>
                <list_item>
                    <paragraph><title_reference>hdfs_namenode_port</title_reference> = the port of the HDFS namenode service</paragraph>
                </list_item>
                <list_item>
                    <paragraph><title_reference>hdfs_ssh_port</title_reference> = HDFS namenode SSH port</paragraph>
                </list_item>
                <list_item>
                    <paragraph><title_reference>hdfs_ssh_name</title_reference> = HDFS namenode SSH login name</paragraph>
                </list_item>
                <list_item>
                    <definition_list>
                        <definition_list_item>
                            <term><title_reference>hdfs_ssh_pw</title_reference> = HDFS namenode SSH login password, this parameter is not</term>
                            <definition>
                                <paragraph>necessary, if the following <title_reference>hdfs_ssh_private_key</title_reference> is configured</paragraph>
                            </definition>
                        </definition_list_item>
                    </definition_list>
                </list_item>
                <list_item>
                    <paragraph><title_reference>hdfs_ssh_private_key</title_reference> = Path to the HDFS namenode private key to ssh login</paragraph>
                </list_item>
            </bullet_list>
        </section>
        <section ids="known-restrictions" names="known\ restrictions">
            <title>Known Restrictions</title>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>This driver does not support network segmented multi-tenancy model. Instead
                        multi-tenancy is supported by the tenant specific user authentication</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Only support for single HDFS namenode in Kilo release</paragraph>
                </list_item>
            </bullet_list>
            <section ids="the-manila-share-drivers-hdfs-hdfs-native-module" names="the\ manila.share.drivers.hdfs.hdfs_native\ module">
                <title>The <literal classes="xref py py-mod">manila.share.drivers.hdfs.hdfs_native</literal> Module</title>
                <paragraph>HDFS native protocol (hdfs) driver for manila shares.</paragraph>
                <paragraph>Manila share is a directory in HDFS. And this share does not use
                    service VM instance (share server). The instance directly talks
                    to the HDFS cluster.</paragraph>
                <paragraph>The initial version only supports single namenode and flat network.</paragraph>
                <definition_list>
                    <definition_list_item>
                        <term>Configuration Requirements:</term>
                        <definition>
                            <paragraph>To enable access control, HDFS file system must have ACLs enabled.</paragraph>
                        </definition>
                    </definition_list_item>
                </definition_list>
                <index entries=""></index>
                <desc desctype="class" domain="py" noindex="True" objtype="class">
                    <desc_signature class="" first="False" fullname="HDFSNativeShareDriver" module="manila.share.drivers.hdfs.hdfs_native"><desc_annotation xml:space="preserve">class </desc_annotation><desc_name xml:space="preserve">HDFSNativeShareDriver</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">*args</desc_parameter><desc_parameter xml:space="preserve">**kwargs</desc_parameter></desc_parameterlist></desc_signature>
                    <desc_content>
                        <paragraph>Bases: <literal classes="xref py py-class">manila.share.driver.ExecuteMixin</literal>, <reference internal="True" reftitle="manila.share.driver.ShareDriver" refuri="share_replication#manila.share.driver.ShareDriver"><literal classes="xref py py-class">manila.share.driver.ShareDriver</literal></reference></paragraph>
                        <paragraph>HDFS Share Driver.</paragraph>
                        <paragraph>Executes commands relating to shares.
                            API version history:</paragraph>
                        <block_quote>
                            <paragraph>1.0 - Initial Version</paragraph>
                        </block_quote>
                        <index entries=""></index>
                        <desc desctype="method" domain="py" noindex="True" objtype="method">
                            <desc_signature class="HDFSNativeShareDriver" first="False" fullname="HDFSNativeShareDriver.allow_access" module="manila.share.drivers.hdfs.hdfs_native"><desc_name xml:space="preserve">allow_access</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">share</desc_parameter><desc_parameter xml:space="preserve">access</desc_parameter><desc_parameter xml:space="preserve">share_server=None</desc_parameter></desc_parameterlist></desc_signature>
                            <desc_content>
                                <paragraph>Allows access to the share for a given user.</paragraph>
                            </desc_content>
                        </desc>
                        <index entries=""></index>
                        <desc desctype="method" domain="py" noindex="True" objtype="method">
                            <desc_signature class="HDFSNativeShareDriver" first="False" fullname="HDFSNativeShareDriver.check_for_setup_error" module="manila.share.drivers.hdfs.hdfs_native"><desc_name xml:space="preserve">check_for_setup_error</desc_name><desc_parameterlist xml:space="preserve"></desc_parameterlist></desc_signature>
                            <desc_content>
                                <paragraph>Return an error if the prerequisites are met.</paragraph>
                            </desc_content>
                        </desc>
                        <index entries=""></index>
                        <desc desctype="method" domain="py" noindex="True" objtype="method">
                            <desc_signature class="HDFSNativeShareDriver" first="False" fullname="HDFSNativeShareDriver.create_share" module="manila.share.drivers.hdfs.hdfs_native"><desc_name xml:space="preserve">create_share</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">share</desc_parameter><desc_parameter xml:space="preserve">share_server=None</desc_parameter></desc_parameterlist></desc_signature>
                            <desc_content>
                                <paragraph>Create a HDFS directory which acted as a share.</paragraph>
                            </desc_content>
                        </desc>
                        <index entries=""></index>
                        <desc desctype="method" domain="py" noindex="True" objtype="method">
                            <desc_signature class="HDFSNativeShareDriver" first="False" fullname="HDFSNativeShareDriver.create_share_from_snapshot" module="manila.share.drivers.hdfs.hdfs_native"><desc_name xml:space="preserve">create_share_from_snapshot</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">share</desc_parameter><desc_parameter xml:space="preserve">snapshot</desc_parameter><desc_parameter xml:space="preserve">share_server=None</desc_parameter></desc_parameterlist></desc_signature>
                            <desc_content>
                                <paragraph>Creates a snapshot.</paragraph>
                            </desc_content>
                        </desc>
                        <index entries=""></index>
                        <desc desctype="method" domain="py" noindex="True" objtype="method">
                            <desc_signature class="HDFSNativeShareDriver" first="False" fullname="HDFSNativeShareDriver.create_snapshot" module="manila.share.drivers.hdfs.hdfs_native"><desc_name xml:space="preserve">create_snapshot</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">snapshot</desc_parameter><desc_parameter xml:space="preserve">share_server=None</desc_parameter></desc_parameterlist></desc_signature>
                            <desc_content>
                                <paragraph>Creates a snapshot.</paragraph>
                            </desc_content>
                        </desc>
                        <index entries=""></index>
                        <desc desctype="method" domain="py" noindex="True" objtype="method">
                            <desc_signature class="HDFSNativeShareDriver" first="False" fullname="HDFSNativeShareDriver.delete_share" module="manila.share.drivers.hdfs.hdfs_native"><desc_name xml:space="preserve">delete_share</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">share</desc_parameter><desc_parameter xml:space="preserve">share_server=None</desc_parameter></desc_parameterlist></desc_signature>
                            <desc_content>
                                <paragraph>Deletes share storage.</paragraph>
                            </desc_content>
                        </desc>
                        <index entries=""></index>
                        <desc desctype="method" domain="py" noindex="True" objtype="method">
                            <desc_signature class="HDFSNativeShareDriver" first="False" fullname="HDFSNativeShareDriver.delete_snapshot" module="manila.share.drivers.hdfs.hdfs_native"><desc_name xml:space="preserve">delete_snapshot</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">snapshot</desc_parameter><desc_parameter xml:space="preserve">share_server=None</desc_parameter></desc_parameterlist></desc_signature>
                            <desc_content>
                                <paragraph>Deletes a snapshot.</paragraph>
                            </desc_content>
                        </desc>
                        <index entries=""></index>
                        <desc desctype="method" domain="py" noindex="True" objtype="method">
                            <desc_signature class="HDFSNativeShareDriver" first="False" fullname="HDFSNativeShareDriver.deny_access" module="manila.share.drivers.hdfs.hdfs_native"><desc_name xml:space="preserve">deny_access</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">share</desc_parameter><desc_parameter xml:space="preserve">access</desc_parameter><desc_parameter xml:space="preserve">share_server=None</desc_parameter></desc_parameterlist></desc_signature>
                            <desc_content>
                                <paragraph>Denies the access to the share for a given user.</paragraph>
                            </desc_content>
                        </desc>
                        <index entries=""></index>
                        <desc desctype="method" domain="py" noindex="True" objtype="method">
                            <desc_signature class="HDFSNativeShareDriver" first="False" fullname="HDFSNativeShareDriver.do_setup" module="manila.share.drivers.hdfs.hdfs_native"><desc_name xml:space="preserve">do_setup</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter></desc_parameterlist></desc_signature>
                            <desc_content>
                                <paragraph>Do initialization while the share driver starts.</paragraph>
                            </desc_content>
                        </desc>
                        <index entries=""></index>
                        <desc desctype="method" domain="py" noindex="True" objtype="method">
                            <desc_signature class="HDFSNativeShareDriver" first="False" fullname="HDFSNativeShareDriver.ensure_share" module="manila.share.drivers.hdfs.hdfs_native"><desc_name xml:space="preserve">ensure_share</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">context</desc_parameter><desc_parameter xml:space="preserve">share</desc_parameter><desc_parameter xml:space="preserve">share_server=None</desc_parameter></desc_parameterlist></desc_signature>
                            <desc_content>
                                <paragraph>Ensure the storage are exported.</paragraph>
                            </desc_content>
                        </desc>
                        <index entries=""></index>
                        <desc desctype="method" domain="py" noindex="True" objtype="method">
                            <desc_signature class="HDFSNativeShareDriver" first="False" fullname="HDFSNativeShareDriver.extend_share" module="manila.share.drivers.hdfs.hdfs_native"><desc_name xml:space="preserve">extend_share</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">share</desc_parameter><desc_parameter xml:space="preserve">new_size</desc_parameter><desc_parameter xml:space="preserve">share_server=None</desc_parameter></desc_parameterlist></desc_signature>
                            <desc_content>
                                <paragraph>Extend share storage.</paragraph>
                            </desc_content>
                        </desc>
                        <index entries=""></index>
                        <desc desctype="method" domain="py" noindex="True" objtype="method">
                            <desc_signature class="HDFSNativeShareDriver" first="False" fullname="HDFSNativeShareDriver.get_network_allocations_number" module="manila.share.drivers.hdfs.hdfs_native"><desc_name xml:space="preserve">get_network_allocations_number</desc_name><desc_parameterlist xml:space="preserve"></desc_parameterlist></desc_signature>
                            <desc_content>
                            </desc_content>
                        </desc>
                    </desc_content>
                </desc>
            </section>
        </section>
    </section>
</document>

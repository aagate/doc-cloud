<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/glance/doc/source/admin/notifications.rst">
    <comment xml:space="preserve">Copyright 2011-2013 OpenStack Foundation
All Rights Reserved.

Licensed under the Apache License, Version 2.0 (the "License"); you may
not use this file except in compliance with the License. You may obtain
a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations
under the License.</comment>
    <target refid="notifications"></target>
    <section dupnames="notifications" ids="notifications id1" names="notifications">
        <title>Notifications</title>
        <paragraph>Notifications can be generated for several events in the image lifecycle.
            These can be used for auditing, troubleshooting, etc.</paragraph>
        <section ids="notification-drivers" names="notification\ drivers">
            <title>Notification Drivers</title>
            <bullet_list bullet="*">
                <list_item>
                    <paragraph>log</paragraph>
                    <paragraph>This driver uses the standard Python logging infrastructure with
                        the notifications ending up in file specified by the log_file
                        configuration directive.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>messaging</paragraph>
                    <paragraph>This strategy sends notifications to a message queue configured
                        using oslo.messaging configuration options.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>noop</paragraph>
                    <paragraph>This strategy produces no notifications. It is the default strategy.</paragraph>
                </list_item>
            </bullet_list>
        </section>
        <section ids="notification-types" names="notification\ types">
            <title>Notification Types</title>
            <bullet_list bullet="*">
                <list_item>
                    <paragraph><literal>image.create</literal></paragraph>
                    <paragraph>Emitted when an image record is created in Glance.  Image record creation is
                        independent of image data upload.</paragraph>
                </list_item>
                <list_item>
                    <paragraph><literal>image.prepare</literal></paragraph>
                    <paragraph>Emitted when Glance begins uploading image data to its store.</paragraph>
                </list_item>
                <list_item>
                    <paragraph><literal>image.upload</literal></paragraph>
                    <paragraph>Emitted when Glance has completed the upload of image data to its store.</paragraph>
                </list_item>
                <list_item>
                    <paragraph><literal>image.activate</literal></paragraph>
                    <paragraph>Emitted when an image goes to <title_reference>active</title_reference> status.  This occurs when Glance
                        knows where the image data is located.</paragraph>
                </list_item>
                <list_item>
                    <paragraph><literal>image.send</literal></paragraph>
                    <paragraph>Emitted upon completion of an image being sent to a consumer.</paragraph>
                </list_item>
                <list_item>
                    <paragraph><literal>image.update</literal></paragraph>
                    <paragraph>Emitted when an image record is updated in Glance.</paragraph>
                </list_item>
                <list_item>
                    <paragraph><literal>image.delete</literal></paragraph>
                    <paragraph>Emitted when an image deleted from Glance.</paragraph>
                </list_item>
                <list_item>
                    <paragraph><literal>task.run</literal></paragraph>
                    <paragraph>Emitted when a task is picked up by the executor to be run.</paragraph>
                </list_item>
                <list_item>
                    <paragraph><literal>task.processing</literal></paragraph>
                    <paragraph>Emitted when a task is sent over to the executor to begin processing.</paragraph>
                </list_item>
                <list_item>
                    <paragraph><literal>task.success</literal></paragraph>
                    <paragraph>Emitted when a task is successfully completed.</paragraph>
                </list_item>
                <list_item>
                    <paragraph><literal>task.failure</literal></paragraph>
                    <paragraph>Emitted when a task fails.</paragraph>
                </list_item>
            </bullet_list>
        </section>
        <section ids="content" names="content">
            <title>Content</title>
            <paragraph>Every message contains a handful of attributes.</paragraph>
            <bullet_list bullet="*">
                <list_item>
                    <paragraph>message_id</paragraph>
                    <paragraph>UUID identifying the message.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>publisher_id</paragraph>
                    <paragraph>The hostname of the glance instance that generated the message.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>event_type</paragraph>
                    <paragraph>Event that generated the message.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>priority</paragraph>
                    <paragraph>One of WARN, INFO or ERROR.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>timestamp</paragraph>
                    <paragraph>UTC timestamp of when event was generated.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>payload</paragraph>
                    <paragraph>Data specific to the event type.</paragraph>
                </list_item>
            </bullet_list>
        </section>
        <section ids="payload" names="payload">
            <title>Payload</title>
            <bullet_list bullet="*">
                <list_item>
                    <paragraph>image.send</paragraph>
                    <paragraph>The payload for INFO, WARN, and ERROR events contain the following:</paragraph>
                    <definition_list>
                        <definition_list_item>
                            <term>image_id</term>
                            <definition>
                                <paragraph>ID of the image (UUID)</paragraph>
                            </definition>
                        </definition_list_item>
                        <definition_list_item>
                            <term>owner_id</term>
                            <definition>
                                <paragraph>Tenant or User ID that owns this image (string)</paragraph>
                            </definition>
                        </definition_list_item>
                        <definition_list_item>
                            <term>receiver_tenant_id</term>
                            <definition>
                                <paragraph>Tenant ID of the account receiving the image (string)</paragraph>
                            </definition>
                        </definition_list_item>
                        <definition_list_item>
                            <term>receiver_user_id</term>
                            <definition>
                                <paragraph>User ID of the account receiving the image (string)</paragraph>
                            </definition>
                        </definition_list_item>
                        <definition_list_item>
                            <term>destination_ip</term>
                            <definition>
                                <paragraph>The receiver’s IP address to which the image was sent (string)</paragraph>
                            </definition>
                        </definition_list_item>
                        <definition_list_item>
                            <term>bytes_sent</term>
                            <definition>
                                <paragraph>The number of bytes actually sent</paragraph>
                            </definition>
                        </definition_list_item>
                    </definition_list>
                </list_item>
                <list_item>
                    <paragraph>image.create</paragraph>
                    <paragraph>For INFO events, it is the image metadata.
                        WARN and ERROR events contain a text message in the payload.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>image.prepare</paragraph>
                    <paragraph>For INFO events, it is the image metadata.
                        WARN and ERROR events contain a text message in the payload.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>image.upload</paragraph>
                    <paragraph>For INFO events, it is the image metadata.
                        WARN and ERROR events contain a text message in the payload.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>image.activate</paragraph>
                    <paragraph>For INFO events, it is the image metadata.
                        WARN and ERROR events contain a text message in the payload.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>image.update</paragraph>
                    <paragraph>For INFO events, it is the image metadata.
                        WARN and ERROR events contain a text message in the payload.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>image.delete</paragraph>
                    <paragraph>For INFO events, it is the image id.
                        WARN and ERROR events contain a text message in the payload.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>task.run</paragraph>
                    <paragraph>The payload for INFO, WARN, and ERROR events contain the following:</paragraph>
                    <definition_list>
                        <definition_list_item>
                            <term>task_id</term>
                            <definition>
                                <paragraph>ID of the task (UUID)</paragraph>
                            </definition>
                        </definition_list_item>
                        <definition_list_item>
                            <term>owner</term>
                            <definition>
                                <paragraph>Tenant or User ID that created this task (string)</paragraph>
                            </definition>
                        </definition_list_item>
                        <definition_list_item>
                            <term>task_type</term>
                            <definition>
                                <paragraph>Type of the task. Example, task_type is “import”. (string)</paragraph>
                            </definition>
                        </definition_list_item>
                        <definition_list_item>
                            <term>status,</term>
                            <definition>
                                <paragraph>status of the task. Status can be “pending”, “processing”,
                                    “success” or “failure”. (string)</paragraph>
                            </definition>
                        </definition_list_item>
                        <definition_list_item>
                            <term>task_input</term>
                            <definition>
                                <paragraph>Input provided by the user when attempting to create a task. (dict)</paragraph>
                            </definition>
                        </definition_list_item>
                        <definition_list_item>
                            <term>result</term>
                            <definition>
                                <paragraph>Resulting output from a successful task. (dict)</paragraph>
                            </definition>
                        </definition_list_item>
                        <definition_list_item>
                            <term>message</term>
                            <definition>
                                <paragraph>Message shown in the task if it fails. None if task succeeds. (string)</paragraph>
                            </definition>
                        </definition_list_item>
                        <definition_list_item>
                            <term>expires_at</term>
                            <definition>
                                <paragraph>UTC time at which the task would not be visible to the user. (string)</paragraph>
                            </definition>
                        </definition_list_item>
                        <definition_list_item>
                            <term>created_at</term>
                            <definition>
                                <paragraph>UTC time at which the task was created. (string)</paragraph>
                            </definition>
                        </definition_list_item>
                        <definition_list_item>
                            <term>updated_at</term>
                            <definition>
                                <paragraph>UTC time at which the task was latest updated. (string)</paragraph>
                            </definition>
                        </definition_list_item>
                        <definition_list_item>
                            <term>The exceptions are:-</term>
                            <definition>
                                <paragraph>For INFO events, it is the task dict with result and message as None.
                                    WARN and ERROR events contain a text message in the payload.</paragraph>
                            </definition>
                        </definition_list_item>
                    </definition_list>
                </list_item>
                <list_item>
                    <paragraph>task.processing</paragraph>
                    <paragraph>For INFO events, it is the task dict with result and message as None.
                        WARN and ERROR events contain a text message in the payload.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>task.success</paragraph>
                    <paragraph>For INFO events, it is the task dict with message as None and result is a
                        dict.
                        WARN and ERROR events contain a text message in the payload.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>task.failure</paragraph>
                    <paragraph>For INFO events, it is the task dict with result as None and message is
                        text.
                        WARN and ERROR events contain a text message in the payload.</paragraph>
                </list_item>
            </bullet_list>
        </section>
    </section>
</document>

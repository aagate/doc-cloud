<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/glance/doc/source/contributor/api/glance.api.middleware.cache.rst">
    <section ids="module-glance.api.middleware.cache the-glance-api-middleware-cache-module" names="the\ glance.api.middleware.cache\ module">
        <title>The <reference internal="True" refid="module-glance.api.middleware.cache" reftitle="glance.api.middleware.cache"><literal classes="xref py py-mod">glance.api.middleware.cache</literal></reference> Module</title>
        <index entries="['single',\ u'glance.api.middleware.cache\ (module)',\ u'module-glance.api.middleware.cache',\ '',\ None]"></index>
        <paragraph>Transparent image file caching middleware, designed to live on
            Glance API nodes. When images are requested from the API node,
            this middleware caches the returned image file to local filesystem.</paragraph>
        <paragraph>When subsequent requests for the same image file are received,
            the local cached copy of the image file is returned.</paragraph>
        <index entries="['single',\ u'CacheFilter\ (class\ in\ glance.api.middleware.cache)',\ u'glance.api.middleware.cache.CacheFilter',\ '',\ None]"></index>
        <desc desctype="class" domain="py" noindex="False" objtype="class">
            <desc_signature class="" first="False" fullname="CacheFilter" ids="glance.api.middleware.cache.CacheFilter" module="glance.api.middleware.cache" names="glance.api.middleware.cache.CacheFilter"><desc_annotation xml:space="preserve">class </desc_annotation><desc_addname xml:space="preserve">glance.api.middleware.cache.</desc_addname><desc_name xml:space="preserve">CacheFilter</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">app</desc_parameter></desc_parameterlist><comment xml:space="preserve"></comment></desc_signature>
            <desc_content>
                <paragraph>Bases: <reference internal="True" reftitle="glance.common.wsgi.Middleware" refuri="glance.common.wsgi#glance.common.wsgi.Middleware"><literal classes="xref py py-class">glance.common.wsgi.Middleware</literal></reference></paragraph>
                <index entries="['single',\ u'get_from_cache()\ (glance.api.middleware.cache.CacheFilter\ method)',\ u'glance.api.middleware.cache.CacheFilter.get_from_cache',\ '',\ None]"></index>
                <desc desctype="method" domain="py" noindex="False" objtype="method">
                    <desc_signature class="CacheFilter" first="False" fullname="CacheFilter.get_from_cache" ids="glance.api.middleware.cache.CacheFilter.get_from_cache" module="glance.api.middleware.cache" names="glance.api.middleware.cache.CacheFilter.get_from_cache"><desc_name xml:space="preserve">get_from_cache</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">image_id</desc_parameter></desc_parameterlist><comment xml:space="preserve"></comment></desc_signature>
                    <desc_content>
                        <paragraph>Called if cache hit</paragraph>
                    </desc_content>
                </desc>
                <index entries="['single',\ u'get_status_code()\ (glance.api.middleware.cache.CacheFilter\ method)',\ u'glance.api.middleware.cache.CacheFilter.get_status_code',\ '',\ None]"></index>
                <desc desctype="method" domain="py" noindex="False" objtype="method">
                    <desc_signature class="CacheFilter" first="False" fullname="CacheFilter.get_status_code" ids="glance.api.middleware.cache.CacheFilter.get_status_code" module="glance.api.middleware.cache" names="glance.api.middleware.cache.CacheFilter.get_status_code"><desc_name xml:space="preserve">get_status_code</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">response</desc_parameter></desc_parameterlist><comment xml:space="preserve"></comment></desc_signature>
                    <desc_content>
                        <paragraph>Returns the integer status code from the response, which
                            can be either a Webob.Response (used in testing) or httplib.Response</paragraph>
                    </desc_content>
                </desc>
                <index entries="['single',\ u'process_request()\ (glance.api.middleware.cache.CacheFilter\ method)',\ u'glance.api.middleware.cache.CacheFilter.process_request',\ '',\ None]"></index>
                <desc desctype="method" domain="py" noindex="False" objtype="method">
                    <desc_signature class="CacheFilter" first="False" fullname="CacheFilter.process_request" ids="glance.api.middleware.cache.CacheFilter.process_request" module="glance.api.middleware.cache" names="glance.api.middleware.cache.CacheFilter.process_request"><desc_name xml:space="preserve">process_request</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">request</desc_parameter></desc_parameterlist><comment xml:space="preserve"></comment></desc_signature>
                    <desc_content>
                        <paragraph>For requests for an image file, we check the local image
                            cache. If present, we return the image file, appending
                            the image metadata in headers. If not present, we pass
                            the request on to the next application in the pipeline.</paragraph>
                    </desc_content>
                </desc>
                <index entries="['single',\ u'process_response()\ (glance.api.middleware.cache.CacheFilter\ method)',\ u'glance.api.middleware.cache.CacheFilter.process_response',\ '',\ None]"></index>
                <desc desctype="method" domain="py" noindex="False" objtype="method">
                    <desc_signature class="CacheFilter" first="False" fullname="CacheFilter.process_response" ids="glance.api.middleware.cache.CacheFilter.process_response" module="glance.api.middleware.cache" names="glance.api.middleware.cache.CacheFilter.process_response"><desc_name xml:space="preserve">process_response</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">resp</desc_parameter></desc_parameterlist><comment xml:space="preserve"></comment></desc_signature>
                    <desc_content>
                        <paragraph>We intercept the response coming back from the main
                            images Resource, removing image file from the cache
                            if necessary</paragraph>
                    </desc_content>
                </desc>
            </desc_content>
        </desc>
    </section>
</document>

<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/horizon/doc/source/user/configure-access-and-security-for-instances.rst">
    <section ids="configure-access-and-security-for-instances" names="configure\ access\ and\ security\ for\ instances">
        <title>Configure access and security for instances</title>
        <paragraph>Before you launch an instance, you should add security group rules to
            enable users to ping and use SSH to connect to the instance. Security
            groups are sets of IP filter rules that define networking access and are
            applied to all instances within a project. To do so, you either add
            rules to the default security group <reference internal="True" refid="security-groups-add-rule"><inline classes="std std-ref">Add a rule to the default security group</inline></reference>
            or add a new security group with rules.</paragraph>
        <paragraph>Key pairs are SSH credentials that are injected into an instance when it
            is launched. To use key pair injection, the image that the instance is
            based on must contain the <literal>cloud-init</literal> package. Each project should
            have at least one key pair. For more information, see the section
            <reference internal="True" refid="keypair-add"><inline classes="std std-ref">Add a key pair</inline></reference>.</paragraph>
        <paragraph>If you have generated a key pair with an external tool, you can import
            it into OpenStack. The key pair can be used for multiple instances that
            belong to a project. For more information, see the section
            <reference internal="True" refid="dashboard-import-keypair"><inline classes="std std-ref">Import a key pair</inline></reference>.</paragraph>
        <note>
            <paragraph>A key pair belongs to an individual user, not to a project.
                To share a key pair across multiple users, each user
                needs to import that key pair.</paragraph>
        </note>
        <paragraph>When an instance is created in OpenStack, it is automatically assigned a
            fixed IP address in the network to which the instance is assigned. This
            IP address is permanently associated with the instance until the
            instance is terminated. However, in addition to the fixed IP address, a
            floating IP address can also be attached to an instance. Unlike fixed IP
            addresses, floating IP addresses are able to have their associations
            modified at any time, regardless of the state of the instances involved.</paragraph>
        <target refid="security-groups-add-rule"></target>
        <section ids="add-a-rule-to-the-default-security-group security-groups-add-rule" names="add\ a\ rule\ to\ the\ default\ security\ group security_groups_add_rule">
            <title>Add a rule to the default security group</title>
            <paragraph>This procedure enables SSH and ICMP (ping) access to instances. The
                rules apply to all instances within a given project, and should be set
                for every project unless there is a reason to prohibit SSH or ICMP
                access to the instances.</paragraph>
            <paragraph>This procedure can be adjusted as necessary to add additional security
                group rules to a project, if your cloud requires them.</paragraph>
            <note>
                <paragraph>When adding a rule, you must specify the protocol used with the
                    destination port or source port.</paragraph>
            </note>
            <enumerated_list enumtype="arabic" prefix="" suffix=".">
                <list_item>
                    <paragraph>Log in to the dashboard.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Select the appropriate project from the drop down menu at the top left.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>On the <inline classes="guilabel" rawtext=":guilabel:`Project`">Project</inline> tab, open the <inline classes="guilabel" rawtext=":guilabel:`Compute`">Compute</inline> tab and
                        click <inline classes="guilabel" rawtext=":guilabel:`Access &amp; Security`">Access &amp; Security</inline> category. The
                        <inline classes="guilabel" rawtext=":guilabel:`Security Groups`">Security Groups</inline> tab shows the security groups that are
                        available for this project.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Select the default security group and click <inline classes="guilabel" rawtext=":guilabel:`Manage Rules`">Manage Rules</inline>.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>To allow SSH access, click <inline classes="guilabel" rawtext=":guilabel:`Add Rule`">Add Rule</inline>.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>In the <inline classes="guilabel" rawtext=":guilabel:`Add Rule`">Add Rule</inline> dialog box, enter the following values:</paragraph>
                    <bullet_list bullet="*">
                        <list_item>
                            <paragraph><strong>Rule</strong>: <literal>SSH</literal></paragraph>
                        </list_item>
                        <list_item>
                            <paragraph><strong>Remote</strong>: <literal>CIDR</literal></paragraph>
                        </list_item>
                        <list_item>
                            <paragraph><strong>CIDR</strong>: <literal>0.0.0.0/0</literal></paragraph>
                        </list_item>
                    </bullet_list>
                    <note>
                        <paragraph>To accept requests from a particular range of IP
                            addresses, specify the IP address block in the
                            <inline classes="guilabel" rawtext=":guilabel:`CIDR`">CIDR</inline> box.</paragraph>
                    </note>
                </list_item>
                <list_item>
                    <paragraph>Click <inline classes="guilabel" rawtext=":guilabel:`Add`">Add</inline>.</paragraph>
                    <paragraph>Instances will now have SSH port 22 open for requests from any IP
                        address.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>To add an ICMP rule, click <inline classes="guilabel" rawtext=":guilabel:`Add Rule`">Add Rule</inline>.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>In the <inline classes="guilabel" rawtext=":guilabel:`Add Rule`">Add Rule</inline> dialog box, enter the following values:</paragraph>
                    <bullet_list bullet="*">
                        <list_item>
                            <paragraph><strong>Rule</strong>: <literal>All ICMP</literal></paragraph>
                        </list_item>
                        <list_item>
                            <paragraph><strong>Direction</strong>: <literal>Ingress</literal></paragraph>
                        </list_item>
                        <list_item>
                            <paragraph><strong>Remote</strong>: <literal>CIDR</literal></paragraph>
                        </list_item>
                        <list_item>
                            <paragraph><strong>CIDR</strong>: <literal>0.0.0.0/0</literal></paragraph>
                        </list_item>
                    </bullet_list>
                </list_item>
                <list_item>
                    <paragraph>Click <inline classes="guilabel" rawtext=":guilabel:`Add`">Add</inline>.</paragraph>
                    <paragraph>Instances will now accept all incoming ICMP packets.</paragraph>
                </list_item>
            </enumerated_list>
            <target refid="keypair-add"></target>
        </section>
        <section ids="add-a-key-pair keypair-add" names="add\ a\ key\ pair keypair_add">
            <title>Add a key pair</title>
            <paragraph>Create at least one key pair for each project.</paragraph>
            <enumerated_list enumtype="arabic" prefix="" suffix=".">
                <list_item>
                    <paragraph>Log in to the dashboard.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Select the appropriate project from the drop down menu at the top left.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>On the <inline classes="guilabel" rawtext=":guilabel:`Project`">Project</inline> tab, open the <inline classes="guilabel" rawtext=":guilabel:`Compute`">Compute</inline> tab and
                        click <inline classes="guilabel" rawtext=":guilabel:`Access &amp; Security`">Access &amp; Security</inline> category.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Click the <inline classes="guilabel" rawtext=":guilabel:`Key Pairs`">Key Pairs</inline> tab, which shows the key pairs that
                        are available for this project.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Click <inline classes="guilabel" rawtext=":guilabel:`Create Key Pair`">Create Key Pair</inline>.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>In the <inline classes="guilabel" rawtext=":guilabel:`Create Key Pair`">Create Key Pair</inline> dialog box, enter a name for your
                        key pair, and click <inline classes="guilabel" rawtext=":guilabel:`Create Key Pair`">Create Key Pair</inline>.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Respond to the prompt to download the key pair.</paragraph>
                </list_item>
            </enumerated_list>
            <target refid="dashboard-import-keypair"></target>
        </section>
        <section ids="import-a-key-pair dashboard-import-keypair" names="import\ a\ key\ pair dashboard_import_keypair">
            <title>Import a key pair</title>
            <enumerated_list enumtype="arabic" prefix="" suffix=".">
                <list_item>
                    <paragraph>Log in to the dashboard.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Select the appropriate project from the drop down menu at the top left.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>On the <inline classes="guilabel" rawtext=":guilabel:`Project`">Project</inline> tab, open the <inline classes="guilabel" rawtext=":guilabel:`Compute`">Compute</inline> tab and
                        click <inline classes="guilabel" rawtext=":guilabel:`Access &amp; Security`">Access &amp; Security</inline> category.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Click the <inline classes="guilabel" rawtext=":guilabel:`Key Pairs`">Key Pairs</inline> tab, which shows the key pairs that
                        are available for this project.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Click <inline classes="guilabel" rawtext=":guilabel:`Import Key Pair`">Import Key Pair</inline>.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>In the <inline classes="guilabel" rawtext=":guilabel:`Import Key Pair`">Import Key Pair</inline> dialog box, enter the name of your
                        key pair, copy the public key into the <inline classes="guilabel" rawtext=":guilabel:`Public Key`">Public Key</inline> box,
                        and then click <inline classes="guilabel" rawtext=":guilabel:`Import Key Pair`">Import Key Pair</inline>.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Save the <literal>*.pem</literal> file locally.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>To change its permissions so that only you can read and write to the
                        file, run the following command:</paragraph>
                    <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ chmod 0600 yourPrivateKey.pem</literal_block>
                    <note>
                        <paragraph>If you are using the Dashboard from a Windows computer, use PuTTYgen
                            to load the <literal>*.pem</literal> file and convert and save it as <literal>*.ppk</literal>. For
                            more information see the <reference name="WinSCP web page for PuTTYgen" refuri="http://winscp.net/eng/docs/ui_puttygen">WinSCP web page for
                                PuTTYgen</reference>.</paragraph>
                    </note>
                </list_item>
                <list_item>
                    <paragraph>To make the key pair known to SSH, run the <literal_strong classes="command">ssh-add</literal_strong> command.</paragraph>
                    <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ ssh-add yourPrivateKey.pem</literal_block>
                </list_item>
            </enumerated_list>
            <paragraph>The Compute database registers the public key of the key pair.</paragraph>
            <paragraph>The Dashboard lists the key pair on the <inline classes="guilabel" rawtext=":guilabel:`Access &amp; Security`">Access &amp; Security</inline> tab.</paragraph>
        </section>
        <section ids="allocate-a-floating-ip-address-to-an-instance" names="allocate\ a\ floating\ ip\ address\ to\ an\ instance">
            <title>Allocate a floating IP address to an instance</title>
            <paragraph>When an instance is created in OpenStack, it is automatically assigned a
                fixed IP address in the network to which the instance is assigned. This
                IP address is permanently associated with the instance until the
                instance is terminated.</paragraph>
            <paragraph>However, in addition to the fixed IP address, a floating IP address can
                also be attached to an instance. Unlike fixed IP addresses, floating IP
                addresses can have their associations modified at any time, regardless
                of the state of the instances involved. This procedure details the
                reservation of a floating IP address from an existing pool of addresses
                and the association of that address with a specific instance.</paragraph>
            <enumerated_list enumtype="arabic" prefix="" suffix=".">
                <list_item>
                    <paragraph>Log in to the dashboard.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Select the appropriate project from the drop down menu at the top left.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>On the <inline classes="guilabel" rawtext=":guilabel:`Project`">Project</inline> tab, open the <inline classes="guilabel" rawtext=":guilabel:`Compute`">Compute</inline> tab and
                        click <inline classes="guilabel" rawtext=":guilabel:`Access &amp; Security`">Access &amp; Security</inline> category.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Click the <inline classes="guilabel" rawtext=":guilabel:`Floating IPs`">Floating IPs</inline> tab, which shows the floating IP
                        addresses allocated to instances.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Click <inline classes="guilabel" rawtext=":guilabel:`Allocate IP To Project`">Allocate IP To Project</inline>.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Choose the pool from which to pick the IP address.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Click <inline classes="guilabel" rawtext=":guilabel:`Allocate IP`">Allocate IP</inline>.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>In the <inline classes="guilabel" rawtext=":guilabel:`Floating IPs`">Floating IPs</inline> list, click <inline classes="guilabel" rawtext=":guilabel:`Associate`">Associate</inline>.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>In the <inline classes="guilabel" rawtext=":guilabel:`Manage Floating IP Associations`">Manage Floating IP Associations</inline> dialog box,
                        choose the following options:</paragraph>
                    <bullet_list bullet="-">
                        <list_item>
                            <paragraph>The <inline classes="guilabel" rawtext=":guilabel:`IP Address`">IP Address</inline> field is filled automatically,
                                but you can add a new IP address by clicking the
                                <inline classes="guilabel" rawtext=":guilabel:`+`">+</inline> button.</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph>In the <inline classes="guilabel" rawtext=":guilabel:`Port to be associated`">Port to be associated</inline> field, select a port
                                from the list.</paragraph>
                            <paragraph>The list shows all the instances with their fixed IP addresses.</paragraph>
                        </list_item>
                    </bullet_list>
                </list_item>
                <list_item>
                    <paragraph>Click <inline classes="guilabel" rawtext=":guilabel:`Associate`">Associate</inline>.</paragraph>
                </list_item>
            </enumerated_list>
            <note>
                <paragraph>To disassociate an IP address from an instance, click the
                    <inline classes="guilabel" rawtext=":guilabel:`Disassociate`">Disassociate</inline> button.</paragraph>
            </note>
            <paragraph>To release the floating IP address back into the floating IP pool, click
                the <inline classes="guilabel" rawtext=":guilabel:`Release Floating IP`">Release Floating IP</inline> option in the <inline classes="guilabel" rawtext=":guilabel:`Actions`">Actions</inline> column.</paragraph>
        </section>
    </section>
</document>

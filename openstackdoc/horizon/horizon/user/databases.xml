<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/horizon/doc/source/user/databases.rst">
    <section ids="create-and-manage-databases" names="create\ and\ manage\ databases">
        <title>Create and manage databases</title>
        <paragraph>The Database service provides scalable and reliable cloud provisioning
            functionality for both relational and non-relational database engines.
            Users can quickly and easily use database features without the burden of
            handling complex administrative tasks.</paragraph>
        <target refid="dashboard-create-db-instance"></target>
        <section ids="create-a-database-instance dashboard-create-db-instance" names="create\ a\ database\ instance dashboard_create_db_instance">
            <title>Create a database instance</title>
            <paragraph><strong>Prerequisites.</strong> Before you create a database instance, you need to
                configure a default datastore and make sure you have an appropriate
                flavor for the type of database instance you want.</paragraph>
            <enumerated_list enumtype="arabic" prefix="" suffix=".">
                <list_item>
                    <paragraph><strong>Configure a default datastore.</strong></paragraph>
                    <paragraph>Because the dashboard does not let you choose a specific datastore to
                        use with an instance, you need to configure a default datastore. The
                        dashboard then uses the default datastore to create the instance.</paragraph>
                    <enumerated_list enumtype="arabic" prefix="" suffix=".">
                        <list_item>
                            <paragraph>Add the following line to <literal>/etc/trove/trove.conf</literal>:</paragraph>
                            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">default_datastore = DATASTORE_NAME</literal_block>
                            <paragraph>Replace <literal>DATASTORE_NAME</literal> with the name that the administrative
                                user set when issuing the <literal_strong classes="command">trove-manage</literal_strong> command to create the
                                datastore. You can use the trove <literal_strong classes="command">datastore-list</literal_strong> command to
                                display the datastores that are available in your environment.</paragraph>
                            <paragraph>For example, if your MySQL data store name is set to <literal>mysql</literal>,
                                your entry would look like this:</paragraph>
                            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">default_datastore = mysql</literal_block>
                        </list_item>
                        <list_item>
                            <paragraph>Restart Database services on the controller node:</paragraph>
                            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve"># service trove-api restart
# service trove-taskmanager restart
# service trove-conductor restart</literal_block>
                        </list_item>
                    </enumerated_list>
                </list_item>
                <list_item>
                    <paragraph><strong>Verify flavor.</strong></paragraph>
                    <paragraph>Make sure an appropriate flavor exists for the type of
                        database instance you want.</paragraph>
                </list_item>
            </enumerated_list>
            <paragraph><strong>Create database instance.</strong> Once you have configured a default
                datastore and verified that you have an appropriate flavor, you can
                create a database instance.</paragraph>
            <enumerated_list enumtype="arabic" prefix="" suffix=".">
                <list_item>
                    <paragraph>Log in to the dashboard.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>From the CURRENT PROJECT on the <inline classes="guilabel" rawtext=":guilabel:`Project`">Project</inline> tab, select the
                        appropriate project.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>On the <inline classes="guilabel" rawtext=":guilabel:`Project`">Project</inline> tab, open the <inline classes="guilabel" rawtext=":guilabel:`Database`">Database</inline> tab and
                        click <inline classes="guilabel" rawtext=":guilabel:`Instances`">Instances</inline> category.  This lists the instances that
                        already exist in your environment.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Click <inline classes="guilabel" rawtext=":guilabel:`Launch Instance`">Launch Instance</inline>.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>In the <inline classes="guilabel" rawtext=":guilabel:`Launch Database`">Launch Database</inline> dialog box, specify the following values.</paragraph>
                    <paragraph>Details</paragraph>
                    <paragraph><inline classes="guilabel" rawtext=":guilabel:`Database Name`">Database Name</inline>: Specify a name for the database instance.</paragraph>
                    <paragraph><inline classes="guilabel" rawtext=":guilabel:`Flavor`">Flavor</inline>: Select an appropriate flavor for the instance.</paragraph>
                    <paragraph><inline classes="guilabel" rawtext=":guilabel:`Volume Size`">Volume Size</inline>: Select a volume size. Volume size is expressed in
                        GB.</paragraph>
                    <paragraph><inline classes="guilabel" rawtext=":guilabel:`Initialize Databases`">Initialize Databases</inline>: Initial Database</paragraph>
                    <paragraph>Optionally provide a comma separated list of databases to create, for
                        example:</paragraph>
                    <paragraph><literal>database1</literal>, <literal>database2</literal>, <literal>database3</literal></paragraph>
                    <paragraph><inline classes="guilabel" rawtext=":guilabel:`Initial Admin User`">Initial Admin User</inline>: Create an initial admin user. This user will
                        have access to all the databases you create.</paragraph>
                    <paragraph><inline classes="guilabel" rawtext=":guilabel:`Password`">Password</inline>: Specify a password associated with the initial admin
                        user you just named.</paragraph>
                    <paragraph><inline classes="guilabel" rawtext=":guilabel:`Host`">Host</inline>: Optionally, allow the user to connect only from this host.
                        If you do not specify a host, this user will be allowed to connect from
                        anywhere.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Click the <inline classes="guilabel" rawtext=":guilabel:`Launch`">Launch</inline> button. The new database instance appears in
                        the databases list.</paragraph>
                </list_item>
            </enumerated_list>
        </section>
        <section ids="backup-and-restore-a-database" names="backup\ and\ restore\ a\ database">
            <title>Backup and restore a database</title>
            <paragraph>You can use Database services to backup a database and store the backup
                artifact in the Object Storage service. Later on, if the original
                database is damaged, you can use the backup artifact to restore the
                database. The restore process creates a database instance.</paragraph>
            <paragraph>This example shows you how to back up and restore a MySQL database.</paragraph>
            <section ids="to-backup-the-database-instance" names="to\ backup\ the\ database\ instance">
                <title>To backup the database instance</title>
                <enumerated_list enumtype="arabic" prefix="" suffix=".">
                    <list_item>
                        <paragraph>Log in to the dashboard.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>From the CURRENT PROJECT on the <inline classes="guilabel" rawtext=":guilabel:`Project`">Project</inline> tab, select the
                            appropriate project.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>On the <inline classes="guilabel" rawtext=":guilabel:`Project`">Project</inline> tab, open the <inline classes="guilabel" rawtext=":guilabel:`Database`">Database</inline> tab and
                            click <inline classes="guilabel" rawtext=":guilabel:`Instances`">Instances</inline> category. This displays the existing
                            instances in your system.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Click <inline classes="guilabel" rawtext=":guilabel:`Create Backup`">Create Backup</inline>.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>In the <inline classes="guilabel" rawtext=":guilabel:`Backup Database`">Backup Database</inline> dialog box, specify the following
                            values:</paragraph>
                        <paragraph>Name</paragraph>
                        <paragraph>Specify a name for the backup.</paragraph>
                        <paragraph>Database Instance</paragraph>
                        <paragraph>Select the instance you want to back up.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Click <inline classes="guilabel" rawtext=":guilabel:`Backup`">Backup</inline>. The new backup appears in the backup list.</paragraph>
                    </list_item>
                </enumerated_list>
            </section>
            <section ids="to-restore-a-database-instance" names="to\ restore\ a\ database\ instance">
                <title>To restore a database instance</title>
                <paragraph>Now assume that your original database instance is damaged and you
                    need to restore it. You do the restore by using your backup to create
                    a new database instance.</paragraph>
                <enumerated_list enumtype="arabic" prefix="" suffix=".">
                    <list_item>
                        <paragraph>Log in to the dashboard.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>From the CURRENT PROJECT on the <inline classes="guilabel" rawtext=":guilabel:`Project`">Project</inline> tab, select the
                            appropriate project.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>On the <inline classes="guilabel" rawtext=":guilabel:`Project`">Project</inline> tab, open the <inline classes="guilabel" rawtext=":guilabel:`Database`">Database</inline> tab and
                            click <inline classes="guilabel" rawtext=":guilabel:`Backups`">Backups</inline> category. This lists the available backups.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Check the backup you want to use and click <inline classes="guilabel" rawtext=":guilabel:`Restore Backup`">Restore Backup</inline>.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>In the <inline classes="guilabel" rawtext=":guilabel:`Launch Database`">Launch Database</inline> dialog box, specify the values you
                            want for the new database instance.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Click the <inline classes="guilabel" rawtext=":guilabel:`Restore From Database`">Restore From Database</inline> tab and make sure that this
                            new instance is based on the correct backup.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Click <inline classes="guilabel" rawtext=":guilabel:`Launch`">Launch</inline>.</paragraph>
                        <paragraph>The new instance appears in the database instances list.</paragraph>
                    </list_item>
                </enumerated_list>
            </section>
        </section>
        <section ids="update-a-database-instance" names="update\ a\ database\ instance">
            <title>Update a database instance</title>
            <paragraph>You can change various characteristics of a database instance,
                such as its volume size and flavor.</paragraph>
            <section ids="to-change-the-volume-size-of-an-instance" names="to\ change\ the\ volume\ size\ of\ an\ instance">
                <title>To change the volume size of an instance</title>
                <enumerated_list enumtype="arabic" prefix="" suffix=".">
                    <list_item>
                        <paragraph>Log in to the dashboard.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>From the CURRENT PROJECT on the <inline classes="guilabel" rawtext=":guilabel:`Project`">Project</inline> tab, select the
                            appropriate project.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>On the <inline classes="guilabel" rawtext=":guilabel:`Project`">Project</inline> tab, open the <inline classes="guilabel" rawtext=":guilabel:`Database`">Database</inline> tab and
                            click <inline classes="guilabel" rawtext=":guilabel:`Instances`">Instances</inline> category. This displays the existing
                            instances in your system.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Check the instance you want to work with.
                            In the <inline classes="guilabel" rawtext=":guilabel:`Actions`">Actions</inline> column, expand the drop down menu
                            and select <inline classes="guilabel" rawtext=":guilabel:`Resize Volume`">Resize Volume</inline>.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>In the <inline classes="guilabel" rawtext=":guilabel:`Resize Database Volume`">Resize Database Volume</inline> dialog box,
                            fill in the <inline classes="guilabel" rawtext=":guilabel:`New Size`">New Size</inline> field with an integer indicating
                            the new size you want for the instance. Express the size in GB, and
                            note that the new size must be larger than the current size.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Click <inline classes="guilabel" rawtext=":guilabel:`Resize Database Volume`">Resize Database Volume</inline>.</paragraph>
                    </list_item>
                </enumerated_list>
            </section>
            <section ids="to-change-the-flavor-of-an-instance" names="to\ change\ the\ flavor\ of\ an\ instance">
                <title>To change the flavor of an instance</title>
                <enumerated_list enumtype="arabic" prefix="" suffix=".">
                    <list_item>
                        <paragraph>Log in to the dashboard.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>From the CURRENT PROJECT on the <inline classes="guilabel" rawtext=":guilabel:`Project`">Project</inline> tab, select the
                            appropriate project.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>On the <inline classes="guilabel" rawtext=":guilabel:`Project`">Project</inline> tab, open the <inline classes="guilabel" rawtext=":guilabel:`Database`">Database</inline> tab and
                            click <inline classes="guilabel" rawtext=":guilabel:`Instances`">Instances</inline> category. This displays the existing
                            instances in your system.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Check the instance you want to work with. In the
                            <inline classes="guilabel" rawtext=":guilabel:`Actions`">Actions</inline> column, expand the drop down menu and
                            select <inline classes="guilabel" rawtext=":guilabel:`Resize Instance`">Resize Instance</inline>.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>In the <inline classes="guilabel" rawtext=":guilabel:`Resize Database Instance`">Resize Database Instance</inline> dialog box,
                            expand the drop down menu in the <inline classes="guilabel" rawtext=":guilabel:`New Flavor`">New Flavor</inline> field.
                            Select the new flavor you want for the instance.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Click <inline classes="guilabel" rawtext=":guilabel:`Resize Database Instance`">Resize Database Instance</inline>.</paragraph>
                    </list_item>
                </enumerated_list>
            </section>
        </section>
    </section>
</document>

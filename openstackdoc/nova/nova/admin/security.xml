<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/nova/doc/source/admin/security.rst">
    <section ids="security-hardening" names="security\ hardening">
        <title>Security hardening</title>
        <paragraph>OpenStack Compute can be integrated with various third-party technologies to
            increase security. For more information, see the <reference name="OpenStack Security Guide" refuri="https://docs.openstack.org/security-guide/">OpenStack Security Guide</reference><target ids="openstack-security-guide" names="openstack\ security\ guide" refuri="https://docs.openstack.org/security-guide/"></target>.</paragraph>
        <section ids="trusted-compute-pools" names="trusted\ compute\ pools">
            <title>Trusted compute pools</title>
            <paragraph>Administrators can designate a group of compute hosts as trusted using trusted
                compute pools. The trusted hosts use hardware-based security features, such as
                the Intel Trusted Execution Technology (TXT), to provide an additional level of
                security. Combined with an external stand-alone, web-based remote attestation
                server, cloud providers can ensure that the compute node runs only software
                with verified measurements and can ensure a secure cloud stack.</paragraph>
            <paragraph>Trusted compute pools provide the ability for cloud subscribers to request
                services run only on verified compute nodes.</paragraph>
            <paragraph>The remote attestation server performs node verification like this:</paragraph>
            <enumerated_list enumtype="arabic" prefix="" suffix=".">
                <list_item>
                    <paragraph>Compute nodes boot with Intel TXT technology enabled.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>The compute node BIOS, hypervisor, and operating system are measured.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>When the attestation server challenges the compute node, the measured data
                        is sent to the attestation server.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>The attestation server verifies the measurements against a known good
                        database to determine node trustworthiness.</paragraph>
                </list_item>
            </enumerated_list>
            <paragraph>A description of how to set up an attestation service is beyond the scope of
                this document. For an open source project that you can use to implement an
                attestation service, see the <reference name="Open Attestation" refuri="https://github.com/OpenAttestation/OpenAttestation">Open Attestation</reference> project.</paragraph>
            <figure ids="id1">
                <image candidates="{'*': u'admin/figures/OpenStackTrustedComputePool1.png'}" uri="admin/figures/OpenStackTrustedComputePool1.png"></image>
                <caption><strong>Configuring Compute to use trusted compute pools</strong></caption>
            </figure>
            <enumerated_list enumtype="arabic" prefix="" suffix=".">
                <list_item>
                    <paragraph>Enable scheduling support for trusted compute pools by adding these lines to
                        the <literal>DEFAULT</literal> section of the <literal>/etc/nova/nova.conf</literal> file:</paragraph>
                    <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">[DEFAULT]
compute_scheduler_driver=nova.scheduler.filter_scheduler.FilterScheduler
scheduler_available_filters=nova.scheduler.filters.all_filters
scheduler_default_filters=AvailabilityZoneFilter,RamFilter,ComputeFilter,TrustedFilter</literal_block>
                </list_item>
                <list_item>
                    <paragraph>Specify the connection information for your attestation service by adding
                        these lines to the <literal>trusted_computing</literal> section of the
                        <literal>/etc/nova/nova.conf</literal> file:</paragraph>
                    <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">[trusted_computing]
attestation_server = 10.1.71.206
attestation_port = 8443
# If using OAT v2.0 after, use this port:
# attestation_port = 8181
attestation_server_ca_file = /etc/nova/ssl.10.1.71.206.crt
# If using OAT v1.5, use this api_url:
attestation_api_url = /AttestationService/resources
# If using OAT pre-v1.5, use this api_url:
# attestation_api_url = /OpenAttestationWebServices/V1.0
attestation_auth_blob = i-am-openstack</literal_block>
                    <paragraph>In this example:</paragraph>
                    <definition_list>
                        <definition_list_item>
                            <term><literal>server</literal></term>
                            <definition>
                                <paragraph>Host name or IP address of the host that runs the attestation service</paragraph>
                            </definition>
                        </definition_list_item>
                        <definition_list_item>
                            <term><literal>port</literal></term>
                            <definition>
                                <paragraph>HTTPS port for the attestation service</paragraph>
                            </definition>
                        </definition_list_item>
                        <definition_list_item>
                            <term><literal>server_ca_file</literal></term>
                            <definition>
                                <paragraph>Certificate file used to verify the attestation server's identity</paragraph>
                            </definition>
                        </definition_list_item>
                        <definition_list_item>
                            <term><literal>api_url</literal></term>
                            <definition>
                                <paragraph>The attestation service's URL path</paragraph>
                            </definition>
                        </definition_list_item>
                        <definition_list_item>
                            <term><literal>auth_blob</literal></term>
                            <definition>
                                <paragraph>An authentication blob, required by the attestation service.</paragraph>
                            </definition>
                        </definition_list_item>
                    </definition_list>
                </list_item>
                <list_item>
                    <paragraph>Save the file, and restart the <literal>nova-compute</literal> and <literal>nova-scheduler</literal>
                        service to pick up the changes.</paragraph>
                </list_item>
            </enumerated_list>
            <paragraph>To customize the trusted compute pools, use these configuration option
                settings:</paragraph>
            <table ids="id2">
                <title><strong>Description of trusted computing configuration options</strong></title>
                <tgroup cols="2">
                    <colspec colwidth="50"></colspec>
                    <colspec colwidth="50"></colspec>
                    <thead>
                        <row>
                            <entry>
                                <paragraph>Configuration option = Default value</paragraph>
                            </entry>
                            <entry>
                                <paragraph>Description</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph>[trusted_computing]</paragraph>
                            </entry>
                            <entry>
                            </entry>
                        </row>
                    </thead>
                    <tbody>
                        <row>
                            <entry>
                                <paragraph>attestation_api_url = /OpenAttestationWebServices/V1.0</paragraph>
                            </entry>
                            <entry>
                                <paragraph>(StrOpt) Attestation web API URL</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph>attestation_auth_blob = None</paragraph>
                            </entry>
                            <entry>
                                <paragraph>(StrOpt) Attestation authorization blob - must change</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph>attestation_auth_timeout = 60</paragraph>
                            </entry>
                            <entry>
                                <paragraph>(IntOpt) Attestation status cache valid period length</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph>attestation_insecure_ssl = False</paragraph>
                            </entry>
                            <entry>
                                <paragraph>(BoolOpt) Disable SSL cert verification for Attestation service</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph>attestation_port = 8443</paragraph>
                            </entry>
                            <entry>
                                <paragraph>(StrOpt) Attestation server port</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph>attestation_server = None</paragraph>
                            </entry>
                            <entry>
                                <paragraph>(StrOpt) Attestation server HTTP</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph>attestation_server_ca_file = None</paragraph>
                            </entry>
                            <entry>
                                <paragraph>(StrOpt) Attestation server Cert file for Identity verification</paragraph>
                            </entry>
                        </row>
                    </tbody>
                </tgroup>
            </table>
            <paragraph><strong>Specifying trusted flavors</strong></paragraph>
            <enumerated_list enumtype="arabic" prefix="" suffix=".">
                <list_item>
                    <paragraph>Flavors can be designated as trusted using the <literal_strong classes="command">openstack flavor
                            set</literal_strong> command. In this example, the <literal>m1.tiny</literal> flavor is being set as
                        trusted:</paragraph>
                    <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack flavor set --property trusted_host=trusted m1.tiny</literal_block>
                </list_item>
                <list_item>
                    <paragraph>You can request that your instance is run on a trusted host by specifying a
                        trusted flavor when booting the instance:</paragraph>
                    <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack server create --flavor m1.tiny \
  --key-name myKeypairName --image myImageID newInstanceName</literal_block>
                </list_item>
            </enumerated_list>
            <figure>
                <image candidates="{'*': u'admin/figures/OpenStackTrustedComputePool2.png'}" uri="admin/figures/OpenStackTrustedComputePool2.png"></image>
            </figure>
        </section>
        <section ids="encrypt-compute-metadata-traffic" names="encrypt\ compute\ metadata\ traffic">
            <title>Encrypt Compute metadata traffic</title>
            <paragraph><strong>Enabling SSL encryption</strong></paragraph>
            <paragraph>OpenStack supports encrypting Compute metadata traffic with HTTPS.  Enable SSL
                encryption in the <literal>metadata_agent.ini</literal> file.</paragraph>
            <enumerated_list enumtype="arabic" prefix="" suffix=".">
                <list_item>
                    <paragraph>Enable the HTTPS protocol.</paragraph>
                    <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">nova_metadata_protocol = https</literal_block>
                </list_item>
                <list_item>
                    <paragraph>Determine whether insecure SSL connections are accepted for Compute metadata
                        server requests. The default value is <literal>False</literal>.</paragraph>
                    <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">nova_metadata_insecure = False</literal_block>
                </list_item>
                <list_item>
                    <paragraph>Specify the path to the client certificate.</paragraph>
                    <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">nova_client_cert = PATH_TO_CERT</literal_block>
                </list_item>
                <list_item>
                    <paragraph>Specify the path to the private key.</paragraph>
                    <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">nova_client_priv_key = PATH_TO_KEY</literal_block>
                </list_item>
            </enumerated_list>
        </section>
    </section>
</document>

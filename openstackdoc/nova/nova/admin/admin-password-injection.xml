<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/nova/doc/source/admin/admin-password-injection.rst">
    <section ids="injecting-the-administrator-password" names="injecting\ the\ administrator\ password">
        <title>Injecting the administrator password</title>
        <paragraph>Compute can generate a random administrator (root) password and inject that
            password into an instance. If this feature is enabled, users can run
            <literal_strong classes="command">ssh</literal_strong> to an instance without an <literal_strong classes="command">ssh</literal_strong> keypair.  The random
            password appears in the output of the <literal_strong classes="command">openstack server create</literal_strong>
            command.  You can also view and set the admin password from the dashboard.</paragraph>
        <rubric>Password injection using the dashboard</rubric>
        <paragraph>By default, the dashboard will display the <literal>admin</literal> password and allow the
            user to modify it.</paragraph>
        <paragraph>If you do not want to support password injection, disable the password fields
            by editing the dashboard's <literal>local_settings.py</literal> file.</paragraph>
        <literal_block highlight_args="{}" language="none" linenos="False" xml:space="preserve">OPENSTACK_HYPERVISOR_FEATURES = {
...
    'can_set_password': False,
}</literal_block>
        <rubric>Password injection on libvirt-based hypervisors</rubric>
        <paragraph>For hypervisors that use the libvirt back end (such as KVM, QEMU, and LXC),
            admin password injection is disabled by default. To enable it, set this option
            in <literal>/etc/nova/nova.conf</literal>:</paragraph>
        <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">[libvirt]
inject_password=true</literal_block>
        <paragraph>When enabled, Compute will modify the password of the admin account by editing
            the <literal>/etc/shadow</literal> file inside the virtual machine instance.</paragraph>
        <note>
            <paragraph>Users can only use <literal_strong classes="command">ssh</literal_strong> to access the instance by using the admin
                password if the virtual machine image is a Linux distribution, and it has
                been configured to allow users to use <literal_strong classes="command">ssh</literal_strong> as the root user. This
                is not the case for <reference name="Ubuntu cloud images" refuri="http://uec-images.ubuntu.com">Ubuntu cloud images</reference><target ids="ubuntu-cloud-images" names="ubuntu\ cloud\ images" refuri="http://uec-images.ubuntu.com"></target>
                which, by default, does not allow users to use <literal_strong classes="command">ssh</literal_strong> to access the
                root account.</paragraph>
        </note>
        <rubric>Password injection and XenAPI (XenServer/XCP)</rubric>
        <paragraph>When using the XenAPI hypervisor back end, Compute uses the XenAPI agent to
            inject passwords into guests. The virtual machine image must be configured with
            the agent for password injection to work.</paragraph>
        <rubric>Password injection and Windows images (all hypervisors)</rubric>
        <paragraph>For Windows virtual machines, configure the Windows image to retrieve the admin
            password on boot by installing an agent such as <reference name="cloudbase-init" refuri="https://cloudbase.it/cloudbase-init">cloudbase-init</reference><target ids="cloudbase-init" names="cloudbase-init" refuri="https://cloudbase.it/cloudbase-init"></target>.</paragraph>
    </section>
</document>

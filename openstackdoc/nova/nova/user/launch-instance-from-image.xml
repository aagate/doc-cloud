<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/nova/doc/source/user/launch-instance-from-image.rst">
    <section ids="launch-an-instance-from-an-image" names="launch\ an\ instance\ from\ an\ image">
        <title>Launch an instance from an image</title>
        <paragraph>Follow the steps below to launch an instance from an image.</paragraph>
        <enumerated_list enumtype="arabic" prefix="" suffix=".">
            <list_item>
                <paragraph>After you gather required parameters, run the following command to
                    launch an instance. Specify the server name, flavor ID, and image ID.</paragraph>
                <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack server create --flavor FLAVOR_ID --image IMAGE_ID --key-name KEY_NAME \
  --user-data USER_DATA_FILE --security-group SEC_GROUP_NAME --property KEY=VALUE \
  INSTANCE_NAME</literal_block>
                <paragraph>Optionally, you can provide a key name for access control and a security
                    group for security. You can also include metadata key and value pairs.
                    For example, you can add a description for your server by providing the
                    <literal>--property description="My Server"</literal> parameter.</paragraph>
                <paragraph>You can pass user data in a local file at instance launch by using the
                    <literal>--user-data USER-DATA-FILE</literal> parameter.</paragraph>
                <important>
                    <paragraph>If you boot an instance with an INSTANCE_NAME greater than 63 characters,
                        Compute truncates it automatically when turning it into a host name to
                        ensure the correct work of dnsmasq. The corresponding warning is written
                        into the <literal>neutron-dnsmasq.log</literal> file.</paragraph>
                </important>
                <paragraph>The following command launches the <literal>MyCirrosServer</literal> instance with the
                    <literal>m1.small</literal> flavor (ID of <literal>1</literal>), <literal>cirros-0.3.2-x86_64-uec</literal> image (ID
                    of <literal>397e713c-b95b-4186-ad46-6126863ea0a9</literal>), <literal>default</literal> security
                    group, <literal>KeyPair01</literal> key, and a user data file called
                    <literal>cloudinit.file</literal>:</paragraph>
                <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack server create --flavor 1 --image 397e713c-b95b-4186-ad46-6126863ea0a9 \
  --security-group default --key-name KeyPair01 --user-data cloudinit.file \
  myCirrosServer</literal_block>
                <paragraph>Depending on the parameters that you provide, the command returns a list
                    of server properties.</paragraph>
                <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">+--------------------------------------+-----------------------------------------------+
| Field                                | Value                                         |
+--------------------------------------+-----------------------------------------------+
| OS-DCF:diskConfig                    | MANUAL                                        |
| OS-EXT-AZ:availability_zone          |                                               |
| OS-EXT-SRV-ATTR:host                 | None                                          |
| OS-EXT-SRV-ATTR:hypervisor_hostname  | None                                          |
| OS-EXT-SRV-ATTR:instance_name        |                                               |
| OS-EXT-STS:power_state               | NOSTATE                                       |
| OS-EXT-STS:task_state                | scheduling                                    |
| OS-EXT-STS:vm_state                  | building                                      |
| OS-SRV-USG:launched_at               | None                                          |
| OS-SRV-USG:terminated_at             | None                                          |
| accessIPv4                           |                                               |
| accessIPv6                           |                                               |
| addresses                            |                                               |
| adminPass                            | E4Ksozt4Efi8                                  |
| config_drive                         |                                               |
| created                              | 2016-11-30T14:48:05Z                          |
| flavor                               | m1.tiny                                       |
| hostId                               |                                               |
| id                                   | 89015cc9-bdf1-458a-8518-fdca2b4a5785          |
| image                                | cirros (397e713c-b95b-4186-ad46-6126863ea0a9) |
| key_name                             | KeyPair01                                     |
| name                                 | myCirrosServer                                |
| os-extended-volumes:volumes_attached | []                                            |
| progress                             | 0                                             |
| project_id                           | 5669caad86a04256994cdf755df4d3c1              |
| properties                           |                                               |
| security_groups                      | [{u'name': u'default'}]                       |
| status                               | BUILD                                         |
| updated                              | 2016-11-30T14:48:05Z                          |
| user_id                              | c36cec73b0e44876a4478b1e6cd749bb              |
| metadata                             | {u'KEY': u'VALUE'}                            |
+--------------------------------------+-----------------------------------------------+</literal_block>
                <paragraph>A status of <literal>BUILD</literal> indicates that the instance has started, but is
                    not yet online.</paragraph>
                <paragraph>A status of <literal>ACTIVE</literal> indicates that the instance is active.</paragraph>
            </list_item>
            <list_item>
                <paragraph>Copy the server ID value from the <literal>id</literal> field in the output. Use the
                    ID to get server details or to delete your server.</paragraph>
            </list_item>
            <list_item>
                <paragraph>Copy the administrative password value from the <literal>adminPass</literal> field. Use the
                    password to log in to your server.</paragraph>
                <note>
                    <paragraph>You can also place arbitrary local files into the instance file
                        system at creation time by using the <literal>--file &lt;dst-path=src-path&gt;</literal>
                        option. You can store up to five files. For example, if you have a
                        special authorized keys file named <literal>special_authorized_keysfile</literal> that
                        you want to put on the instance rather than using the regular SSH key
                        injection, you can use the <literal>--file</literal> option as shown in the following
                        example.</paragraph>
                </note>
                <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack server create --image ubuntu-cloudimage --flavor 1 vm-name \
  --file /root/.ssh/authorized_keys=special_authorized_keysfile</literal_block>
            </list_item>
            <list_item>
                <paragraph>Check if the instance is online.</paragraph>
                <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack server list</literal_block>
                <paragraph>The list shows the ID, name, status, and private (and if assigned,
                    public) IP addresses for all instances in the project to which you
                    belong:</paragraph>
                <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">+-------------+----------------------+--------+------------+-------------+------------------+------------+
| ID          | Name                 | Status | Task State | Power State | Networks         | Image Name |
+-------------+----------------------+--------+------------+-------------+------------------+------------+
| 84c6e57d... | myCirrosServer       | ACTIVE | None       | Running     | private=10.0.0.3 | cirros     |
| 8a99547e... | myInstanceFromVolume | ACTIVE | None       | Running     | private=10.0.0.4 | centos     |
+-------------+----------------------+--------+------------+-------------+------------------+------------+</literal_block>
                <paragraph>If the status for the instance is ACTIVE, the instance is online.</paragraph>
            </list_item>
            <list_item>
                <paragraph>To view the available options for the <literal_strong classes="command">openstack server list</literal_strong>
                    command, run the following command:</paragraph>
                <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack help server list</literal_block>
                <note>
                    <paragraph>If you did not provide a key pair, security groups, or rules, you
                        can access the instance only from inside the cloud through VNC. Even
                        pinging the instance is not possible.</paragraph>
                </note>
            </list_item>
        </enumerated_list>
    </section>
</document>

<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/nova/doc/source/admin/default-ports.rst">
    <section ids="compute-service-node-firewall-requirements" names="compute\ service\ node\ firewall\ requirements">
        <title>Compute service node firewall requirements</title>
        <paragraph>Console connections for virtual machines, whether direct or through a
            proxy, are received on ports <literal>5900</literal> to <literal>5999</literal>. The firewall on each
            Compute service node must allow network traffic on these ports.</paragraph>
        <paragraph>This procedure modifies the iptables firewall to allow incoming
            connections to the Compute services.</paragraph>
        <paragraph><strong>Configuring the service-node firewall</strong></paragraph>
        <enumerated_list enumtype="arabic" prefix="" suffix=".">
            <list_item>
                <paragraph>Log in to the server that hosts the Compute service, as root.</paragraph>
            </list_item>
            <list_item>
                <paragraph>Edit the <literal>/etc/sysconfig/iptables</literal> file, to add an INPUT rule that
                    allows TCP traffic on ports from <literal>5900</literal> to <literal>5999</literal>. Make sure the new
                    rule appears before any INPUT rules that REJECT traffic:</paragraph>
                <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">-A INPUT -p tcp -m multiport --dports 5900:5999 -j ACCEPT</literal_block>
            </list_item>
            <list_item>
                <paragraph>Save the changes to the <literal>/etc/sysconfig/iptables</literal> file, and restart the
                    <literal>iptables</literal> service to pick up the changes:</paragraph>
                <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ service iptables restart</literal_block>
            </list_item>
            <list_item>
                <paragraph>Repeat this process for each Compute service node.</paragraph>
            </list_item>
        </enumerated_list>
    </section>
</document>

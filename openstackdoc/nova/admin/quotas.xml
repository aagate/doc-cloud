<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/nova/doc/source/admin/quotas.rst">
    <section ids="manage-compute-service-quotas" names="manage\ compute\ service\ quotas">
        <title>Manage Compute service quotas</title>
        <paragraph>As an administrative user, you can use the <literal_strong classes="command">nova quota-*</literal_strong> commands,
            which are provided by the <literal>python-novaclient</literal> package, to update the Compute
            service quotas for a specific project or project user, as well as update the
            quota defaults for a new project.</paragraph>
        <target refid="index-0"></target>
        <todo_node classes="admonition-todo" ids="index-0">
            <title>Todo</title>
            <paragraph>At some point, probably in Queens, we need to scrub this page and mention
                the microversions that remove the proxy and network-related resource quotas.</paragraph>
        </todo_node>
        <rubric>Compute quota descriptions</rubric>
        <table classes="colwidths-given">
            <tgroup cols="2">
                <colspec colwidth="10"></colspec>
                <colspec colwidth="40"></colspec>
                <thead>
                    <row>
                        <entry>
                            <paragraph>Quota name</paragraph>
                        </entry>
                        <entry>
                            <paragraph>Description</paragraph>
                        </entry>
                    </row>
                </thead>
                <tbody>
                    <row>
                        <entry>
                            <paragraph>cores</paragraph>
                        </entry>
                        <entry>
                            <paragraph>Number of instance cores (VCPUs) allowed per project.</paragraph>
                        </entry>
                    </row>
                    <row>
                        <entry>
                            <paragraph>fixed-ips</paragraph>
                        </entry>
                        <entry>
                            <paragraph>Number of fixed IP addresses allowed per project. This number
                                must be equal to or greater than the number of allowed
                                instances.</paragraph>
                        </entry>
                    </row>
                    <row>
                        <entry>
                            <paragraph>floating-ips</paragraph>
                        </entry>
                        <entry>
                            <paragraph>Number of floating IP addresses allowed per project.</paragraph>
                        </entry>
                    </row>
                    <row>
                        <entry>
                            <paragraph>injected-file-content-bytes</paragraph>
                        </entry>
                        <entry>
                            <paragraph>Number of content bytes allowed per injected file.</paragraph>
                        </entry>
                    </row>
                    <row>
                        <entry>
                            <paragraph>injected-file-path-bytes</paragraph>
                        </entry>
                        <entry>
                            <paragraph>Length of injected file path.</paragraph>
                        </entry>
                    </row>
                    <row>
                        <entry>
                            <paragraph>injected-files</paragraph>
                        </entry>
                        <entry>
                            <paragraph>Number of injected files allowed per project.</paragraph>
                        </entry>
                    </row>
                    <row>
                        <entry>
                            <paragraph>instances</paragraph>
                        </entry>
                        <entry>
                            <paragraph>Number of instances allowed per project.</paragraph>
                        </entry>
                    </row>
                    <row>
                        <entry>
                            <paragraph>key-pairs</paragraph>
                        </entry>
                        <entry>
                            <paragraph>Number of key pairs allowed per user.</paragraph>
                        </entry>
                    </row>
                    <row>
                        <entry>
                            <paragraph>metadata-items</paragraph>
                        </entry>
                        <entry>
                            <paragraph>Number of metadata items allowed per instance.</paragraph>
                        </entry>
                    </row>
                    <row>
                        <entry>
                            <paragraph>ram</paragraph>
                        </entry>
                        <entry>
                            <paragraph>Megabytes of instance ram allowed per project.</paragraph>
                        </entry>
                    </row>
                    <row>
                        <entry>
                            <paragraph>security-groups</paragraph>
                        </entry>
                        <entry>
                            <paragraph>Number of security groups per project.</paragraph>
                        </entry>
                    </row>
                    <row>
                        <entry>
                            <paragraph>security-group-rules</paragraph>
                        </entry>
                        <entry>
                            <paragraph>Number of security group rules per project.</paragraph>
                        </entry>
                    </row>
                    <row>
                        <entry>
                            <paragraph>server-groups</paragraph>
                        </entry>
                        <entry>
                            <paragraph>Number of server groups per project.</paragraph>
                        </entry>
                    </row>
                    <row>
                        <entry>
                            <paragraph>server-group-members</paragraph>
                        </entry>
                        <entry>
                            <paragraph>Number of servers per server group.</paragraph>
                        </entry>
                    </row>
                </tbody>
            </tgroup>
        </table>
        <section ids="view-and-update-compute-quotas-for-a-project" names="view\ and\ update\ compute\ quotas\ for\ a\ project">
            <title>View and update Compute quotas for a project</title>
            <section ids="to-view-and-update-default-quota-values" names="to\ view\ and\ update\ default\ quota\ values">
                <title>To view and update default quota values</title>
                <enumerated_list enumtype="arabic" prefix="" suffix=".">
                    <list_item>
                        <paragraph>List all default quotas for all projects:</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack quota show --default

+-----------------------------+-------+
| Quota                       | Limit |
+-----------------------------+-------+
| instances                   | 10    |
| cores                       | 20    |
| ram                         | 51200 |
| floating_ips                | 10    |
| fixed_ips                   | -1    |
| metadata_items              | 128   |
| injected_files              | 5     |
| injected_file_content_bytes | 10240 |
| injected_file_path_bytes    | 255   |
| key_pairs                   | 100   |
| security_groups             | 10    |
| security_group_rules        | 20    |
| server_groups               | 10    |
| server_group_members        | 10    |
+-----------------------------+-------+</literal_block>
                    </list_item>
                    <list_item>
                        <paragraph>Update a default value for a new project, for example:</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack quota set --instances 15 default</literal_block>
                    </list_item>
                </enumerated_list>
            </section>
            <section ids="to-view-quota-values-for-an-existing-project" names="to\ view\ quota\ values\ for\ an\ existing\ project">
                <title>To view quota values for an existing project</title>
                <enumerated_list enumtype="arabic" prefix="" suffix=".">
                    <list_item>
                        <paragraph>List the currently set quota values for a project:</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack quota show PROJECT_NAME

+-----------------------------+-------+
| Quota                       | Limit |
+-----------------------------+-------+
| instances                   | 10    |
| cores                       | 20    |
| ram                         | 51200 |
| floating_ips                | 10    |
| fixed_ips                   | -1    |
| metadata_items              | 128   |
| injected_files              | 5     |
| injected_file_content_bytes | 10240 |
| injected_file_path_bytes    | 255   |
| key_pairs                   | 100   |
| security_groups             | 10    |
| security_group_rules        | 20    |
| server_groups               | 10    |
| server_group_members        | 10    |
+-----------------------------+-------+</literal_block>
                    </list_item>
                </enumerated_list>
            </section>
            <section ids="to-update-quota-values-for-an-existing-project" names="to\ update\ quota\ values\ for\ an\ existing\ project">
                <title>To update quota values for an existing project</title>
                <enumerated_list enumtype="arabic" prefix="" suffix=".">
                    <list_item>
                        <paragraph>Obtain the project ID.</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ project=$(openstack project show -f value -c id PROJECT_NAME)</literal_block>
                    </list_item>
                    <list_item>
                        <paragraph>Update a particular quota value.</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack quota set --QUOTA_NAME QUOTA_VALUE PROJECT_OR_CLASS</literal_block>
                        <paragraph>For example:</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack quota set --floating-ips 20 PROJECT_OR_CLASS
$ openstack quota show PROJECT_NAME
+-----------------------------+-------+
| Quota                       | Limit |
+-----------------------------+-------+
| instances                   | 10    |
| cores                       | 20    |
| ram                         | 51200 |
| floating_ips                | 20    |
| fixed_ips                   | -1    |
| metadata_items              | 128   |
| injected_files              | 5     |
| injected_file_content_bytes | 10240 |
| injected_file_path_bytes    | 255   |
| key_pairs                   | 100   |
| security_groups             | 10    |
| security_group_rules        | 20    |
| server_groups               | 10    |
| server_group_members        | 10    |
+-----------------------------+-------+</literal_block>
                        <note>
                            <paragraph>To view a list of options for the <literal_strong classes="command">openstack quota set</literal_strong> command,
                                run:</paragraph>
                            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack help quota set</literal_block>
                        </note>
                    </list_item>
                </enumerated_list>
            </section>
        </section>
        <section ids="view-and-update-compute-quotas-for-a-project-user" names="view\ and\ update\ compute\ quotas\ for\ a\ project\ user">
            <title>View and update Compute quotas for a project user</title>
            <section ids="to-view-quota-values-for-a-project-user" names="to\ view\ quota\ values\ for\ a\ project\ user">
                <title>To view quota values for a project user</title>
                <enumerated_list enumtype="arabic" prefix="" suffix=".">
                    <list_item>
                        <paragraph>Place the user ID in a usable variable.</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ projectUser=$(openstack user show -f value -c id USER_NAME)</literal_block>
                    </list_item>
                    <list_item>
                        <paragraph>Place the user's project ID in a usable variable, as follows:</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ project=$(openstack project show -f value -c id PROJECT_NAME)</literal_block>
                    </list_item>
                    <list_item>
                        <paragraph>List the currently set quota values for a project user.</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ nova quota-show --user $projectUser --tenant $project</literal_block>
                        <paragraph>For example:</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ nova quota-show --user $projecUser --tenant $project
+-----------------------------+-------+
| Quota                       | Limit |
+-----------------------------+-------+
| instances                   | 10    |
| cores                       | 20    |
| ram                         | 51200 |
| floating_ips                | 20    |
| fixed_ips                   | -1    |
| metadata_items              | 128   |
| injected_files              | 5     |
| injected_file_content_bytes | 10240 |
| injected_file_path_bytes    | 255   |
| key_pairs                   | 100   |
| security_groups             | 10    |
| security_group_rules        | 20    |
| server_groups               | 10    |
| server_group_members        | 10    |
+-----------------------------+-------+</literal_block>
                    </list_item>
                </enumerated_list>
            </section>
            <section ids="to-update-quota-values-for-a-project-user" names="to\ update\ quota\ values\ for\ a\ project\ user">
                <title>To update quota values for a project user</title>
                <enumerated_list enumtype="arabic" prefix="" suffix=".">
                    <list_item>
                        <paragraph>Place the user ID in a usable variable.</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ projectUser=$(openstack user show -f value -c id USER_NAME)</literal_block>
                    </list_item>
                    <list_item>
                        <paragraph>Place the user's project ID in a usable variable, as follows:</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ project=$(openstack project show -f value -c id PROJECT_NAME)</literal_block>
                    </list_item>
                    <list_item>
                        <paragraph>Update a particular quota value, as follows:</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ nova quota-update  --user $projectUser --QUOTA_NAME QUOTA_VALUE $project</literal_block>
                        <paragraph>For example:</paragraph>
                        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ nova quota-update --user $projectUser --floating-ips 12 $project
$ nova quota-show --user $projectUser --tenant $project
+-----------------------------+-------+
| Quota                       | Limit |
+-----------------------------+-------+
| instances                   | 10    |
| cores                       | 20    |
| ram                         | 51200 |
| floating_ips                | 12    |
| fixed_ips                   | -1    |
| metadata_items              | 128   |
| injected_files              | 5     |
| injected_file_content_bytes | 10240 |
| injected_file_path_bytes    | 255   |
| key_pairs                   | 100   |
| security_groups             | 10    |
| security_group_rules        | 20    |
| server_groups               | 10    |
| server_group_members        | 10    |
+-----------------------------+-------+</literal_block>
                        <note>
                            <paragraph>To view a list of options for the <literal_strong classes="command">nova quota-update</literal_strong> command,
                                run:</paragraph>
                            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ nova help quota-update</literal_block>
                        </note>
                    </list_item>
                </enumerated_list>
            </section>
            <section ids="to-display-the-current-quota-usage-for-a-project-user" names="to\ display\ the\ current\ quota\ usage\ for\ a\ project\ user">
                <title>To display the current quota usage for a project user</title>
                <paragraph>Use <literal_strong classes="command">nova limits</literal_strong> to get a list of the
                    current quota values and the current quota usage:</paragraph>
                <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ nova limits --tenant PROJET_NAME

+------+-----+-------+--------+------+----------------+
| Verb | URI | Value | Remain | Unit | Next_Available |
+------+-----+-------+--------+------+----------------+
+------+-----+-------+--------+------+----------------+

+--------------------+------+-------+
| Name               | Used | Max   |
+--------------------+------+-------+
| Cores              | 0    | 20    |
| Instances          | 0    | 10    |
| Keypairs           | -    | 100   |
| Personality        | -    | 5     |
| Personality Size   | -    | 10240 |
| RAM                | 0    | 51200 |
| Server Meta        | -    | 128   |
| ServerGroupMembers | -    | 10    |
| ServerGroups       | 0    | 10    |
+--------------------+------+-------+</literal_block>
                <note>
                    <paragraph>The <literal_strong classes="command">nova limits</literal_strong> command generates an empty
                        table as a result of the Compute API, which prints an
                        empty list for backward compatibility purposes.</paragraph>
                </note>
            </section>
        </section>
    </section>
</document>

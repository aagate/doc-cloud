<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/nova/doc/source/admin/common/nova-show-usage-statistics-for-hosts-instances.rst">
    <section ids="show-usage-statistics-for-hosts-and-instances" names="show\ usage\ statistics\ for\ hosts\ and\ instances">
        <title>Show usage statistics for hosts and instances</title>
        <paragraph>You can show basic statistics on resource usage for hosts and instances.</paragraph>
        <note>
            <paragraph>For more sophisticated monitoring, see the
                <reference name="ceilometer" refuri="https://launchpad.net/ceilometer">ceilometer</reference> project. You can
                also use tools, such as <reference name="Ganglia" refuri="http://ganglia.info/">Ganglia</reference> or
                <reference name="Graphite" refuri="http://graphite.wikidot.com/">Graphite</reference>, to gather more detailed
                data.</paragraph>
        </note>
        <section ids="show-host-usage-statistics" names="show\ host\ usage\ statistics">
            <title>Show host usage statistics</title>
            <paragraph>The following examples show the host usage statistics for a host called
                <literal>devstack</literal>.</paragraph>
            <bullet_list bullet="*">
                <list_item>
                    <paragraph>List the hosts and the nova-related services that run on them:</paragraph>
                    <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack host list
+-----------+-------------+----------+
| Host Name | Service     | Zone     |
+-----------+-------------+----------+
| devstack  | conductor   | internal |
| devstack  | compute     | nova     |
| devstack  | cert        | internal |
| devstack  | network     | internal |
| devstack  | scheduler   | internal |
| devstack  | consoleauth | internal |
+-----------+-------------+----------+</literal_block>
                </list_item>
                <list_item>
                    <paragraph>Get a summary of resource usage of all of the instances running on the host:</paragraph>
                    <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack host show devstack
+----------+----------------------------------+-----+-----------+---------+
| Host     | Project                          | CPU | MEMORY MB | DISK GB |
+----------+----------------------------------+-----+-----------+---------+
| devstack | (total)                          | 2   | 4003      | 157     |
| devstack | (used_now)                       | 3   | 5120      | 40      |
| devstack | (used_max)                       | 3   | 4608      | 40      |
| devstack | b70d90d65e464582b6b2161cf3603ced | 1   | 512       | 0       |
| devstack | 66265572db174a7aa66eba661f58eb9e | 2   | 4096      | 40      |
+----------+----------------------------------+-----+-----------+---------+</literal_block>
                    <paragraph>The <literal>CPU</literal> column shows the sum of the virtual CPUs for instances running on
                        the host.</paragraph>
                    <paragraph>The <literal>MEMORY MB</literal> column shows the sum of the memory (in MB) allocated to the
                        instances that run on the host.</paragraph>
                    <paragraph>The <literal>DISK GB</literal> column shows the sum of the root and ephemeral disk sizes (in
                        GB) of the instances that run on the host.</paragraph>
                    <paragraph>The row that has the value <literal>used_now</literal> in the <literal>PROJECT</literal> column shows the
                        sum of the resources allocated to the instances that run on the host, plus
                        the resources allocated to the virtual machine of the host itself.</paragraph>
                    <paragraph>The row that has the value <literal>used_max</literal> in the <literal>PROJECT</literal> column shows the
                        sum of the resources allocated to the instances that run on the host.</paragraph>
                    <note>
                        <paragraph>These values are computed by using information about the flavors of the
                            instances that run on the hosts. This command does not query the CPU
                            usage, memory usage, or hard disk usage of the physical host.</paragraph>
                    </note>
                </list_item>
            </bullet_list>
        </section>
        <section ids="show-instance-usage-statistics" names="show\ instance\ usage\ statistics">
            <title>Show instance usage statistics</title>
            <bullet_list bullet="*">
                <list_item>
                    <paragraph>Get CPU, memory, I/O, and network statistics for an instance.</paragraph>
                    <enumerated_list enumtype="arabic" prefix="" suffix=".">
                        <list_item>
                            <paragraph>List instances:</paragraph>
                            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack server list
+----------+----------------------+--------+------------+-------------+------------------+------------+
| ID       | Name                 | Status | Task State | Power State | Networks         | Image Name |
+----------+----------------------+--------+------------+-------------+------------------+------------+
| 84c6e... | myCirrosServer       | ACTIVE | None       | Running     | private=10.0.0.3 | cirros     |
| 8a995... | myInstanceFromVolume | ACTIVE | None       | Running     | private=10.0.0.4 | ubuntu     |
+----------+----------------------+--------+------------+-------------+------------------+------------+</literal_block>
                        </list_item>
                        <list_item>
                            <paragraph>Get diagnostic statistics:</paragraph>
                            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ nova diagnostics myCirrosServer
+---------------------------+--------+
| Property                  | Value  |
+---------------------------+--------+
| memory                    | 524288 |
| memory-actual             | 524288 |
| memory-rss                | 6444   |
| tap1fec8fb8-7a_rx         | 22137  |
| tap1fec8fb8-7a_rx_drop    | 0      |
| tap1fec8fb8-7a_rx_errors  | 0      |
| tap1fec8fb8-7a_rx_packets | 166    |
| tap1fec8fb8-7a_tx         | 18032  |
| tap1fec8fb8-7a_tx_drop    | 0      |
| tap1fec8fb8-7a_tx_errors  | 0      |
| tap1fec8fb8-7a_tx_packets | 130    |
| vda_errors                | -1     |
| vda_read                  | 2048   |
| vda_read_req              | 2      |
| vda_write                 | 182272 |
| vda_write_req             | 74     |
+---------------------------+--------+</literal_block>
                        </list_item>
                    </enumerated_list>
                </list_item>
                <list_item>
                    <paragraph>Get summary statistics for each project:</paragraph>
                    <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack usage list
Usage from 2013-06-25 to 2013-07-24:
+---------+---------+--------------+-----------+---------------+
| Project | Servers | RAM MB-Hours | CPU Hours | Disk GB-Hours |
+---------+---------+--------------+-----------+---------------+
| demo    | 1       | 344064.44    | 672.00    | 0.00          |
| stack   | 3       | 671626.76    | 327.94    | 6558.86       |
+---------+---------+--------------+-----------+---------------+</literal_block>
                </list_item>
            </bullet_list>
        </section>
    </section>
</document>

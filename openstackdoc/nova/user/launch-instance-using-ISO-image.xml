<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/nova/doc/source/user/launch-instance-using-ISO-image.rst">
    <section ids="launch-an-instance-using-iso-image" names="launch\ an\ instance\ using\ iso\ image">
        <title>Launch an instance using ISO image</title>
        <target refid="boot-instance-from-iso-image"></target>
        <section ids="boot-an-instance-from-an-iso-image boot-instance-from-iso-image" names="boot\ an\ instance\ from\ an\ iso\ image boot_instance_from_iso_image">
            <title>Boot an instance from an ISO image</title>
            <paragraph>OpenStack supports booting instances using ISO images. But before you
                make such instances functional, use the <literal_strong classes="command">openstack server create</literal_strong>
                command with the following parameters to boot an instance:</paragraph>
            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack server create --image ubuntu-14.04.2-server-amd64.iso \
  --nic net-id = NETWORK_UUID \
  --flavor 2 INSTANCE_NAME
+--------------------------------------+--------------------------------------------+
| Field                                | Value                                      |
+--------------------------------------+--------------------------------------------+
| OS-DCF:diskConfig                    | MANUAL                                     |
| OS-EXT-AZ:availability_zone          | nova                                       |
| OS-EXT-SRV-ATTR:host                 | -                                          |
| OS-EXT-SRV-ATTR:hypervisor_hostname  | -                                          |
| OS-EXT-SRV-ATTR:instance_name        | instance-00000004                          |
| OS-EXT-STS:power_state               | 0                                          |
| OS-EXT-STS:task_state                | scheduling                                 |
| OS-EXT-STS:vm_state                  | building                                   |
| OS-SRV-USG:launched_at               | -                                          |
| OS-SRV-USG:terminated_at             | -                                          |
| accessIPv4                           |                                            |
| accessIPv6                           |                                            |
| adminPass                            | ZaiYeC8iucgU                               |
| config_drive                         |                                            |
| created                              | 2015-06-01T16:34:50Z                       |
| flavor                               | m1.small (2)                               |
| hostId                               |                                            |
| id                                   | 1e1797f3-1662-49ff-ae8c-a77e82ee1571       |
| image                                | ubuntu-14.04.2-server-amd64.iso            |
| key_name                             | -                                          |
| metadata                             | {}                                         |
| name                                 | INSTANCE_NAME                              |
| os-extended-volumes:volumes_attached | []                                         |
| progress                             | 0                                          |
| security_groups                      | default                                    |
| status                               | BUILD                                      |
| tenant_id                            | ccef9e62b1e645df98728fb2b3076f27           |
| updated                              | 2014-05-09T16:34:51Z                       |
| user_id                              | fef060ae7bfd4024b3edb97dff59017a           |
+--------------------------------------+--------------------------------------------+</literal_block>
            <paragraph>In this command, <literal>ubuntu-14.04.2-server-amd64.iso</literal> is the ISO image,
                and <literal>INSTANCE_NAME</literal> is the name of the new instance. <literal>NETWORK_UUID</literal>
                is a valid network id in your system.</paragraph>
            <paragraph>Create a bootable volume for the instance to reside on after shutdown.</paragraph>
            <enumerated_list enumtype="arabic" prefix="" suffix=".">
                <list_item>
                    <paragraph>Create the volume:</paragraph>
                    <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack volume create \
  --size &lt;SIZE_IN_GB&gt; \
  --bootable VOLUME_NAME</literal_block>
                </list_item>
                <list_item>
                    <paragraph>Attach the instance to the volume:</paragraph>
                    <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack server add volume
  INSTANCE_NAME \
  VOLUME_NAME \
  --device /dev/vda</literal_block>
                </list_item>
            </enumerated_list>
            <note>
                <paragraph>You need the Block Storage service to preserve the instance after
                    shutdown. The <literal>--block-device</literal> argument, used with the
                    legacy <literal_strong classes="command">nova boot</literal_strong>, will not work with the OpenStack
                    <literal_strong classes="command">openstack server create</literal_strong> command. Instead, the
                    <literal_strong classes="command">openstack volume create</literal_strong> and
                    <literal_strong classes="command">openstack server add volume</literal_strong> commands create persistent storage.</paragraph>
            </note>
            <paragraph>After the instance is successfully launched, connect to the instance
                using a remote console and follow the instructions to install the
                system as using ISO images on regular computers. When the installation
                is finished and system is rebooted, the instance asks you again to
                install the operating system, which means your instance is not usable.
                If you have problems with image creation, please check the
                <reference name="Virtual Machine Image Guide" refuri="https://docs.openstack.org/image-guide/create-images-manually.html">Virtual Machine Image Guide</reference><target ids="virtual-machine-image-guide" names="virtual\ machine\ image\ guide" refuri="https://docs.openstack.org/image-guide/create-images-manually.html"></target>
                for reference.</paragraph>
            <target refid="make-instance-booted-from-iso-image-functional"></target>
        </section>
        <section ids="make-the-instances-booted-from-iso-image-functional make-instance-booted-from-iso-image-functional" names="make\ the\ instances\ booted\ from\ iso\ image\ functional make_instance_booted_from_iso_image_functional">
            <title>Make the instances booted from ISO image functional</title>
            <paragraph>Now complete the following steps to make your instances created
                using ISO image actually functional.</paragraph>
            <enumerated_list enumtype="arabic" prefix="" suffix=".">
                <list_item>
                    <paragraph>Delete the instance using the following command.</paragraph>
                    <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack server delete INSTANCE_NAME</literal_block>
                </list_item>
                <list_item>
                    <paragraph>After you delete the instance, the system you have just installed
                        using your ISO image remains, because the parameter
                        <literal>shutdown=preserve</literal> was set, so run the following command.</paragraph>
                    <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack volume list
+--------------------------+-------------------------+-----------+------+-------------+
| ID                       | Display Name            | Status    | Size | Attached to |
+--------------------------+-------------------------+-----------+------+-------------+
| 8edd7c97-1276-47a5-9563- |dc01d873-d0f1-40b6-bfcc- | available |   10 |             |
| 1025f4264e4f             | 26a8d955a1d9-blank-vol  |           |      |             |
+--------------------------+-------------------------+-----------+------+-------------+</literal_block>
                    <paragraph>You get a list with all the volumes in your system. In this list,
                        you can find the volume that is attached to your ISO created
                        instance, with the false bootable property.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Upload the volume to glance.</paragraph>
                    <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack image create --volume SOURCE_VOLUME IMAGE_NAME
$ openstack image list
+-------------------+------------+--------+
| ID                | Name       | Status |
+-------------------+------------+--------+
| 74303284-f802-... | IMAGE_NAME | active |
+-------------------+------------+--------+</literal_block>
                    <paragraph>The <literal>SOURCE_VOLUME</literal> is the UUID or a name of the volume that is attached to
                        your ISO created instance, and the <literal>IMAGE_NAME</literal> is the name that
                        you give to your new image.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>After the image is successfully uploaded, you can use the new
                        image to boot instances.</paragraph>
                    <paragraph>The instances launched using this image contain the system that
                        you have just installed using the ISO image.</paragraph>
                </list_item>
            </enumerated_list>
        </section>
    </section>
</document>

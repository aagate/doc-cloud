<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/cinder/doc/source/admin/blockstorage-ratelimit-volume-copy-bandwidth.rst">
    <target refid="ratelimit-volume-copy-bandwidth"></target>
    <section ids="rate-limit-volume-copy-bandwidth ratelimit-volume-copy-bandwidth" names="rate-limit\ volume\ copy\ bandwidth ratelimit_volume_copy_bandwidth">
        <title>Rate-limit volume copy bandwidth</title>
        <paragraph>When you create a new volume from an image or an existing volume, or
            when you upload a volume image to the Image service, large data copy
            may stress disk and network bandwidth. To mitigate slow down of data
            access from the instances, OpenStack Block Storage supports rate-limiting
            of volume data copy bandwidth.</paragraph>
        <section ids="configure-volume-copy-bandwidth-limit" names="configure\ volume\ copy\ bandwidth\ limit">
            <title>Configure volume copy bandwidth limit</title>
            <paragraph>To configure the volume copy bandwidth limit, set the
                <literal>volume_copy_bps_limit</literal> option in the configuration groups for each
                back end in the <literal>cinder.conf</literal> file. This option takes the integer of
                maximum bandwidth allowed for volume data copy in byte per second. If
                this option is set to <literal>0</literal>, the rate-limit is disabled.</paragraph>
            <paragraph>While multiple volume data copy operations are running in the same back
                end, the specified bandwidth is divided to each copy.</paragraph>
            <paragraph>Example <literal>cinder.conf</literal> configuration file to limit volume copy bandwidth
                of <literal>lvmdriver-1</literal> up to 100 MiB/s:</paragraph>
            <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">[lvmdriver-1]
volume_group=cinder-volumes-1
volume_driver=cinder.volume.drivers.lvm.LVMVolumeDriver
volume_backend_name=LVM
volume_copy_bps_limit=104857600</literal_block>
            <note>
                <paragraph>This feature requires libcgroup to set up blkio cgroup for disk I/O
                    bandwidth limit. The libcgroup is provided by the cgroup-bin package
                    in Debian and Ubuntu, or by the libcgroup-tools package in Fedora,
                    Red Hat Enterprise Linux, CentOS, openSUSE, and SUSE Linux Enterprise.</paragraph>
            </note>
            <note>
                <paragraph>Some back ends which use remote file systems such as NFS are not
                    supported by this feature.</paragraph>
            </note>
        </section>
    </section>
</document>

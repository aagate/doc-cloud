<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/cinder/doc/source/admin/blockstorage-groups.rst">
    <section ids="generic-volume-groups" names="generic\ volume\ groups">
        <title>Generic volume groups</title>
        <paragraph>Generic volume group support is available in OpenStack Block Storage (cinder)
            since the Newton release. The support is added for creating group types and
            group specs, creating groups of volumes, and creating snapshots of groups.
            The group operations can be performed using the Block Storage command line.</paragraph>
        <paragraph>A group type is a type for a group just like a volume type for a volume.
            A group type can also have associated group specs similar to extra specs
            for a volume type.</paragraph>
        <paragraph>In cinder, there is a group construct called <title_reference>consistency group</title_reference>. Consistency
            groups only support consistent group snapshots and only a small number of
            drivers can support it. The following is a list of drivers that support
            consistency groups and the release when the support was added:</paragraph>
        <bullet_list bullet="-">
            <list_item>
                <paragraph>Juno: EMC VNX</paragraph>
            </list_item>
            <list_item>
                <paragraph>Kilo: EMC VMAX, IBM (GPFS, Storwize, SVC, and XIV), ProphetStor, Pure</paragraph>
            </list_item>
            <list_item>
                <paragraph>Liberty: Dell Storage Center, EMC XtremIO, HPE 3Par and LeftHand</paragraph>
            </list_item>
            <list_item>
                <paragraph>Mitaka: EMC ScaleIO, NetApp Data ONTAP and E-Series, SolidFire</paragraph>
            </list_item>
            <list_item>
                <paragraph>Newton: CoprHD, FalconStor, Huawei</paragraph>
            </list_item>
        </bullet_list>
        <paragraph>Consistency group cannot be extended easily to serve other purposes. A tenant
            may want to put volumes used in the same application together in a group so
            that it is easier to manage them together, and this group of volumes may or
            may not support consistent group snapshot. Generic volume group is introduced
            to solve this problem.</paragraph>
        <paragraph>There is a plan to migrate existing consistency group operations to use
            generic volume group operations in future releases. More information can be
            found in <reference name="Cinder specs" refuri="https://github.com/openstack/cinder-specs/blob/master/specs/newton/group-snapshots.rst">Cinder specs</reference><target ids="cinder-specs" names="cinder\ specs" refuri="https://github.com/openstack/cinder-specs/blob/master/specs/newton/group-snapshots.rst"></target>.</paragraph>
        <note>
            <paragraph>Only Block Storage V3 API supports groups. You can
                specify <literal>--os-volume-api-version 3.x</literal> when using the <title_reference>cinder</title_reference>
                command line for group operations where <title_reference>3.x</title_reference> contains a microversion value
                for that command. The generic volume group feature was completed in several
                patches. As a result, the minimum required microversion is different for
                group types, groups, and group snapshots APIs.</paragraph>
        </note>
        <paragraph>The following group type operations are supported:</paragraph>
        <bullet_list bullet="-">
            <list_item>
                <paragraph>Create a group type.</paragraph>
            </list_item>
            <list_item>
                <paragraph>Delete a group type.</paragraph>
            </list_item>
            <list_item>
                <paragraph>Set group spec for a group type.</paragraph>
            </list_item>
            <list_item>
                <paragraph>Unset group spec for a group type.</paragraph>
            </list_item>
            <list_item>
                <paragraph>List group types.</paragraph>
            </list_item>
            <list_item>
                <paragraph>Show a group type details.</paragraph>
            </list_item>
            <list_item>
                <paragraph>Update a group.</paragraph>
            </list_item>
            <list_item>
                <paragraph>List group types and group specs.</paragraph>
            </list_item>
        </bullet_list>
        <paragraph>The following group and group snapshot operations are supported:</paragraph>
        <bullet_list bullet="-">
            <list_item>
                <paragraph>Create a group, given group type and volume types.</paragraph>
                <note>
                    <paragraph>A group must have one group type. A group can support more than one
                        volume type. The scheduler is responsible for finding a back end that
                        can support the given group type and volume types.</paragraph>
                    <paragraph>A group can only contain volumes hosted by the same back end.</paragraph>
                    <paragraph>A group is empty upon its creation. Volumes need to be created and added
                        to it later.</paragraph>
                </note>
            </list_item>
            <list_item>
                <paragraph>Show a group.</paragraph>
            </list_item>
            <list_item>
                <paragraph>List groups.</paragraph>
            </list_item>
            <list_item>
                <paragraph>Delete a group.</paragraph>
            </list_item>
            <list_item>
                <paragraph>Modify a group.</paragraph>
            </list_item>
            <list_item>
                <paragraph>Create a volume and add it to a group.</paragraph>
            </list_item>
            <list_item>
                <paragraph>Create a snapshot for a group.</paragraph>
            </list_item>
            <list_item>
                <paragraph>Show a group snapshot.</paragraph>
            </list_item>
            <list_item>
                <paragraph>List group snapshots.</paragraph>
            </list_item>
            <list_item>
                <paragraph>Delete a group snapshot.</paragraph>
            </list_item>
            <list_item>
                <paragraph>Create a group from a group snapshot.</paragraph>
            </list_item>
            <list_item>
                <paragraph>Create a group from a source group.</paragraph>
            </list_item>
        </bullet_list>
        <paragraph>The following operations are not allowed if a volume is in a group:</paragraph>
        <bullet_list bullet="-">
            <list_item>
                <paragraph>Volume migration.</paragraph>
            </list_item>
            <list_item>
                <paragraph>Volume retype.</paragraph>
            </list_item>
            <list_item>
                <paragraph>Volume deletion.</paragraph>
                <note>
                    <paragraph>A group has to be deleted as a whole with all the volumes.</paragraph>
                </note>
            </list_item>
        </bullet_list>
        <paragraph>The following operations are not allowed if a volume snapshot is in a
            group snapshot:</paragraph>
        <bullet_list bullet="-">
            <list_item>
                <paragraph>Volume snapshot deletion.</paragraph>
                <note>
                    <paragraph>A group snapshot has to be deleted as a whole with all the volume
                        snapshots.</paragraph>
                </note>
            </list_item>
        </bullet_list>
        <paragraph>The details of group type operations are shown in the following. The minimum
            microversion to support group type and group specs is 3.11:</paragraph>
        <paragraph><strong>Create a group type</strong>:</paragraph>
        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">cinder --os-volume-api-version 3.11 group-type-create
[--description DESCRIPTION]
[--is-public IS_PUBLIC]
NAME</literal_block>
        <note>
            <paragraph>The parameter <literal>NAME</literal> is required. The
                <literal>--is-public IS_PUBLIC</literal> determines whether the group type is
                accessible to the public. It is <literal>True</literal> by default. By default, the
                policy on privileges for creating a group type is admin-only.</paragraph>
        </note>
        <paragraph><strong>Show a group type</strong>:</paragraph>
        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">cinder --os-volume-api-version 3.11 group-type-show
GROUP_TYPE</literal_block>
        <note>
            <paragraph>The parameter <literal>GROUP_TYPE</literal> is the name or UUID of a group type.</paragraph>
        </note>
        <paragraph><strong>List group types</strong>:</paragraph>
        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">cinder --os-volume-api-version 3.11 group-type-list</literal_block>
        <note>
            <paragraph>Only admin can see private group types.</paragraph>
        </note>
        <paragraph><strong>Update a group type</strong>:</paragraph>
        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">cinder --os-volume-api-version 3.11 group-type-update
[--name NAME]
[--description DESCRIPTION]
[--is-public IS_PUBLIC]
GROUP_TYPE_ID</literal_block>
        <note>
            <paragraph>The parameter <literal>GROUP_TYPE_ID</literal> is the UUID of a group type. By default,
                the policy on privileges for updating a group type is admin-only.</paragraph>
        </note>
        <paragraph><strong>Delete group type or types</strong>:</paragraph>
        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">cinder --os-volume-api-version 3.11 group-type-delete
GROUP_TYPE [GROUP_TYPE ...]</literal_block>
        <note>
            <paragraph>The parameter <literal>GROUP_TYPE</literal> is name or UUID of the group type or
                group types to be deleted. By default, the policy on privileges for
                deleting a group type is admin-only.</paragraph>
        </note>
        <paragraph><strong>Set or unset group spec for a group type</strong>:</paragraph>
        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">cinder --os-volume-api-version 3.11 group-type-key
GROUP_TYPE ACTION KEY=VALUE [KEY=VALUE ...]</literal_block>
        <note>
            <paragraph>The parameter <literal>GROUP_TYPE</literal> is the name or UUID of a group type. Valid
                values for the parameter <literal>ACTION</literal> are <literal>set</literal> or <literal>unset</literal>.
                <literal>KEY=VALUE</literal> is the group specs key and value pair to set or unset.
                For unset, specify only the key. By default, the policy on privileges
                for setting or unsetting group specs key is admin-only.</paragraph>
        </note>
        <paragraph><strong>List group types and group specs</strong>:</paragraph>
        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">cinder --os-volume-api-version 3.11 group-specs-list</literal_block>
        <note>
            <paragraph>By default, the policy on privileges for seeing group specs is admin-only.</paragraph>
        </note>
        <paragraph>The details of group operations are shown in the following. The minimum
            microversion to support groups operations is 3.13.</paragraph>
        <paragraph><strong>Create a group</strong>:</paragraph>
        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">cinder --os-volume-api-version 3.13 group-create
[--name NAME]
[--description DESCRIPTION]
[--availability-zone AVAILABILITY_ZONE]
GROUP_TYPE VOLUME_TYPES</literal_block>
        <note>
            <paragraph>The parameters <literal>GROUP_TYPE</literal> and <literal>VOLUME_TYPES</literal> are required.
                <literal>GROUP_TYPE</literal> is the name or UUID of a group type. <literal>VOLUME_TYPES</literal>
                can be a list of names or UUIDs of volume types separated by commas
                without spaces in between. For example,
                <literal>volumetype1,volumetype2,volumetype3.</literal>.</paragraph>
        </note>
        <paragraph><strong>Show a group</strong>:</paragraph>
        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">cinder --os-volume-api-version 3.13 group-show
GROUP</literal_block>
        <note>
            <paragraph>The parameter <literal>GROUP</literal> is the name or UUID of a group.</paragraph>
        </note>
        <paragraph><strong>List groups</strong>:</paragraph>
        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">cinder --os-volume-api-version 3.13 group-list
[--all-tenants [&lt;0|1&gt;]]</literal_block>
        <note>
            <paragraph><literal>--all-tenants</literal> specifies whether to list groups for all tenants.
                Only admin can use this option.</paragraph>
        </note>
        <paragraph><strong>Create a volume and add it to a group</strong>:</paragraph>
        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">cinder --os-volume-api-version 3.13 create
--volume-type VOLUME_TYPE
--group-id GROUP_ID SIZE</literal_block>
        <note>
            <paragraph>When creating a volume and adding it to a group, the parameters
                <literal>VOLUME_TYPE</literal> and <literal>GROUP_ID</literal> must be provided. This is because a group
                can support more than one volume type.</paragraph>
        </note>
        <paragraph><strong>Delete a group</strong>:</paragraph>
        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">cinder --os-volume-api-version 3.13 group-delete
[--delete-volumes]
GROUP [GROUP ...]</literal_block>
        <note>
            <paragraph><literal>--delete-volumes</literal> allows or disallows groups to be deleted
                if they are not empty. If the group is empty, it can be deleted without
                <literal>--delete-volumes</literal>. If the group is not empty, the flag is
                required for it to be deleted. When the flag is specified, the group
                and all volumes in the group will be deleted.</paragraph>
        </note>
        <paragraph><strong>Modify a group</strong>:</paragraph>
        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">cinder --os-volume-api-version 3.13 group-update
[--name NAME]
[--description DESCRIPTION]
[--add-volumes UUID1,UUID2,......]
[--remove-volumes UUID3,UUID4,......]
GROUP</literal_block>
        <note>
            <paragraph>The parameter <literal>UUID1,UUID2,......</literal> is the UUID of one or more volumes
                to be added to the group, separated by commas. Similarly the parameter
                <literal>UUID3,UUID4,......</literal> is the UUID of one or more volumes to be removed
                from the group, separated by commas.</paragraph>
        </note>
        <paragraph>The details of group snapshots operations are shown in the following. The
            minimum microversion to support group snapshots operations is 3.14.</paragraph>
        <paragraph><strong>Create a snapshot for a group</strong>:</paragraph>
        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">cinder --os-volume-api-version 3.14 group-snapshot-create
[--name NAME]
[--description DESCRIPTION]
GROUP</literal_block>
        <note>
            <paragraph>The parameter <literal>GROUP</literal> is the name or UUID of a group.</paragraph>
        </note>
        <paragraph><strong>Show a group snapshot</strong>:</paragraph>
        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">cinder --os-volume-api-version 3.14 group-snapshot-show
GROUP_SNAPSHOT</literal_block>
        <note>
            <paragraph>The parameter <literal>GROUP_SNAPSHOT</literal> is the name or UUID of a group snapshot.</paragraph>
        </note>
        <paragraph><strong>List group snapshots</strong>:</paragraph>
        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">cinder --os-volume-api-version 3.14 group-snapshot-list
[--all-tenants [&lt;0|1&gt;]]
[--status STATUS]
[--group-id GROUP_ID]</literal_block>
        <note>
            <paragraph><literal>--all-tenants</literal> specifies whether to list group snapshots for
                all tenants. Only admin can use this option. <literal>--status STATUS</literal>
                filters results by a status. <literal>--group-id GROUP_ID</literal> filters
                results by a group id.</paragraph>
        </note>
        <paragraph><strong>Delete group snapshot</strong>:</paragraph>
        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">cinder --os-volume-api-version 3.14 group-snapshot-delete
GROUP_SNAPSHOT [GROUP_SNAPSHOT ...]</literal_block>
        <note>
            <paragraph>The parameter <literal>GROUP_SNAPSHOT</literal> specifies the name or UUID of one or more
                group snapshots to be deleted.</paragraph>
        </note>
        <paragraph><strong>Create a group from a group snapshot or a source group</strong>:</paragraph>
        <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ cinder --os-volume-api-version 3.14 group-create-from-src
[--group-snapshot GROUP_SNAPSHOT]
[--source-group SOURCE_GROUP]
[--name NAME]
[--description DESCRIPTION]</literal_block>
        <note>
            <paragraph>The parameter <literal>GROUP_SNAPSHOT</literal> is a name or UUID of a group snapshot.
                The parameter <literal>SOURCE_GROUP</literal> is a name or UUID of a source group.
                Either <literal>GROUP_SNAPSHOT</literal> or <literal>SOURCE_GROUP</literal> must be specified, but not
                both.</paragraph>
        </note>
    </section>
</document>

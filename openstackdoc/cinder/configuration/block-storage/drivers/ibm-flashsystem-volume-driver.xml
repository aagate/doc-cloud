<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/cinder/doc/source/configuration/block-storage/drivers/ibm-flashsystem-volume-driver.rst">
    <section ids="ibm-flashsystem-volume-driver" names="ibm\ flashsystem\ volume\ driver">
        <title>IBM FlashSystem volume driver</title>
        <paragraph>The volume driver for FlashSystem provides OpenStack Block Storage hosts
            with access to IBM FlashSystems.</paragraph>
        <section ids="configure-flashsystem" names="configure\ flashsystem">
            <title>Configure FlashSystem</title>
            <section ids="configure-storage-array" names="configure\ storage\ array">
                <title>Configure storage array</title>
                <paragraph>The volume driver requires a pre-defined array. You must create an
                    array on the FlashSystem before using the volume driver. An existing array
                    can also be used and existing data will not be deleted.</paragraph>
                <note>
                    <paragraph>FlashSystem can only create one array, so no configuration option is
                        needed for the IBM FlashSystem driver to assign it.</paragraph>
                </note>
            </section>
            <section ids="configure-user-authentication-for-the-driver" names="configure\ user\ authentication\ for\ the\ driver">
                <title>Configure user authentication for the driver</title>
                <paragraph>The driver requires access to the FlashSystem management interface using
                    SSH. It should be provided with the FlashSystem management IP using the
                    <literal>san_ip</literal> flag, and the management port should be provided by the
                    <literal>san_ssh_port</literal> flag. By default, the port value is configured to be
                    port 22 (SSH).</paragraph>
                <note>
                    <paragraph>Make sure the compute node running the <literal>cinder-volume</literal> driver has SSH
                        network access to the storage system.</paragraph>
                </note>
                <paragraph>Using password authentication, assign a password to the user on the
                    FlashSystem. For more detail, see the driver configuration flags
                    for the user and password here: <reference internal="True" refid="config-fc-flags"><inline classes="std std-ref">Enable IBM FlashSystem FC driver</inline></reference>
                    or <reference internal="True" refid="config-iscsi-flags"><inline classes="std std-ref">Enable IBM FlashSystem iSCSI driver</inline></reference>.</paragraph>
            </section>
        </section>
        <section ids="ibm-flashsystem-fc-driver" names="ibm\ flashsystem\ fc\ driver">
            <title>IBM FlashSystem FC driver</title>
            <section ids="data-path-configuration" names="data\ path\ configuration">
                <title>Data Path configuration</title>
                <paragraph>Using Fiber Channel (FC), each FlashSystem node should have at least one
                    WWPN port configured. If the <literal>flashsystem_multipath_enabled</literal> flag is
                    set to <literal>True</literal> in the Block Storage service configuration file, the driver
                    uses all available WWPNs to attach the volume to the instance. If the flag is
                    not set, the driver uses the WWPN associated with the volumeâ€™s preferred node
                    (if available). Otherwise, it uses the first available WWPN of the system. The
                    driver obtains the WWPNs directly from the storage system. You do not need to
                    provide these WWPNs to the driver.</paragraph>
                <note>
                    <paragraph>Using FC, ensure that the block storage hosts have FC connectivity
                        to the FlashSystem.</paragraph>
                </note>
                <target refid="config-fc-flags"></target>
            </section>
            <section ids="enable-ibm-flashsystem-fc-driver config-fc-flags" names="enable\ ibm\ flashsystem\ fc\ driver config_fc_flags">
                <title>Enable IBM FlashSystem FC driver</title>
                <paragraph>Set the volume driver to the FlashSystem driver by setting the
                    <literal>volume_driver</literal> option in the <literal>cinder.conf</literal> configuration file,
                    as follows:</paragraph>
                <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">volume_driver = cinder.volume.drivers.ibm.flashsystem_fc.FlashSystemFCDriver</literal_block>
                <paragraph>To enable the IBM FlashSystem FC driver, configure the following options in the
                    <literal>cinder.conf</literal> configuration file:</paragraph>
                <table ids="id9">
                    <title>List of configuration flags for IBM FlashSystem FC driver</title>
                    <tgroup cols="4">
                        <colspec colwidth="25"></colspec>
                        <colspec colwidth="25"></colspec>
                        <colspec colwidth="25"></colspec>
                        <colspec colwidth="25"></colspec>
                        <thead>
                            <row>
                                <entry>
                                    <paragraph>Flag name</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Type</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Default</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Description</paragraph>
                                </entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry>
                                    <paragraph><literal>san_ip</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Required</paragraph>
                                </entry>
                                <entry>
                                </entry>
                                <entry>
                                    <paragraph>Management IP or host name</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>san_ssh_port</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Optional</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>22</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Management port</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>san_login</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Required</paragraph>
                                </entry>
                                <entry>
                                </entry>
                                <entry>
                                    <paragraph>Management login user name</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>san_password</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Required</paragraph>
                                </entry>
                                <entry>
                                </entry>
                                <entry>
                                    <paragraph>Management login password</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>flashsystem_connection_protocol</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Required</paragraph>
                                </entry>
                                <entry>
                                </entry>
                                <entry>
                                    <paragraph>Connection protocol should be set to <literal>FC</literal></paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>flashsystem_multipath_enabled</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Required</paragraph>
                                </entry>
                                <entry>
                                </entry>
                                <entry>
                                    <paragraph>Enable multipath for FC connections</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>flashsystem_multihost_enabled</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Optional</paragraph>
                                </entry>
                                <entry>
                                    <paragraph><literal>True</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Enable mapping vdisks to multiple hosts  <footnote_reference ids="id1" refid="id2">1</footnote_reference></paragraph>
                                </entry>
                            </row>
                        </tbody>
                    </tgroup>
                </table>
                <footnote backrefs="id1" ids="id2" names="1">
                    <label>1</label>
                    <paragraph>This option allows the driver to map a vdisk to more than one host at
                        a time. This scenario occurs during migration of a virtual machine
                        with an attached volume; the volume is simultaneously mapped to both
                        the source and destination compute hosts. If your deployment does not
                        require attaching vdisks to multiple hosts, setting this flag to
                        <literal>False</literal> will provide added safety.</paragraph>
                </footnote>
            </section>
        </section>
        <section ids="ibm-flashsystem-iscsi-driver" names="ibm\ flashsystem\ iscsi\ driver">
            <title>IBM FlashSystem iSCSI driver</title>
            <section ids="network-configuration" names="network\ configuration">
                <title>Network configuration</title>
                <paragraph>Using iSCSI, each FlashSystem node should have at least one iSCSI port
                    configured. iSCSI IP addresses of IBM FlashSystem can be obtained by
                    FlashSystem GUI or CLI. For more information, see the
                    appropriate IBM Redbook for the FlashSystem.</paragraph>
                <note>
                    <paragraph>Using iSCSI, ensure that the compute nodes have iSCSI network access
                        to the IBM FlashSystem.</paragraph>
                </note>
                <target refid="config-iscsi-flags"></target>
            </section>
            <section ids="enable-ibm-flashsystem-iscsi-driver config-iscsi-flags" names="enable\ ibm\ flashsystem\ iscsi\ driver config_iscsi_flags">
                <title>Enable IBM FlashSystem iSCSI driver</title>
                <paragraph>Set the volume driver to the FlashSystem driver by setting the
                    <literal>volume_driver</literal> option in the <literal>cinder.conf</literal> configuration file, as
                    follows:</paragraph>
                <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">volume_driver = cinder.volume.drivers.ibm.flashsystem_iscsi.FlashSystemISCSIDriver</literal_block>
                <paragraph>To enable IBM FlashSystem iSCSI driver, configure the following options
                    in the <literal>cinder.conf</literal> configuration file:</paragraph>
                <table ids="id10">
                    <title>List of configuration flags for IBM FlashSystem iSCSI driver</title>
                    <tgroup cols="4">
                        <colspec colwidth="25"></colspec>
                        <colspec colwidth="25"></colspec>
                        <colspec colwidth="25"></colspec>
                        <colspec colwidth="25"></colspec>
                        <thead>
                            <row>
                                <entry>
                                    <paragraph>Flag name</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Type</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Default</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Description</paragraph>
                                </entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry>
                                    <paragraph><literal>san_ip</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Required</paragraph>
                                </entry>
                                <entry>
                                </entry>
                                <entry>
                                    <paragraph>Management IP or host name</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>san_ssh_port</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Optional</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>22</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Management port</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>san_login</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Required</paragraph>
                                </entry>
                                <entry>
                                </entry>
                                <entry>
                                    <paragraph>Management login user name</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>san_password</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Required</paragraph>
                                </entry>
                                <entry>
                                </entry>
                                <entry>
                                    <paragraph>Management login password</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>flashsystem_connection_protocol</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Required</paragraph>
                                </entry>
                                <entry>
                                </entry>
                                <entry>
                                    <paragraph>Connection protocol should be set to <literal>iSCSI</literal></paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>flashsystem_multihost_enabled</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Optional</paragraph>
                                </entry>
                                <entry>
                                    <paragraph><literal>True</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Enable mapping vdisks to multiple hosts  <footnote_reference ids="id3" refid="id6">2</footnote_reference></paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>iscsi_ip_address</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Required</paragraph>
                                </entry>
                                <entry>
                                </entry>
                                <entry>
                                    <paragraph>Set to one of the iSCSI IP addresses obtained by FlashSystem GUI or CLI  <footnote_reference ids="id4" refid="id7">3</footnote_reference></paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>flashsystem_iscsi_portid</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Required</paragraph>
                                </entry>
                                <entry>
                                </entry>
                                <entry>
                                    <paragraph>Set to the id of the <literal>iscsi_ip_address</literal> obtained by FlashSystem GUI or CLI  <footnote_reference ids="id5" refid="id8">4</footnote_reference></paragraph>
                                </entry>
                            </row>
                        </tbody>
                    </tgroup>
                </table>
                <footnote backrefs="id3" ids="id6" names="2">
                    <label>2</label>
                    <paragraph>This option allows the driver to map a vdisk to more than one host at
                        a time. This scenario occurs during migration of a virtual machine
                        with an attached volume; the volume is simultaneously mapped to both
                        the source and destination compute hosts. If your deployment does not
                        require attaching vdisks to multiple hosts, setting this flag to
                        <literal>False</literal> will provide added safety.</paragraph>
                </footnote>
                <footnote backrefs="id4" ids="id7" names="3">
                    <label>3</label>
                    <paragraph>On the cluster of the FlashSystem, the <literal>iscsi_ip_address</literal> column is the
                        seventh column <literal>IP_address</literal> of the output of <literal>lsportip</literal>.</paragraph>
                </footnote>
                <footnote backrefs="id5" ids="id8" names="4">
                    <label>4</label>
                    <paragraph>On the cluster of the FlashSystem, port ID column is the first
                        column <literal>id</literal> of the output of <literal>lsportip</literal>,
                        not the sixth column <literal>port_id</literal>.</paragraph>
                </footnote>
            </section>
        </section>
        <section ids="limitations-and-known-issues" names="limitations\ and\ known\ issues">
            <title>Limitations and known issues</title>
            <paragraph>IBM FlashSystem only works when:</paragraph>
            <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">open_access_enabled=off</literal_block>
        </section>
        <section ids="supported-operations" names="supported\ operations">
            <title>Supported operations</title>
            <paragraph>These operations are supported:</paragraph>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>Create, delete, attach, and detach volumes.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Create, list, and delete volume snapshots.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Create a volume from a snapshot.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Copy an image to a volume.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Copy a volume to an image.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Clone a volume.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Extend a volume.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Get volume statistics.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Manage and unmanage a volume.</paragraph>
                </list_item>
            </bullet_list>
        </section>
    </section>
</document>

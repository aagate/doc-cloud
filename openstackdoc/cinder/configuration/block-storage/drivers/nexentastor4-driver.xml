<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/cinder/doc/source/configuration/block-storage/drivers/nexentastor4-driver.rst">
    <section ids="nexentastor-4-x-nfs-and-iscsi-drivers" names="nexentastor\ 4.x\ nfs\ and\ iscsi\ drivers">
        <title>NexentaStor 4.x NFS and iSCSI drivers</title>
        <paragraph>NexentaStor is an Open Source-driven Software-Defined Storage (OpenSDS)
            platform delivering unified file (NFS and SMB) and block (FC and iSCSI)
            storage services, runs on industry standard hardware, scales from tens of
            terabytes to petabyte configurations, and includes all data management
            functionality by default.</paragraph>
        <paragraph>For NexentaStor 4.x user documentation, visit
            <reference refuri="https://nexenta.com/products/downloads/nexentastor">https://nexenta.com/products/downloads/nexentastor</reference>.</paragraph>
        <section ids="supported-operations" names="supported\ operations">
            <title>Supported operations</title>
            <bullet_list bullet="*">
                <list_item>
                    <paragraph>Create, delete, attach, and detach volumes.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Create, list, and delete volume snapshots.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Create a volume from a snapshot.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Copy an image to a volume.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Copy a volume to an image.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Clone a volume.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Extend a volume.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Migrate a volume.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Change volume type.</paragraph>
                </list_item>
            </bullet_list>
        </section>
        <section ids="nexenta-iscsi-driver" names="nexenta\ iscsi\ driver">
            <title>Nexenta iSCSI driver</title>
            <paragraph>The Nexenta iSCSI driver allows you to use a NexentaStor appliance to store
                Compute volumes. Every Compute volume is represented by a single zvol in a
                predefined Nexenta namespace. The Nexenta iSCSI volume driver should work with
                all versions of NexentaStor.</paragraph>
            <paragraph>The NexentaStor appliance must be installed and configured according to the
                relevant Nexenta documentation. A volume and an enclosing namespace must be
                created for all iSCSI volumes to be accessed through the volume driver. This
                should be done as specified in the release-specific NexentaStor documentation.</paragraph>
            <paragraph>The NexentaStor Appliance iSCSI driver is selected using the normal procedures
                for one or multiple backend volume drivers.</paragraph>
            <paragraph>You must configure these items for each NexentaStor appliance that the iSCSI
                volume driver controls:</paragraph>
            <enumerated_list enumtype="arabic" prefix="" suffix=".">
                <list_item>
                    <paragraph>Make the following changes on the volume node <literal>/etc/cinder/cinder.conf</literal>
                        file.</paragraph>
                    <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve"># Enable Nexenta iSCSI driver
volume_driver=cinder.volume.drivers.nexenta.iscsi.NexentaISCSIDriver

# IP address of NexentaStor host (string value)
nexenta_host=HOST-IP

# Username for NexentaStor REST (string value)
nexenta_user=USERNAME

# Port for Rest API (integer value)
nexenta_rest_port=8457

# Password for NexentaStor REST (string value)
nexenta_password=PASSWORD

# Volume on NexentaStor appliance (string value)
nexenta_volume=volume_name</literal_block>
                </list_item>
            </enumerated_list>
            <note>
                <paragraph>nexenta_volume represents a zpool which is called volume on NS appliance. It must be pre-created before enabling the driver.</paragraph>
            </note>
            <enumerated_list enumtype="arabic" prefix="" suffix=".">
                <list_item>
                    <paragraph>Save the changes to the <literal>/etc/cinder/cinder.conf</literal> file and
                        restart the <literal>cinder-volume</literal> service.</paragraph>
                </list_item>
            </enumerated_list>
        </section>
        <section ids="nexenta-nfs-driver" names="nexenta\ nfs\ driver">
            <title>Nexenta NFS driver</title>
            <paragraph>The Nexenta NFS driver allows you to use NexentaStor appliance to store
                Compute volumes via NFS. Every Compute volume is represented by a single
                NFS file within a shared directory.</paragraph>
            <paragraph>While the NFS protocols standardize file access for users, they do not
                standardize administrative actions such as taking snapshots or replicating
                file systems. The OpenStack Volume Drivers bring a common interface to these
                operations. The Nexenta NFS driver implements these standard actions using
                the ZFS management plane that is already deployed on NexentaStor appliances.</paragraph>
            <paragraph>The Nexenta NFS volume driver should work with all versions of NexentaStor.
                The NexentaStor appliance must be installed and configured according to the
                relevant Nexenta documentation. A single-parent file system must be created
                for all virtual disk directories supported for OpenStack. This directory must
                be created and exported on each NexentaStor appliance. This should be done as
                specified in the release- specific NexentaStor documentation.</paragraph>
            <paragraph>You must configure these items for each NexentaStor appliance that the NFS
                volume driver controls:</paragraph>
            <enumerated_list enumtype="arabic" prefix="" suffix=".">
                <list_item>
                    <paragraph>Make the following changes on the volume node <literal>/etc/cinder/cinder.conf</literal>
                        file.</paragraph>
                    <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve"># Enable Nexenta NFS driver
volume_driver=cinder.volume.drivers.nexenta.nfs.NexentaNfsDriver

# Path to shares config file
nexenta_shares_config=/home/ubuntu/shares.cfg</literal_block>
                    <note>
                        <paragraph>Add your list of Nexenta NFS servers to the file you specified with the
                            <literal>nexenta_shares_config</literal> option. For example, this is how this file should look:</paragraph>
                    </note>
                    <literal_block highlight_args="{}" language="bash" linenos="False" xml:space="preserve">192.168.1.200:/volumes/VOLUME_NAME/NFS_SHARE http://USER:PASSWORD@192.168.1.200:8457
192.168.1.201:/volumes/VOLUME_NAME/NFS_SHARE http://USER:PASSWORD@192.168.1.201:8457
192.168.1.202:/volumes/VOLUME_NAME/NFS_SHARE http://USER:PASSWORD@192.168.1.202:8457</literal_block>
                </list_item>
            </enumerated_list>
            <paragraph>Each line in this file represents an NFS share. The first part of the line is
                the NFS share URL, the second line is the connection URL to the NexentaStor
                Appliance.</paragraph>
        </section>
        <section ids="driver-options" names="driver\ options">
            <title>Driver options</title>
            <paragraph>Nexenta Driver supports these options:</paragraph>
            <comment xml:space="preserve">Warning: Do not edit this file. It is automatically generated from the
software project's code and your changes will be overwritten.

The tool to generate this file lives in openstack-doc-tools repository.

Please make any changes needed in the code, then run the
autogenerate-config-doc tool from the openstack-doc-tools repository, or
ask for help on the documentation mailing list, IRC channel or meeting.</comment>
            <target refid="cinder-nexenta"></target>
            <table classes="config-ref-table" ids="id1 cinder-nexenta" names="cinder-nexenta">
                <title>Description of Nexenta driver configuration options</title>
                <tgroup cols="2">
                    <colspec colwidth="50"></colspec>
                    <colspec colwidth="50"></colspec>
                    <thead>
                        <row>
                            <entry>
                                <paragraph>Configuration option = Default value</paragraph>
                            </entry>
                            <entry>
                                <paragraph>Description</paragraph>
                            </entry>
                        </row>
                    </thead>
                    <tbody>
                        <row>
                            <entry>
                                <paragraph><strong>[DEFAULT]</strong></paragraph>
                            </entry>
                            <entry>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>nexenta_blocksize</literal> = <literal>4096</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(Integer) Block size for datasets</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>nexenta_chunksize</literal> = <literal>32768</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(Integer) NexentaEdge iSCSI LUN object chunk size</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>nexenta_client_address</literal> =</paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) NexentaEdge iSCSI Gateway client address for non-VIP service</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>nexenta_dataset_compression</literal> = <literal>on</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Compression value for new ZFS folders.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>nexenta_dataset_dedup</literal> = <literal>off</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Deduplication value for new ZFS folders.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>nexenta_dataset_description</literal> =</paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Human-readable description for the folder.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>nexenta_host</literal> =</paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) IP address of Nexenta SA</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>nexenta_iscsi_target_portal_port</literal> = <literal>3260</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(Integer) Nexenta target portal port</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>nexenta_mount_point_base</literal> = <literal>$state_path/mnt</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Base directory that contains NFS share mount points</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>nexenta_nbd_symlinks_dir</literal> = <literal>/dev/disk/by-path</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) NexentaEdge logical path of directory to store symbolic links to NBDs</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>nexenta_nms_cache_volroot</literal> = <literal>True</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(Boolean) If set True cache NexentaStor appliance volroot option value.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>nexenta_password</literal> = <literal>nexenta</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Password to connect to Nexenta SA</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>nexenta_rest_port</literal> = <literal>0</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(Integer) HTTP(S) port to connect to Nexenta REST API server. If it is equal zero, 8443 for HTTPS and 8080 for HTTP is used</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>nexenta_rest_protocol</literal> = <literal>auto</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Use http or https for REST connection (default auto)</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>nexenta_rrmgr_compression</literal> = <literal>0</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(Integer) Enable stream compression, level 1..9. 1 - gives best speed; 9 - gives best compression.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>nexenta_rrmgr_connections</literal> = <literal>2</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(Integer) Number of TCP connections.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>nexenta_rrmgr_tcp_buf_size</literal> = <literal>4096</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(Integer) TCP Buffer size in KiloBytes.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>nexenta_shares_config</literal> = <literal>/etc/cinder/nfs_shares</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) File with the list of available nfs shares</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>nexenta_sparse</literal> = <literal>False</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(Boolean) Enables or disables the creation of sparse datasets</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>nexenta_sparsed_volumes</literal> = <literal>True</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(Boolean) Enables or disables the creation of volumes as sparsed files that take no space. If disabled (False), volume is created as a regular file, which takes a long time.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>nexenta_target_group_prefix</literal> = <literal>cinder/</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Prefix for iSCSI target groups on SA</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>nexenta_target_prefix</literal> = <literal>iqn.1986-03.com.sun:02:cinder-</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) IQN prefix for iSCSI targets</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>nexenta_use_https</literal> = <literal>True</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(Boolean) Use secure HTTP for REST connection (default True)</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>nexenta_user</literal> = <literal>admin</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) User name to connect to Nexenta SA</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>nexenta_volume</literal> = <literal>cinder</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) SA Pool that holds all volumes</paragraph>
                            </entry>
                        </row>
                    </tbody>
                </tgroup>
            </table>
        </section>
    </section>
</document>

<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/cinder/doc/source/configuration/block-storage/drivers/ibm-storage-volume-driver.rst">
    <section ids="ibm-storage-driver-for-openstack" names="ibm\ storage\ driver\ for\ openstack">
        <title>IBM Storage Driver for OpenStack</title>
        <section ids="introduction" names="introduction">
            <title>Introduction</title>
            <paragraph>The IBM Storage Driver for OpenStack is a software component of the
                OpenStack cloud environment that enables utilization of storage
                resources provided by supported IBM storage systems.</paragraph>
            <paragraph>The driver was validated on the following storage systems:</paragraph>
            <bullet_list bullet="*">
                <list_item>
                    <paragraph>IBM DS8000 Family</paragraph>
                </list_item>
                <list_item>
                    <paragraph>IBM FlashSystem A9000</paragraph>
                </list_item>
                <list_item>
                    <paragraph>IBM FlashSystem A9000R</paragraph>
                </list_item>
                <list_item>
                    <paragraph>IBM Spectrum Accelerate</paragraph>
                </list_item>
                <list_item>
                    <paragraph>IBM XIV Storage System</paragraph>
                </list_item>
            </bullet_list>
            <paragraph>After the driver is configured on the OpenStack Cinder nodes, storage volumes
                can be allocated by the Cinder nodes to the Nova nodes. Virtual machines on
                the Nova nodes can then utilize these storage resources.</paragraph>
            <note>
                <paragraph>Unless stated otherwise, all references to XIV storage
                    system in this guide relate all members of the Spectrum Accelerate
                    Family (XIV, Spectrum Accelerate and FlashSystem A9000/A9000R).</paragraph>
            </note>
            <section ids="concept-diagram" names="concept\ diagram">
                <title>Concept diagram</title>
                <paragraph>This figure illustrates how an IBM storage system is connected
                    to the OpenStack cloud environment and provides storage resources when the
                    IBM Storage Driver for OpenStack is configured on the OpenStack Cinder nodes.
                    The OpenStack cloud is connected to the IBM storage system over Fibre
                    Channel or iSCSI (DS8000 systems support only Fibre Channel connections).
                    Remote cloud users can issue requests for storage resources from the
                    OpenStack cloud. These requests are transparently handled by the IBM Storage
                    Driver, which communicates with the IBM storage system and controls the
                    storage volumes on it. The IBM storage resources are then provided to the
                    Nova nodes in the OpenStack cloud.</paragraph>
                <figure>
                    <image candidates="{'*': 'configuration/block-storage/drivers/../../figures/ibm-storage-nova-concept.png'}" uri="configuration/block-storage/drivers/../../figures/ibm-storage-nova-concept.png"></image>
                </figure>
            </section>
        </section>
        <section ids="configuration" names="configuration">
            <title>Configuration</title>
            <paragraph>Configure the driver manually by changing the <literal>cinder.conf</literal> file as
                follows:</paragraph>
            <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">volume_driver = cinder.volume.drivers.ibm.ibm_storage.IBMStorageDriver</literal_block>
            <comment xml:space="preserve">Warning: Do not edit this file. It is automatically generated from the
software project's code and your changes will be overwritten.

The tool to generate this file lives in openstack-doc-tools repository.

Please make any changes needed in the code, then run the
autogenerate-config-doc tool from the openstack-doc-tools repository, or
ask for help on the documentation mailing list, IRC channel or meeting.</comment>
            <target refid="cinder-ibm-storage"></target>
            <table classes="config-ref-table" ids="id1 cinder-ibm-storage" names="cinder-ibm_storage">
                <title>Description of IBM Storage driver configuration options</title>
                <tgroup cols="2">
                    <colspec colwidth="50"></colspec>
                    <colspec colwidth="50"></colspec>
                    <thead>
                        <row>
                            <entry>
                                <paragraph>Configuration option = Default value</paragraph>
                            </entry>
                            <entry>
                                <paragraph>Description</paragraph>
                            </entry>
                        </row>
                    </thead>
                    <tbody>
                        <row>
                            <entry>
                                <paragraph><strong>[DEFAULT]</strong></paragraph>
                            </entry>
                            <entry>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>ds8k_devadd_unitadd_mapping</literal> =</paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Mapping between IODevice address and unit address.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>ds8k_host_type</literal> = <literal>auto</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Set to zLinux if your OpenStack version is prior to Liberty and you’re connecting to zLinux systems. Otherwise set to auto. Valid values for this parameter are: ‘auto’, ‘AMDLinuxRHEL’, ‘AMDLinuxSuse’, ‘AppleOSX’, ‘Fujitsu’, ‘Hp’, ‘HpTru64’, ‘HpVms’, ‘LinuxDT’, ‘LinuxRF’, ‘LinuxRHEL’, ‘LinuxSuse’, ‘Novell’, ‘SGI’, ‘SVC’, ‘SanFsAIX’, ‘SanFsLinux’, ‘Sun’, ‘VMWare’, ‘Win2000’, ‘Win2003’, ‘Win2008’, ‘Win2012’, ‘iLinux’, ‘nSeries’, ‘pLinux’, ‘pSeries’, ‘pSeriesPowerswap’, ‘zLinux’, ‘iSeries’.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>ds8k_ssid_prefix</literal> = <literal>FF</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Set the first two digits of SSID</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>proxy</literal> = <literal>cinder.volume.drivers.ibm.ibm_storage.proxy.IBMStorageProxy</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Proxy driver that connects to the IBM Storage Array</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>san_clustername</literal> =</paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Cluster name to use for creating volumes</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>san_ip</literal> =</paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) IP address of SAN controller</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>san_login</literal> = <literal>admin</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Username for SAN controller</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>san_password</literal> =</paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Password for SAN controller</paragraph>
                            </entry>
                        </row>
                    </tbody>
                </tgroup>
            </table>
        </section>
        <section ids="security" names="security">
            <title>Security</title>
            <paragraph>The following information provides an overview of security for the IBM
                Storage Driver for OpenStack.</paragraph>
            <section ids="avoiding-man-in-the-middle-attacks" names="avoiding\ man-in-the-middle\ attacks">
                <title>Avoiding man-in-the-middle attacks</title>
                <paragraph>When using a Spectrum Accelerate Family product, you can prevent
                    man-in-the-middle (MITM) attacks by following these rules:</paragraph>
                <bullet_list bullet="*">
                    <list_item>
                        <paragraph>Upgrade to IBM XIV storage system version 11.3 or later.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>If working in a secure mode, do not work insecurely against another storage
                            system in the same environment.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Validate the storage certificate. If you are using an XIV-provided
                            certificate, use the CA file that was provided with your storage system
                            (<literal>XIV-CA.pem</literal>). The certificate files should be copied to one of the following
                            directories:</paragraph>
                        <block_quote>
                            <bullet_list bullet="*">
                                <list_item>
                                    <paragraph><literal>/etc/ssl/certs</literal></paragraph>
                                </list_item>
                                <list_item>
                                    <paragraph><literal>/etc/ssl/certs/xiv</literal></paragraph>
                                </list_item>
                                <list_item>
                                    <paragraph><literal>/etc/pki</literal></paragraph>
                                </list_item>
                                <list_item>
                                    <paragraph><literal>/etc/pki/xiv</literal></paragraph>
                                </list_item>
                            </bullet_list>
                        </block_quote>
                    </list_item>
                </bullet_list>
                <paragraph>If you are using your own certificates, copy them to the same directories
                    with the prefix “XIV” and in the <literal>.pem</literal> format. For example: XIV-my_cert.pem.</paragraph>
                <bullet_list bullet="*">
                    <list_item>
                        <paragraph>In order to prevent the CVE-2014-3566 MITM attack, follow the OpenStack
                            community directions:
                            (<reference refuri="http://osdir.com/ml/openstack-dev/2014-10/msg01349.html">http://osdir.com/ml/openstack-dev/2014-10/msg01349.html</reference>).</paragraph>
                    </list_item>
                </bullet_list>
            </section>
        </section>
        <section ids="troubleshooting" names="troubleshooting">
            <title>Troubleshooting</title>
            <paragraph>Refer to this information to troubleshoot technical problems that you
                might encounter when using the IBM Storage Driver for OpenStack.</paragraph>
            <section ids="checking-the-cinder-node-log-files" names="checking\ the\ cinder\ node\ log\ files">
                <title>Checking the Cinder node log files</title>
                <paragraph>The Cinder log files record operation information that might be useful
                    for troubleshooting.</paragraph>
                <paragraph>To achieve optimal and clear logging of events, activate the verbose
                    logging level in the cinder.conf file, located in the <literal>/etc/cinder</literal>
                    folder. Add the following line in the file, save the file, and then
                    restart the cinder-volume service:</paragraph>
                <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">verbose = True
debug = True</literal_block>
                <paragraph>To turn off the verbose logging level, change <literal>True</literal> to <literal>False</literal>,
                    save the file, and then restart the cinder-volume service.</paragraph>
                <paragraph>Check the log files on a periodic basis to ensure that the IBM
                    Storage Driver is functioning properly.</paragraph>
                <paragraph>To check the log file on a Cinder node:
                    Go to the /var/log/cinder folder and open the activity log file named
                    cinder-volume.log or volume.log. The IBM Storage Driver writes to this
                    log file using the [IBM DS8K STORAGE] or [IBM XIV STORAGE] prefix
                    (depending on the relevant storage system) for each event that it
                    records in the file.</paragraph>
            </section>
        </section>
        <section ids="best-practices" names="best\ practices">
            <title>Best practices</title>
            <paragraph>This section contains the general guidance and best practices.</paragraph>
            <section ids="working-with-multi-tenancy" names="working\ with\ multi-tenancy">
                <title>Working with multi-tenancy</title>
                <paragraph>The XIV storage systems, running microcode version 11.5 or later, Spectrum
                    Accelerate and FlashSystem A9000/A9000R can employ multi-tenancy.</paragraph>
                <paragraph>In order to use multi-tenancy with the IBM Storage Driver for OpenStack:</paragraph>
                <bullet_list bullet="*">
                    <list_item>
                        <paragraph>For each storage system, verify that all predefined storage pools are
                            in the same domain or, that all are not in a domain.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Use either storage administrator or domain administrator user’s
                            credentials, as long as the credentials grant a full access to the relevant
                            pool.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>If the user is a domain administrator, the storage system domain
                            access policy can be CLOSED (<literal>domain_policy: access=CLOSED</literal>).
                            Otherwise, verify that the storage system domain access policy is
                            OPEN (<literal>domain_policy: access=OPEN</literal>).</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>If the user is not a domain administrator, the host management policy
                            of the storage system domain can be BASIC (<literal>domain_policy:
host_management=BASIC</literal>). Otherwise, verify that the storage
                            system domain host management policy is EXTENDED
                            (<literal>domain_policy: host_management=EXTENDED</literal>).</paragraph>
                    </list_item>
                </bullet_list>
            </section>
            <section ids="working-with-ibm-real-time-compression" names="working\ with\ ibm\ real-time\ compression™">
                <title>Working with IBM Real-time Compression™</title>
                <paragraph>XIV storage systems running microcode version 11.6 or later,
                    Spectrum Accelerate and FlashSystem A9000/A9000R can employ IBM
                    Real-time Compression™.</paragraph>
                <paragraph>Follow these guidelines when working with compressed storage
                    resources using the IBM Storage Driver for OpenStack:</paragraph>
                <bullet_list bullet="*">
                    <list_item>
                        <paragraph>Compression mode cannot be changed for storage volumes, using
                            the IBM Storage Driver for OpenStack. The volumes are created
                            according to the default compression mode of the pool. For example,
                            any volume created in a compressed pool will be compressed as well.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>The minimum size for a compressed storage volume is 87 GB.</paragraph>
                    </list_item>
                </bullet_list>
            </section>
            <section ids="working-with-qos" names="working\ with\ qos">
                <title>Working with QoS</title>
                <paragraph>The IBM Storage Driver for OpenStack provides QoS per volume for
                    IBM FlashSystem A9000/A9000R storage systems, running microcode
                    version of 12.0 or later. With QoS classes, the user can control
                    the maximum bandwidth and I/O operations for each volume.</paragraph>
                <paragraph>See IBM Spectrum Accelerate Family Storage Configuration and Usage
                    for IBM FlashSystem A9000, IBM FlashSystem A9000R and IBM XIV Gen3,
                    SG24-8376 for information about how to set QoS by defining
                    performance classes in terms of IOPS and bandwidth limitation</paragraph>
                <paragraph>QoS class types:</paragraph>
                <bullet_list bullet="*">
                    <list_item>
                        <paragraph>Shared (default). Limits the combined rates of all of the volumes
                            in the same QoS class. The maximum rate is the sum of the
                            combined rate for each volume. For example, two volumes under
                            a QoS class of maximum 100 Gbps are allocated a combined
                            maximum bandwidth rate of 100 Gbps.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Independent. Sets the maximum rate separately for each volume
                            in the QoS class. For example, for two volumes under a QoS
                            class of maximum 100 Gbps, each volume is limited to a rate
                            of 100 Gbps. Thus, the combined maximum bandwidth rate is up
                            to 200 Gbps.</paragraph>
                    </list_item>
                </bullet_list>
                <paragraph>To define a QoS class:</paragraph>
                <block_quote>
                    <enumerated_list enumtype="arabic" prefix="" suffix=".">
                        <list_item>
                            <paragraph>Create the QoS class:</paragraph>
                            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">cinder qos-create &lt;class_name&gt; &lt;class_specs: bw=#, iops=#&gt;</literal_block>
                        </list_item>
                        <list_item>
                            <paragraph>Create a type:</paragraph>
                            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">cinder type-create type_&lt;qos_class_name&gt;</literal_block>
                        </list_item>
                        <list_item>
                            <paragraph>Associate the QoS class with the type:</paragraph>
                            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">cinder qos-associate &lt;qos uuid&gt; &lt;type uuid&gt;</literal_block>
                        </list_item>
                        <list_item>
                            <paragraph>Announce that the type is supporting QoS:</paragraph>
                            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">cinder type-key &lt;type_name or UUID&gt; set QoS_support=True</literal_block>
                        </list_item>
                        <list_item>
                            <paragraph>Create a volume:</paragraph>
                            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">cinder create 1 --volume-type &lt;type_name&gt;</literal_block>
                        </list_item>
                    </enumerated_list>
                </block_quote>
            </section>
        </section>
    </section>
</document>

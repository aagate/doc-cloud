<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/cinder/doc/source/configuration/block-storage/drivers/ibm-storwize-svc-driver.rst">
    <section ids="ibm-storwize-family-and-svc-volume-driver" names="ibm\ storwize\ family\ and\ svc\ volume\ driver">
        <title>IBM Storwize family and SVC volume driver</title>
        <paragraph>The volume management driver for Storwize family and SAN Volume
            Controller (SVC) provides OpenStack Compute instances with access to IBM
            Storwize family or SVC storage systems.</paragraph>
        <section ids="supported-operations" names="supported\ operations">
            <title>Supported operations</title>
            <paragraph>Storwize/SVC driver supports the following Block Storage service volume
                operations:</paragraph>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>Create, list, delete, attach (map), and detach (unmap) volumes.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Create, list, and delete volume snapshots.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Copy an image to a volume.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Copy a volume to an image.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Clone a volume.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Extend a volume.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Retype a volume.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Create a volume from a snapshot.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Create, list, and delete consistency group.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Create, list, and delete consistency group snapshot.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Modify consistency group (add or remove volumes).</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Create consistency group from source (source can be a CG or CG snapshot)</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Manage an existing volume.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Failover-host for replicated back ends.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Failback-host for replicated back ends.</paragraph>
                </list_item>
            </bullet_list>
        </section>
        <section ids="configure-the-storwize-family-and-svc-system" names="configure\ the\ storwize\ family\ and\ svc\ system">
            <title>Configure the Storwize family and SVC system</title>
            <section ids="network-configuration" names="network\ configuration">
                <title>Network configuration</title>
                <paragraph>The Storwize family or SVC system must be configured for iSCSI, Fibre
                    Channel, or both.</paragraph>
                <paragraph>If using iSCSI, each Storwize family or SVC node should have at least
                    one iSCSI IP address. The IBM Storwize/SVC driver uses an iSCSI IP
                    address associated with the volume’s preferred node (if available) to
                    attach the volume to the instance, otherwise it uses the first available
                    iSCSI IP address of the system. The driver obtains the iSCSI IP address
                    directly from the storage system. You do not need to provide these iSCSI
                    IP addresses directly to the driver.</paragraph>
                <note>
                    <paragraph>If using iSCSI, ensure that the compute nodes have iSCSI network
                        access to the Storwize family or SVC system.</paragraph>
                </note>
                <paragraph>If using Fibre Channel (FC), each Storwize family or SVC node should
                    have at least one WWPN port configured. The driver uses all available
                    WWPNs to attach the volume to the instance. The driver obtains the
                    WWPNs directly from the storage system. You do not need to provide
                    these WWPNs directly to the driver.</paragraph>
                <note>
                    <paragraph>If using FC, ensure that the compute nodes have FC connectivity to
                        the Storwize family or SVC system.</paragraph>
                </note>
            </section>
            <section ids="iscsi-chap-authentication" names="iscsi\ chap\ authentication">
                <title>iSCSI CHAP authentication</title>
                <paragraph>If using iSCSI for data access and the
                    <literal>storwize_svc_iscsi_chap_enabled</literal> is set to <literal>True</literal>, the driver will
                    associate randomly-generated CHAP secrets with all hosts on the Storwize
                    family system. The compute nodes use these secrets when creating
                    iSCSI connections.</paragraph>
                <warning>
                    <paragraph>CHAP secrets are added to existing hosts as well as newly-created
                        ones. If the CHAP option is enabled, hosts will not be able to
                        access the storage without the generated secrets.</paragraph>
                </warning>
                <note>
                    <paragraph>Not all OpenStack Compute drivers support CHAP authentication.
                        Please check compatibility before using.</paragraph>
                </note>
                <note>
                    <paragraph>CHAP secrets are passed from OpenStack Block Storage to Compute in
                        clear text. This communication should be secured to ensure that CHAP
                        secrets are not discovered.</paragraph>
                </note>
            </section>
            <section ids="configure-storage-pools" names="configure\ storage\ pools">
                <title>Configure storage pools</title>
                <paragraph>The IBM Storwize/SVC driver can allocate volumes in multiple pools.
                    The pools should be created in advance and be provided to the driver
                    using the <literal>storwize_svc_volpool_name</literal> configuration flag in the form
                    of a comma-separated list.
                    For the complete list of configuration flags, see <reference internal="True" refid="config-flags"><inline classes="std std-ref">Storwize family and SVC driver options in cinder.conf</inline></reference>.</paragraph>
            </section>
            <section ids="configure-user-authentication-for-the-driver" names="configure\ user\ authentication\ for\ the\ driver">
                <title>Configure user authentication for the driver</title>
                <paragraph>The driver requires access to the Storwize family or SVC system
                    management interface. The driver communicates with the management using
                    SSH. The driver should be provided with the Storwize family or SVC
                    management IP using the <literal>san_ip</literal> flag, and the management port should
                    be provided by the <literal>san_ssh_port</literal> flag. By default, the port value is
                    configured to be port 22 (SSH). Also, you can set the secondary
                    management IP using the <literal>storwize_san_secondary_ip</literal> flag.</paragraph>
                <note>
                    <paragraph>Make sure the compute node running the cinder-volume management
                        driver has SSH network access to the storage system.</paragraph>
                </note>
                <paragraph>To allow the driver to communicate with the Storwize family or SVC
                    system, you must provide the driver with a user on the storage system.
                    The driver has two authentication methods: password-based authentication
                    and SSH key pair authentication. The user should have an Administrator
                    role. It is suggested to create a new user for the management driver.
                    Please consult with your storage and security administrator regarding
                    the preferred authentication method and how passwords or SSH keys should
                    be stored in a secure manner.</paragraph>
                <note>
                    <paragraph>When creating a new user on the Storwize or SVC system, make sure
                        the user belongs to the Administrator group or to another group that
                        has an Administrator role.</paragraph>
                </note>
                <paragraph>If using password authentication, assign a password to the user on the
                    Storwize or SVC system. The driver configuration flags for the user and
                    password are <literal>san_login</literal> and <literal>san_password</literal>, respectively.</paragraph>
                <paragraph>If you are using the SSH key pair authentication, create SSH private and
                    public keys using the instructions below or by any other method.
                    Associate the public key with the user by uploading the public key:
                    select the <inline classes="guilabel" rawtext=":guilabel:`choose file`">choose file</inline> option in the Storwize family or SVC
                    management GUI under <inline classes="guilabel" rawtext=":guilabel:`SSH public key`">SSH public key</inline>. Alternatively, you may
                    associate the SSH public key using the command-line interface; details can
                    be found in the Storwize and SVC documentation. The private key should be
                    provided to the driver using the <literal>san_private_key</literal> configuration flag.</paragraph>
            </section>
            <section ids="create-a-ssh-key-pair-with-openssh" names="create\ a\ ssh\ key\ pair\ with\ openssh">
                <title>Create a SSH key pair with OpenSSH</title>
                <paragraph>You can create an SSH key pair using OpenSSH, by running:</paragraph>
                <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ ssh-keygen -t rsa</literal_block>
                <paragraph>The command prompts for a file to save the key pair. For example, if you
                    select <literal>key</literal> as the filename, two files are created: <literal>key</literal> and
                    <literal>key.pub</literal>. The <literal>key</literal> file holds the private SSH key and <literal>key.pub</literal>
                    holds the public SSH key.</paragraph>
                <paragraph>The command also prompts for a pass phrase, which should be empty.</paragraph>
                <paragraph>The private key file should be provided to the driver using the
                    <literal>san_private_key</literal> configuration flag. The public key should be
                    uploaded to the Storwize family or SVC system using the storage
                    management GUI or command-line interface.</paragraph>
                <note>
                    <paragraph>Ensure that Cinder has read permissions on the private key file.</paragraph>
                </note>
            </section>
        </section>
        <section ids="configure-the-storwize-family-and-svc-driver" names="configure\ the\ storwize\ family\ and\ svc\ driver">
            <title>Configure the Storwize family and SVC driver</title>
            <section ids="enable-the-storwize-family-and-svc-driver" names="enable\ the\ storwize\ family\ and\ svc\ driver">
                <title>Enable the Storwize family and SVC driver</title>
                <paragraph>Set the volume driver to the Storwize family and SVC driver by setting
                    the <literal>volume_driver</literal> option in the <literal>cinder.conf</literal> file as follows:</paragraph>
                <paragraph>iSCSI:</paragraph>
                <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">[svc1234]
volume_driver = cinder.volume.drivers.ibm.storwize_svc.storwize_svc_iscsi.StorwizeSVCISCSIDriver
san_ip = 1.2.3.4
san_login = superuser
san_password = passw0rd
storwize_svc_volpool_name = cinder_pool1
volume_backend_name = svc1234</literal_block>
                <paragraph>FC:</paragraph>
                <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">[svc1234]
volume_driver = cinder.volume.drivers.ibm.storwize_svc.storwize_svc_fc.StorwizeSVCFCDriver
san_ip = 1.2.3.4
san_login = superuser
san_password = passw0rd
storwize_svc_volpool_name = cinder_pool1
volume_backend_name = svc1234</literal_block>
            </section>
            <section ids="replication-configuration" names="replication\ configuration">
                <title>Replication configuration</title>
                <paragraph>Add the following to the back-end specification to specify another storage
                    to replicate to:</paragraph>
                <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">replication_device = backend_id:rep_svc,
                     san_ip:1.2.3.5,
                     san_login:superuser,
                     san_password:passw0rd,
                     pool_name:cinder_pool1</literal_block>
                <paragraph>The <literal>backend_id</literal> is a unique name of the remote storage, the <literal>san_ip</literal>,
                    <literal>san_login</literal>, and <literal>san_password</literal> is authentication information for the
                    remote storage. The <literal>pool_name</literal> is the pool name for the replication
                    target volume.</paragraph>
                <note>
                    <paragraph>Only one <literal>replication_device</literal> can be configured for one back end
                        storage since only one replication target is supported now.</paragraph>
                </note>
                <target refid="config-flags"></target>
            </section>
            <section ids="storwize-family-and-svc-driver-options-in-cinder-conf config-flags" names="storwize\ family\ and\ svc\ driver\ options\ in\ cinder.conf config_flags">
                <title>Storwize family and SVC driver options in cinder.conf</title>
                <paragraph>The following options specify default values for all volumes. Some can
                    be over-ridden using volume types, which are described below.</paragraph>
                <comment xml:space="preserve">Warning: Do not edit this file. It is automatically generated from the
software project's code and your changes will be overwritten.

The tool to generate this file lives in openstack-doc-tools repository.

Please make any changes needed in the code, then run the
autogenerate-config-doc tool from the openstack-doc-tools repository, or
ask for help on the documentation mailing list, IRC channel or meeting.</comment>
                <target refid="cinder-storwize"></target>
                <table classes="config-ref-table" ids="id1 cinder-storwize" names="cinder-storwize">
                    <title>Description of IBM Storwise driver configuration options</title>
                    <tgroup cols="2">
                        <colspec colwidth="50"></colspec>
                        <colspec colwidth="50"></colspec>
                        <thead>
                            <row>
                                <entry>
                                    <paragraph>Configuration option = Default value</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Description</paragraph>
                                </entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry>
                                    <paragraph><strong>[DEFAULT]</strong></paragraph>
                                </entry>
                                <entry>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>san_ip</literal> =</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) IP address of SAN controller</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>san_login</literal> = <literal>admin</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) Username for SAN controller</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>san_password</literal> =</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) Password for SAN controller</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>san_private_key</literal> =</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) Filename of private key to use for SSH authentication</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>san_ssh_port</literal> = <literal>22</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Port number) SSH port to use with SAN</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>storwize_san_secondary_ip</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) Specifies secondary management IP or hostname to be used if san_ip is invalid or becomes inaccessible.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>storwize_svc_allow_tenant_qos</literal> = <literal>False</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Boolean) Allow tenants to specify QOS on create</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>storwize_svc_flashcopy_rate</literal> = <literal>50</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Integer) Specifies the Storwize FlashCopy copy rate to be used when creating a full volume copy. The default is rate is 50, and the valid rates are 1-100.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>storwize_svc_flashcopy_timeout</literal> = <literal>120</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Integer) Maximum number of seconds to wait for FlashCopy to be prepared.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>storwize_svc_iscsi_chap_enabled</literal> = <literal>True</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Boolean) Configure CHAP authentication for iSCSI connections (Default: Enabled)</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>storwize_svc_multihostmap_enabled</literal> = <literal>True</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Boolean) DEPRECATED: This option no longer has any affect. It is deprecated and will be removed in the next release.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>storwize_svc_multipath_enabled</literal> = <literal>False</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Boolean) Connect with multipath (FC only; iSCSI multipath is controlled by Nova)</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>storwize_svc_stretched_cluster_partner</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) If operating in stretched cluster mode, specify the name of the pool in which mirrored copies are stored.Example: “pool2”</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>storwize_svc_vol_autoexpand</literal> = <literal>True</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Boolean) Storage system autoexpand parameter for volumes (True/False)</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>storwize_svc_vol_compression</literal> = <literal>False</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Boolean) Storage system compression option for volumes</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>storwize_svc_vol_easytier</literal> = <literal>True</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Boolean) Enable Easy Tier for volumes</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>storwize_svc_vol_grainsize</literal> = <literal>256</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Integer) Storage system grain size parameter for volumes (32/64/128/256)</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>storwize_svc_vol_iogrp</literal> = <literal>0</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Integer) The I/O group in which to allocate volumes</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>storwize_svc_vol_nofmtdisk</literal> = <literal>False</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Boolean) Specifies that the volume not be formatted during creation.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>storwize_svc_vol_rsize</literal> = <literal>2</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Integer) Storage system space-efficiency parameter for volumes (percentage)</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>storwize_svc_vol_warning</literal> = <literal>0</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Integer) Storage system threshold for volume capacity warnings (percentage)</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>storwize_svc_volpool_name</literal> = <literal>volpool</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(List) Comma separated list of storage system storage pools for volumes.</paragraph>
                                </entry>
                            </row>
                        </tbody>
                    </tgroup>
                </table>
                <paragraph>Note the following:</paragraph>
                <bullet_list bullet="*">
                    <list_item>
                        <paragraph>The authentication requires either a password (<literal>san_password</literal>) or
                            SSH private key (<literal>san_private_key</literal>). One must be specified. If
                            both are specified, the driver uses only the SSH private key.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>The driver creates thin-provisioned volumes by default. The
                            <literal>storwize_svc_vol_rsize</literal> flag defines the initial physical
                            allocation percentage for thin-provisioned volumes, or if set to
                            <literal>-1</literal>, the driver creates full allocated volumes. More details about
                            the available options are available in the Storwize family and SVC
                            documentation.</paragraph>
                    </list_item>
                </bullet_list>
            </section>
            <section ids="placement-with-volume-types" names="placement\ with\ volume\ types">
                <title>Placement with volume types</title>
                <paragraph>The IBM Storwize/SVC driver exposes capabilities that can be added to
                    the <literal>extra specs</literal> of volume types, and used by the filter
                    scheduler to determine placement of new volumes. Make sure to prefix
                    these keys with <literal>capabilities:</literal> to indicate that the scheduler should
                    use them. The following <literal>extra specs</literal> are supported:</paragraph>
                <bullet_list bullet="-">
                    <list_item>
                        <paragraph><literal>capabilities:volume_backend_name</literal> - Specify a specific back-end
                            where the volume should be created. The back-end name is a
                            concatenation of the name of the IBM Storwize/SVC storage system as
                            shown in <literal>lssystem</literal>, an underscore, and the name of the pool (mdisk
                            group). For example:</paragraph>
                        <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">capabilities:volume_backend_name=myV7000_openstackpool</literal_block>
                    </list_item>
                    <list_item>
                        <paragraph><literal>capabilities:compression_support</literal> - Specify a back-end according to
                            compression support. A value of <literal>True</literal> should be used to request a
                            back-end that supports compression, and a value of <literal>False</literal> will
                            request a back-end that does not support compression. If you do not
                            have constraints on compression support, do not set this key. Note
                            that specifying <literal>True</literal> does not enable compression; it only
                            requests that the volume be placed on a back-end that supports
                            compression. Example syntax:</paragraph>
                        <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">capabilities:compression_support='&lt;is&gt; True'</literal_block>
                    </list_item>
                    <list_item>
                        <paragraph><literal>capabilities:easytier_support</literal> - Similar semantics as the
                            <literal>compression_support</literal> key, but for specifying according to support
                            of the Easy Tier feature. Example syntax:</paragraph>
                        <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">capabilities:easytier_support='&lt;is&gt; True'</literal_block>
                    </list_item>
                    <list_item>
                        <paragraph><literal>capabilities:pool_name</literal> - Specify a specific pool to create volume
                            if only multiple pools are configured. pool_name should be one value
                            configured in storwize_svc_volpool_name flag. Example syntax:</paragraph>
                        <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">capabilities:pool_name=cinder_pool2</literal_block>
                    </list_item>
                </bullet_list>
            </section>
            <section ids="configure-per-volume-creation-options" names="configure\ per-volume\ creation\ options">
                <title>Configure per-volume creation options</title>
                <paragraph>Volume types can also be used to pass options to the IBM Storwize/SVC
                    driver, which over-ride the default values set in the configuration
                    file. Contrary to the previous examples where the <literal>capabilities</literal> scope
                    was used to pass parameters to the Cinder scheduler, options can be
                    passed to the IBM Storwize/SVC driver with the <literal>drivers</literal> scope.</paragraph>
                <paragraph>The following <literal>extra specs</literal> keys are supported by the IBM Storwize/SVC
                    driver:</paragraph>
                <bullet_list bullet="-">
                    <list_item>
                        <paragraph>rsize</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>warning</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>autoexpand</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>grainsize</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>compression</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>easytier</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>multipath</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>iogrp</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>mirror_pool</paragraph>
                    </list_item>
                </bullet_list>
                <paragraph>These keys have the same semantics as their counterparts in the
                    configuration file. They are set similarly; for example, <literal>rsize=2</literal> or
                    <literal>compression=False</literal>.</paragraph>
            </section>
            <section ids="example-volume-types" names="example:\ volume\ types">
                <title>Example: Volume types</title>
                <paragraph>In the following example, we create a volume type to specify a
                    controller that supports compression, and enable compression:</paragraph>
                <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack volume type create compressed
$ openstack volume type set --property capabilities:compression_support='&lt;is&gt; True' --property drivers:compression=True compressed</literal_block>
                <paragraph>We can then create a 50GB volume using this type:</paragraph>
                <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack volume create "compressed volume" --type compressed --size 50</literal_block>
                <paragraph>In the following example, create a volume type that enables
                    synchronous replication (metro mirror):</paragraph>
                <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack volume type create ReplicationType
$ openstack volume type set --property replication_type="&lt;in&gt; metro" \
  --property replication_enabled='&lt;is&gt; True' --property volume_backend_name=svc234 ReplicationType</literal_block>
                <paragraph>In the following example, we create a volume type to support stretch cluster
                    volume or mirror volume:</paragraph>
                <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack volume type create mirror_vol_type
$ openstack volume type set --property volume_backend_name=svc1 \
  --property drivers:mirror_pool=pool2 mirror_vol_type</literal_block>
                <paragraph>Volume types can be used, for example, to provide users with different</paragraph>
                <bullet_list bullet="-">
                    <list_item>
                        <paragraph>performance levels (such as, allocating entirely on an HDD tier,
                            using Easy Tier for an HDD-SDD mix, or allocating entirely on an SSD
                            tier)</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>resiliency levels (such as, allocating volumes in pools with
                            different RAID levels)</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>features (such as, enabling/disabling Real-time Compression,
                            replication volume creation)</paragraph>
                    </list_item>
                </bullet_list>
            </section>
            <section ids="qos" names="qos">
                <title>QOS</title>
                <paragraph>The Storwize driver provides QOS support for storage volumes by
                    controlling the I/O amount. QOS is enabled by editing the
                    <literal>etc/cinder/cinder.conf</literal> file and setting the
                    <literal>storwize_svc_allow_tenant_qos</literal> to <literal>True</literal>.</paragraph>
                <paragraph>There are three ways to set the Storwize <literal>IOThrotting</literal> parameter for
                    storage volumes:</paragraph>
                <bullet_list bullet="-">
                    <list_item>
                        <paragraph>Add the <literal>qos:IOThrottling</literal> key into a QOS specification and
                            associate it with a volume type.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Add the <literal>qos:IOThrottling</literal> key into an extra specification with a
                            volume type.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Add the <literal>qos:IOThrottling</literal> key to the storage volume metadata.</paragraph>
                    </list_item>
                </bullet_list>
                <note>
                    <paragraph>If you are changing a volume type with QOS to a new volume type
                        without QOS, the QOS configuration settings will be removed.</paragraph>
                </note>
            </section>
        </section>
        <section ids="operational-notes-for-the-storwize-family-and-svc-driver" names="operational\ notes\ for\ the\ storwize\ family\ and\ svc\ driver">
            <title>Operational notes for the Storwize family and SVC driver</title>
            <section ids="migrate-volumes" names="migrate\ volumes">
                <title>Migrate volumes</title>
                <paragraph>In the context of OpenStack Block Storage’s volume migration feature,
                    the IBM Storwize/SVC driver enables the storage’s virtualization
                    technology. When migrating a volume from one pool to another, the volume
                    will appear in the destination pool almost immediately, while the
                    storage moves the data in the background.</paragraph>
                <note>
                    <paragraph>To enable this feature, both pools involved in a given volume
                        migration must have the same values for <literal>extent_size</literal>. If the
                        pools have different values for <literal>extent_size</literal>, the data will still
                        be moved directly between the pools (not host-side copy), but the
                        operation will be synchronous.</paragraph>
                </note>
            </section>
            <section ids="extend-volumes" names="extend\ volumes">
                <title>Extend volumes</title>
                <paragraph>The IBM Storwize/SVC driver allows for extending a volume’s size, but
                    only for volumes without snapshots.</paragraph>
            </section>
            <section ids="snapshots-and-clones" names="snapshots\ and\ clones">
                <title>Snapshots and clones</title>
                <paragraph>Snapshots are implemented using FlashCopy with no background copy
                    (space-efficient). Volume clones (volumes created from existing volumes)
                    are implemented with FlashCopy, but with background copy enabled. This
                    means that volume clones are independent, full copies. While this
                    background copy is taking place, attempting to delete or extend the
                    source volume will result in that operation waiting for the copy to
                    complete.</paragraph>
            </section>
            <section ids="volume-retype" names="volume\ retype">
                <title>Volume retype</title>
                <paragraph>The IBM Storwize/SVC driver enables you to modify volume types. When you
                    modify volume types, you can also change these extra specs properties:</paragraph>
                <bullet_list bullet="-">
                    <list_item>
                        <paragraph>rsize</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>warning</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>autoexpand</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>grainsize</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>compression</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>easytier</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>iogrp</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>nofmtdisk</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>mirror_pool</paragraph>
                    </list_item>
                </bullet_list>
                <note>
                    <paragraph>When you change the <literal>rsize</literal>, <literal>grainsize</literal> or <literal>compression</literal>
                        properties, volume copies are asynchronously synchronized on the
                        array.</paragraph>
                </note>
                <note>
                    <paragraph>To change the <literal>iogrp</literal> property, IBM Storwize/SVC firmware version
                        6.4.0 or later is required.</paragraph>
                </note>
            </section>
            <section ids="replication-operation" names="replication\ operation">
                <title>Replication operation</title>
                <paragraph>A volume is only replicated if the volume is created with a volume-type
                    that has the extra spec <literal>replication_enabled</literal> set to <literal>&lt;is&gt; True</literal>. Three
                    types of replication are supported now, global mirror(async), global mirror
                    with change volume(async) and metro mirror(sync). It can be specified by a
                    volume-type that has the extra spec <literal>replication_type</literal> set to
                    <literal>&lt;in&gt; global</literal>, <literal>&lt;in&gt; gmcv</literal> or <literal>&lt;in&gt; metro</literal>. If no <literal>replication_type</literal>
                    is specified, global mirror will be created for replication.</paragraph>
                <paragraph>If <literal>replication_type</literal> set to <literal>&lt;in&gt; gmcv</literal>, cycle_period_seconds can be
                    set as the cycling time perform global mirror relationship with multi cycling
                    mode. Default value is 300. Example syntax:</paragraph>
                <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ cinder type-create gmcv_type
$ cinder type-key gmcv_type set replication_enabled='&lt;is&gt; True' \
  replication_type="&lt;in&gt; gmcv" drivers:cycle_period_seconds=500</literal_block>
                <note>
                    <paragraph>It is better to establish the partnership relationship between
                        the replication source storage and the replication target
                        storage manually on the storage back end before replication
                        volume creation.</paragraph>
                </note>
                <paragraph>The <literal>failover-host</literal> command is designed for the case where the primary
                    storage is down.</paragraph>
                <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ cinder failover-host cinder@svciscsi --backend_id target_svc_id</literal_block>
                <paragraph>If a failover command has been executed and the primary storage has
                    been restored, it is possible to do a failback by simply specifying
                    default as the <literal>backend_id</literal>:</paragraph>
                <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ cinder failover-host cinder@svciscsi --backend_id default</literal_block>
                <note>
                    <paragraph>Before you perform a failback operation, synchronize the data
                        from the replication target volume to the primary one on the
                        storage back end manually, and do the failback only after the
                        synchronization is done since the synchronization may take a long time.
                        If the synchronization is not done manually, Storwize Block Storage
                        service driver will perform the synchronization and do the failback
                        after the synchronization is finished.</paragraph>
                </note>
            </section>
        </section>
    </section>
</document>

<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/cinder/doc/source/configuration/block-storage/drivers/dell-storagecenter-driver.rst">
    <section ids="dell-storage-center-fibre-channel-and-iscsi-drivers" names="dell\ storage\ center\ fibre\ channel\ and\ iscsi\ drivers">
        <title>Dell Storage Center Fibre Channel and iSCSI drivers</title>
        <paragraph>The Dell Storage Center volume driver interacts with configured Storage
            Center arrays.</paragraph>
        <paragraph>The Dell Storage Center driver manages Storage Center arrays through
            the Dell Storage Manager (DSM). DSM connection settings and Storage
            Center options are defined in the <literal>cinder.conf</literal> file.</paragraph>
        <paragraph>Prerequisite: Dell Storage Manager 2015 R1 or later must be used.</paragraph>
        <section ids="supported-operations" names="supported\ operations">
            <title>Supported operations</title>
            <paragraph>The Dell Storage Center volume driver provides the following Cinder
                volume operations:</paragraph>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>Create, delete, attach (map), and detach (unmap) volumes.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Create, list, and delete volume snapshots.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Create a volume from a snapshot.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Copy an image to a volume.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Copy a volume to an image.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Clone a volume.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Extend a volume.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Create, delete, list and update a consistency group.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Create, delete, and list consistency group snapshots.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Manage an existing volume.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Failover-host for replicated back ends.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Create a replication using Live Volume.</paragraph>
                </list_item>
            </bullet_list>
        </section>
        <section ids="extra-spec-options" names="extra\ spec\ options">
            <title>Extra spec options</title>
            <paragraph>Volume type extra specs can be used to enable a variety of Dell Storage
                Center options. Selecting Storage Profiles, Replay Profiles, enabling
                replication, replication options including Live Volume and Active Replay
                replication.</paragraph>
            <paragraph>Storage Profiles control how Storage Center manages volume data. For a
                given volume, the selected Storage Profile dictates which disk tier
                accepts initial writes, as well as how data progression moves data
                between tiers to balance performance and cost. Predefined Storage
                Profiles are the most effective way to manage data in Storage Center.</paragraph>
            <paragraph>By default, if no Storage Profile is specified in the volume extra
                specs, the default Storage Profile for the user account configured for
                the Block Storage driver is used. The extra spec key
                <literal>storagetype:storageprofile</literal> with the value of the name of the Storage
                Profile on the Storage Center can be set to allow to use Storage
                Profiles other than the default.</paragraph>
            <paragraph>For ease of use from the command line, spaces in Storage Profile names
                are ignored. As an example, here is how to define two volume types using
                the <literal>High Priority</literal> and <literal>Low Priority</literal> Storage Profiles:</paragraph>
            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack volume type create "GoldVolumeType"
$ openstack volume type set --property storagetype:storageprofile=highpriority "GoldVolumeType"
$ openstack volume type create "BronzeVolumeType"
$ openstack volume type set --property storagetype:storageprofile=lowpriority "BronzeVolumeType"</literal_block>
            <paragraph>Replay Profiles control how often the Storage Center takes a replay of a
                given volume and how long those replays are kept. The default profile is
                the <literal>daily</literal> profile that sets the replay to occur once a day and to
                persist for one week.</paragraph>
            <paragraph>The extra spec key <literal>storagetype:replayprofiles</literal> with the value of the
                name of the Replay Profile or profiles on the Storage Center can be set
                to allow to use Replay Profiles other than the default <literal>daily</literal> profile.</paragraph>
            <paragraph>As an example, here is how to define a volume type using the <literal>hourly</literal>
                Replay Profile and another specifying both <literal>hourly</literal> and the default
                <literal>daily</literal> profile:</paragraph>
            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack volume type create "HourlyType"
$ openstack volume type set --property storagetype:replayprofile=hourly "HourlyType"
$ openstack volume type create "HourlyAndDailyType"
$ openstack volume type set --property storagetype:replayprofiles=hourly,daily "HourlyAndDailyType"</literal_block>
            <paragraph>Note the comma separated string for the <literal>HourlyAndDailyType</literal>.</paragraph>
            <paragraph>Replication for a given volume type is enabled via the extra spec
                <literal>replication_enabled</literal>.</paragraph>
            <paragraph>To create a volume type that specifies only replication enabled back ends:</paragraph>
            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack volume type create "ReplicationType"
$ openstack volume type set --property replication_enabled='&lt;is&gt; True' "ReplicationType"</literal_block>
            <paragraph>Extra specs can be used to configure replication. In addition to the Replay
                Profiles above, <literal>replication:activereplay</literal> can be set to enable replication
                of the volume’s active replay. And the replication type can be changed to
                synchronous via the <literal>replication_type</literal> extra spec can be set.</paragraph>
            <paragraph>To create a volume type that enables replication of the active replay:</paragraph>
            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack volume type create "ReplicationType"
$ openstack volume type key --property replication_enabled='&lt;is&gt; True' "ReplicationType"
$ openstack volume type key --property replication:activereplay='&lt;is&gt; True' "ReplicationType"</literal_block>
            <paragraph>To create a volume type that enables synchronous replication :</paragraph>
            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack volume type create "ReplicationType"
$ openstack volume type key --property replication_enabled='&lt;is&gt; True' "ReplicationType"
$ openstack volume type key --property replication_type='&lt;is&gt; sync' "ReplicationType"</literal_block>
            <paragraph>To create a volume type that enables replication using Live Volume:</paragraph>
            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack volume type create "ReplicationType"
$ openstack volume type key --property replication_enabled='&lt;is&gt; True' "ReplicationType"
$ openstack volume type key --property replication:livevolume='&lt;is&gt; True' "ReplicationType"</literal_block>
            <paragraph>If QOS options are enabled on the Storage Center they can be enabled via extra
                specs. The name of the Volume QOS can be specified via the
                <literal>storagetype:volumeqos</literal> extra spec. Likewise the name of the Group QOS to
                use can be specificed via the <literal>storagetype:groupqos</literal> extra spec. Volumes
                created with these extra specs set will be added to the specified QOS groups.</paragraph>
            <paragraph>To create a volume type that sets both Volume and Group QOS:</paragraph>
            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack volume type create "StorageCenterQOS"
$ openstack volume type key --property 'storagetype:volumeqos'='unlimited' "StorageCenterQOS"
$ openstack volume type key --property 'storagetype:groupqos'='limited' "StorageCenterQOS"</literal_block>
            <paragraph>Data reduction profiles can be specified in the
                <literal>storagetype:datareductionprofile</literal> extra spec. Available options are None,
                Compression, and Deduplication. Note that not all options are available on
                every Storage Center.</paragraph>
            <paragraph>To create volume types that support no compression, compression, and
                deduplication and compression respectively:</paragraph>
            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack volume type create "NoCompressionType"
$ openstack volume type key --property 'storagetype:datareductionprofile'='None' "NoCompressionType"
$ openstack volume type create "CompressedType"
$ openstack volume type key --property 'storagetype:datareductionprofile'='Compression' "CompressedType"
$ openstack volume type create "DedupType"
$ openstack volume type key --property 'storagetype:datareductionprofile'='Deduplication' "DedupType"</literal_block>
            <paragraph>Note: The default is no compression.</paragraph>
        </section>
        <section ids="iscsi-configuration" names="iscsi\ configuration">
            <title>iSCSI configuration</title>
            <paragraph>Use the following instructions to update the configuration file for iSCSI:</paragraph>
            <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">default_volume_type = delliscsi
enabled_backends = delliscsi

[delliscsi]
# Name to give this storage back-end
volume_backend_name = delliscsi
# The iSCSI driver to load
volume_driver = cinder.volume.drivers.dell.dell_storagecenter_iscsi.DellStorageCenterISCSIDriver
# IP address of DSM
san_ip = 172.23.8.101
# DSM user name
san_login = Admin
# DSM password
san_password = secret
# The Storage Center serial number to use
dell_sc_ssn = 64702

# ==Optional settings==

# The DSM API port
dell_sc_api_port = 3033
# Server folder to place new server definitions
dell_sc_server_folder = devstacksrv
# Volume folder to place created volumes
dell_sc_volume_folder = devstackvol/Cinder</literal_block>
        </section>
        <section ids="fibre-channel-configuration" names="fibre\ channel\ configuration">
            <title>Fibre Channel configuration</title>
            <paragraph>Use the following instructions to update the configuration file for fibre
                channel:</paragraph>
            <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">default_volume_type = dellfc
enabled_backends = dellfc

[dellfc]
# Name to give this storage back-end
volume_backend_name = dellfc
# The FC driver to load
volume_driver = cinder.volume.drivers.dell.dell_storagecenter_fc.DellStorageCenterFCDriver
# IP address of the DSM
san_ip = 172.23.8.101
# DSM user name
san_login = Admin
# DSM password
san_password = secret
# The Storage Center serial number to use
dell_sc_ssn = 64702

# ==Optional settings==

# The DSM API port
dell_sc_api_port = 3033
# Server folder to place new server definitions
dell_sc_server_folder = devstacksrv
# Volume folder to place created volumes
dell_sc_volume_folder = devstackvol/Cinder</literal_block>
        </section>
        <section ids="dual-dsm" names="dual\ dsm">
            <title>Dual DSM</title>
            <paragraph>It is possible to specify a secondary DSM to use in case the primary DSM fails.</paragraph>
            <paragraph>Configuration is done through the cinder.conf. Both DSMs have to be
                configured to manage the same set of Storage Centers for this backend. That
                means the dell_sc_ssn and any Storage Centers used for replication or Live
                Volume.</paragraph>
            <paragraph>Add network and credential information to the backend to enable Dual DSM.</paragraph>
            <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">[dell]
# The IP address and port of the secondary DSM.
secondary_san_ip = 192.168.0.102
secondary_sc_api_port = 3033
# Specify credentials for the secondary DSM.
secondary_san_login = Admin
secondary_san_password = secret</literal_block>
            <paragraph>The driver will use the primary until a failure. At that point it will attempt
                to use the secondary. It will continue to use the secondary until the volume
                service is restarted or the secondary fails at which point it will attempt to
                use the primary.</paragraph>
        </section>
        <section ids="replication-configuration" names="replication\ configuration">
            <title>Replication configuration</title>
            <paragraph>Add the following to the back-end specification to specify another Storage
                Center to replicate to.</paragraph>
            <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">[dell]
replication_device = target_device_id: 65495, qosnode: cinderqos</literal_block>
            <paragraph>The <literal>target_device_id</literal> is the SSN of the remote Storage Center and the
                <literal>qosnode</literal> is the QoS Node setup between the two Storage Centers.</paragraph>
            <paragraph>Note that more than one <literal>replication_device</literal> line can be added. This will
                slow things down, however.</paragraph>
            <paragraph>A volume is only replicated if the volume is of a volume-type that has
                the extra spec <literal>replication_enabled</literal> set to <literal>&lt;is&gt; True</literal>.</paragraph>
        </section>
        <section ids="replication-notes" names="replication\ notes">
            <title>Replication notes</title>
            <paragraph>This driver supports both standard replication and Live Volume (if supported
                and licensed). The main difference is that a VM attached to a Live Volume is
                mapped to both Storage Centers. In the case of a failure of the primary Live
                Volume still requires a failover-host to move control of the volume to the
                second controller.</paragraph>
            <paragraph>Existing mappings should work and not require the instance to be remapped but
                it might need to be rebooted.</paragraph>
            <paragraph>Live Volume is more resource intensive than replication. One should be sure
                to plan accordingly.</paragraph>
        </section>
        <section ids="failback" names="failback">
            <title>Failback</title>
            <paragraph>The failover-host command is designed for the case where the primary system is
                not coming back. If it has been executed and the primary has been restored it
                is possible to attempt a failback.</paragraph>
            <paragraph>Simply specify default as the backend_id.</paragraph>
            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ cinder failover-host cinder@delliscsi --backend_id default</literal_block>
            <paragraph>Non trivial heavy lifting is done by this command. It attempts to recover best
                it can but if things have diverged to far it can only do so much. It is also a
                one time only command so do not reboot or restart the service in the middle of
                it.</paragraph>
            <paragraph>Failover and failback are significant operations under OpenStack Cinder. Be
                sure to consult with support before attempting.</paragraph>
        </section>
        <section ids="server-type-configuration" names="server\ type\ configuration">
            <title>Server type configuration</title>
            <paragraph>This option allows one to set a default Server OS type to use when creating
                a server definition on the Dell Storage Center.</paragraph>
            <paragraph>When attaching a volume to a node the Dell Storage Center driver creates a
                server definition on the storage array. This defition includes a Server OS
                type. The type used by the Dell Storage Center cinder driver is
                “Red Hat Linux 6.x”. This is a modern operating system definition that supports
                all the features of an OpenStack node.</paragraph>
            <paragraph>Add the following to the back-end specification to specify the Server OS to use
                when creating a server definition. The server type used must come from the drop
                down list in the DSM.</paragraph>
            <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">[dell]
dell_server_os = 'Red Hat Linux 7.x'</literal_block>
            <paragraph>Note that this server definition is created once. Changing this setting after
                the fact will not change an existing definition. The selected Server OS does
                not have to match the actual OS used on the node.</paragraph>
        </section>
        <section ids="excluding-a-domain" names="excluding\ a\ domain">
            <title>Excluding a domain</title>
            <paragraph>This option excludes a Storage Center ISCSI fault domain from the ISCSI
                properties returned by the initialize_connection call. This only applies to
                the ISCSI driver.</paragraph>
            <paragraph>Add the excluded_domain_ip option into the backend config for each fault domain
                to be excluded. This option takes the specified Target IPv4 Address listed
                under the fault domain. Older versions of DSM (EM) may list this as the Well
                Known IP Address.</paragraph>
            <paragraph>Add the following to the back-end specification to exclude the domains at
                172.20.25.15 and 172.20.26.15.</paragraph>
            <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">[dell]
excluded_domain_ip=172.20.25.15
excluded_domain_ip=172.20.26.15</literal_block>
        </section>
        <section ids="driver-options" names="driver\ options">
            <title>Driver options</title>
            <paragraph>The following table contains the configuration options specific to the
                Dell Storage Center volume driver.</paragraph>
            <comment xml:space="preserve">Warning: Do not edit this file. It is automatically generated from the
software project's code and your changes will be overwritten.

The tool to generate this file lives in openstack-doc-tools repository.

Please make any changes needed in the code, then run the
autogenerate-config-doc tool from the openstack-doc-tools repository, or
ask for help on the documentation mailing list, IRC channel or meeting.</comment>
            <target refid="cinder-dellsc"></target>
            <table classes="config-ref-table" ids="id1 cinder-dellsc" names="cinder-dellsc">
                <title>Description of Dell Storage Center volume driver configuration options</title>
                <tgroup cols="2">
                    <colspec colwidth="50"></colspec>
                    <colspec colwidth="50"></colspec>
                    <thead>
                        <row>
                            <entry>
                                <paragraph>Configuration option = Default value</paragraph>
                            </entry>
                            <entry>
                                <paragraph>Description</paragraph>
                            </entry>
                        </row>
                    </thead>
                    <tbody>
                        <row>
                            <entry>
                                <paragraph><strong>[DEFAULT]</strong></paragraph>
                            </entry>
                            <entry>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>dell_sc_api_port</literal> = <literal>3033</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(Port number) Dell API port</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>dell_sc_server_folder</literal> = <literal>openstack</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Name of the server folder to use on the Storage Center</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>dell_sc_ssn</literal> = <literal>64702</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(Integer) Storage Center System Serial Number</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>dell_sc_verify_cert</literal> = <literal>False</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(Boolean) Enable HTTPS SC certificate verification</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>dell_sc_volume_folder</literal> = <literal>openstack</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Name of the volume folder to use on the Storage Center</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>dell_server_os</literal> = <literal>Red Hat Linux 6.x</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Server OS type to use when creating a new server on the Storage Center.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>excluded_domain_ip</literal> = <literal>None</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(Unknown) Domain IP to be excluded from iSCSI returns.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>secondary_san_ip</literal> =</paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) IP address of secondary DSM controller</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>secondary_san_login</literal> = <literal>Admin</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Secondary DSM user name</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>secondary_san_password</literal> =</paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Secondary DSM user password name</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>secondary_sc_api_port</literal> = <literal>3033</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(Port number) Secondary Dell API port</paragraph>
                            </entry>
                        </row>
                    </tbody>
                </tgroup>
            </table>
        </section>
    </section>
</document>

<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/cinder/doc/source/configuration/block-storage/drivers/blockbridge-eps-driver.rst">
    <section ids="blockbridge-eps" names="blockbridge\ eps">
        <title>Blockbridge EPS</title>
        <section ids="introduction" names="introduction">
            <title>Introduction</title>
            <paragraph>Blockbridge is software that transforms commodity infrastructure into
                secure multi-tenant storage that operates as a programmable service. It
                provides automatic encryption, secure deletion, quality of service (QoS),
                replication, and programmable security capabilities on your choice of
                hardware. Blockbridge uses micro-segmentation to provide isolation that allows
                you to concurrently operate OpenStack, Docker, and bare-metal workflows on
                shared resources. When used with OpenStack, isolated management domains are
                dynamically created on a per-project basis. All volumes and clones, within and
                between projects, are automatically cryptographically isolated and implement
                secure deletion.</paragraph>
        </section>
        <section ids="architecture-reference" names="architecture\ reference">
            <title>Architecture reference</title>
            <paragraph><strong>Blockbridge architecture</strong></paragraph>
            <figure>
                <image candidates="{'*': 'configuration/block-storage/drivers/../../figures/bb-cinder-fig1.png'}" uri="configuration/block-storage/drivers/../../figures/bb-cinder-fig1.png" width="100%"></image>
            </figure>
            <section ids="control-paths" names="control\ paths">
                <title>Control paths</title>
                <paragraph>The Blockbridge driver is packaged with the core distribution of
                    OpenStack. Operationally, it executes in the context of the Block
                    Storage service. The driver communicates with an OpenStack-specific API
                    provided by the Blockbridge EPS platform. Blockbridge optionally
                    communicates with Identity, Compute, and Block Storage
                    services.</paragraph>
            </section>
            <section ids="block-storage-api" names="block\ storage\ api">
                <title>Block storage API</title>
                <paragraph>Blockbridge is API driven software-defined storage. The system
                    implements a native HTTP API that is tailored to the specific needs of
                    OpenStack. Each Block Storage service operation maps to a single
                    back-end API request that provides ACID semantics. The API is
                    specifically designed to reduce, if not eliminate, the possibility of
                    inconsistencies between the Block Storage service and external storage
                    infrastructure in the event of hardware, software or data center
                    failure.</paragraph>
            </section>
            <section ids="extended-management" names="extended\ management">
                <title>Extended management</title>
                <paragraph>OpenStack users may utilize Blockbridge interfaces to manage
                    replication, auditing, statistics, and performance information on a
                    per-project and per-volume basis. In addition, they can manage low-level
                    data security functions including verification of data authenticity and
                    encryption key delegation. Native integration with the Identity Service
                    allows tenants to use a single set of credentials. Integration with
                    Block storage and Compute services provides dynamic metadata mapping
                    when using Blockbridge management APIs and tools.</paragraph>
            </section>
            <section ids="attribute-based-provisioning" names="attribute-based\ provisioning">
                <title>Attribute-based provisioning</title>
                <paragraph>Blockbridge organizes resources using descriptive identifiers called
                    <emphasis>attributes</emphasis>. Attributes are assigned by administrators of the
                    infrastructure. They are used to describe the characteristics of storage
                    in an application-friendly way. Applications construct queries that
                    describe storage provisioning constraints and the Blockbridge storage
                    stack assembles the resources as described.</paragraph>
                <paragraph>Any given instance of a Blockbridge volume driver specifies a <emphasis>query</emphasis>
                    for resources. For example, a query could specify
                    <literal>'+ssd +10.0.0.0 +6nines -production iops.reserve=1000
capacity.reserve=30%'</literal>. This query is satisfied by selecting SSD
                    resources, accessible on the 10.0.0.0 network, with high resiliency, for
                    non-production workloads, with guaranteed IOPS of 1000 and a storage
                    reservation for 30% of the volume capacity specified at create time.
                    Queries and parameters are completely administrator defined: they
                    reflect the layout, resource, and organizational goals of a specific
                    deployment.</paragraph>
            </section>
        </section>
        <section ids="supported-operations" names="supported\ operations">
            <title>Supported operations</title>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>Create, delete, clone, attach, and detach volumes</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Create and delete volume snapshots</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Create a volume from a snapshot</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Copy an image to a volume</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Copy a volume to an image</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Extend a volume</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Get volume statistics</paragraph>
                </list_item>
            </bullet_list>
        </section>
        <section ids="supported-protocols" names="supported\ protocols">
            <title>Supported protocols</title>
            <paragraph>Blockbridge provides iSCSI access to storage. A unique iSCSI data fabric
                is programmatically assembled when a volume is attached to an instance.
                A fabric is disassembled when a volume is detached from an instance.
                Each volume is an isolated SCSI device that supports persistent
                reservations.</paragraph>
        </section>
        <section ids="configuration-steps" names="configuration\ steps">
            <title>Configuration steps</title>
            <target refid="cg-create-an-authentication-token"></target>
            <section ids="create-an-authentication-token cg-create-an-authentication-token" names="create\ an\ authentication\ token cg_create_an_authentication_token">
                <title>Create an authentication token</title>
                <paragraph>Whenever possible, avoid using password-based authentication. Even if
                    you have created a role-restricted administrative user via Blockbridge,
                    token-based authentication is preferred. You can generate persistent
                    authentication tokens using the Blockbridge command-line tool as
                    follows:</paragraph>
                <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ bb -H bb-mn authorization create --notes "OpenStack" --restrict none
Authenticating to https://bb-mn/api

Enter user or access token: system
Password for system:
Authenticated; token expires in 3599 seconds.

== Authorization: ATH4762894C40626410
notes                 OpenStack
serial                ATH4762894C40626410
account               system (ACT0762594C40626440)
user                  system (USR1B62094C40626440)
enabled               yes
created at            2015-10-24 22:08:48 +0000
access type           online
token suffix          xaKUy3gw
restrict              none

== Access Token
access token          1/elvMWilMvcLAajl...3ms3U1u2KzfaMw6W8xaKUy3gw

*** Remember to record your access token!</literal_block>
            </section>
            <section ids="create-volume-type" names="create\ volume\ type">
                <title>Create volume type</title>
                <paragraph>Before configuring and enabling the Blockbridge volume driver, register
                    an OpenStack volume type and associate it with a
                    <literal>volume_backend_name</literal>. In this example, a volume type, ‘Production’,
                    is associated with the <literal>volume_backend_name</literal> ‘blockbridge_prod’:</paragraph>
                <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ openstack volume type create Production
$ openstack volume type set --property volume_backend_name=blockbridge_prod Production</literal_block>
            </section>
            <section ids="specify-volume-driver" names="specify\ volume\ driver">
                <title>Specify volume driver</title>
                <paragraph>Configure the Blockbridge volume driver in <literal>/etc/cinder/cinder.conf</literal>.
                    Your <literal>volume_backend_name</literal> must match the value specified in the
                    <literal_strong classes="command">openstack volume type set</literal_strong> command in the previous step.</paragraph>
                <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">volume_driver = cinder.volume.drivers.blockbridge.BlockbridgeISCSIDriver
volume_backend_name = blockbridge_prod</literal_block>
            </section>
            <section ids="specify-api-endpoint-and-authentication" names="specify\ api\ endpoint\ and\ authentication">
                <title>Specify API endpoint and authentication</title>
                <paragraph>Configure the API endpoint and authentication. The following example
                    uses an authentication token. You must create your own as described in
                    <reference internal="True" refid="cg-create-an-authentication-token"><inline classes="std std-ref">Create an authentication token</inline></reference>.</paragraph>
                <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">blockbridge_api_host = [ip or dns of management cluster]
blockbridge_auth_token = 1/elvMWilMvcLAajl...3ms3U1u2KzfaMw6W8xaKUy3gw</literal_block>
            </section>
            <section ids="specify-resource-query" names="specify\ resource\ query">
                <title>Specify resource query</title>
                <paragraph>By default, a single pool is configured (implied) with a default
                    resource query of <literal>'+openstack'</literal>. Within Blockbridge, datastore
                    resources that advertise the ‘openstack’ attribute will be selected to
                    fulfill OpenStack provisioning requests. If you prefer a more specific
                    query, define a custom pool configuration.</paragraph>
                <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">blockbridge_pools = Production: +production +qos iops.reserve=5000</literal_block>
                <paragraph>Pools support storage systems that offer multiple classes of service.
                    You may wish to configure multiple pools to implement more sophisticated
                    scheduling capabilities.</paragraph>
            </section>
        </section>
        <section ids="configuration-options" names="configuration\ options">
            <title>Configuration options</title>
            <comment xml:space="preserve">Warning: Do not edit this file. It is automatically generated from the
software project's code and your changes will be overwritten.

The tool to generate this file lives in openstack-doc-tools repository.

Please make any changes needed in the code, then run the
autogenerate-config-doc tool from the openstack-doc-tools repository, or
ask for help on the documentation mailing list, IRC channel or meeting.</comment>
            <target refid="cinder-blockbridge"></target>
            <table classes="config-ref-table" ids="id1 cinder-blockbridge" names="cinder-blockbridge">
                <title>Description of BlockBridge EPS volume driver configuration options</title>
                <tgroup cols="2">
                    <colspec colwidth="50"></colspec>
                    <colspec colwidth="50"></colspec>
                    <thead>
                        <row>
                            <entry>
                                <paragraph>Configuration option = Default value</paragraph>
                            </entry>
                            <entry>
                                <paragraph>Description</paragraph>
                            </entry>
                        </row>
                    </thead>
                    <tbody>
                        <row>
                            <entry>
                                <paragraph><strong>[DEFAULT]</strong></paragraph>
                            </entry>
                            <entry>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>blockbridge_api_host</literal> = <literal>None</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) IP address/hostname of Blockbridge API.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>blockbridge_api_port</literal> = <literal>None</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(Integer) Override HTTPS port to connect to Blockbridge API server.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>blockbridge_auth_password</literal> = <literal>None</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Blockbridge API password (for auth scheme ‘password’)</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>blockbridge_auth_scheme</literal> = <literal>token</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Blockbridge API authentication scheme (token or password)</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>blockbridge_auth_token</literal> = <literal>None</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Blockbridge API token (for auth scheme ‘token’)</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>blockbridge_auth_user</literal> = <literal>None</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Blockbridge API user (for auth scheme ‘password’)</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>blockbridge_default_pool</literal> = <literal>None</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) Default pool name if unspecified.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>blockbridge_pools</literal> = <literal>{'OpenStack': '+openstack'}</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(Dict) Defines the set of exposed pools and their associated backend query strings</paragraph>
                            </entry>
                        </row>
                    </tbody>
                </tgroup>
            </table>
            <target refid="cg-configuration-example"></target>
        </section>
        <section ids="configuration-example cg-configuration-example" names="configuration\ example cg_configuration_example">
            <title>Configuration example</title>
            <paragraph><literal>cinder.conf</literal> example file</paragraph>
            <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">[Default]
enabled_backends = bb_devel bb_prod

[bb_prod]
volume_driver = cinder.volume.drivers.blockbridge.BlockbridgeISCSIDriver
volume_backend_name = blockbridge_prod
blockbridge_api_host = [ip or dns of management cluster]
blockbridge_auth_token = 1/elvMWilMvcLAajl...3ms3U1u2KzfaMw6W8xaKUy3gw
blockbridge_pools = Production: +production +qos iops.reserve=5000

[bb_devel]
volume_driver = cinder.volume.drivers.blockbridge.BlockbridgeISCSIDriver
volume_backend_name = blockbridge_devel
blockbridge_api_host = [ip or dns of management cluster]
blockbridge_auth_token = 1/elvMWilMvcLAajl...3ms3U1u2KzfaMw6W8xaKUy3gw
blockbridge_pools = Development: +development</literal_block>
        </section>
        <section ids="multiple-volume-types" names="multiple\ volume\ types">
            <title>Multiple volume types</title>
            <paragraph>Volume <emphasis>types</emphasis> are exposed to tenants, <emphasis>pools</emphasis> are not. To offer
                multiple classes of storage to OpenStack tenants, you should define
                multiple volume types. Simply repeat the process above for each desired
                type. Be sure to specify a unique <literal>volume_backend_name</literal> and pool
                configuration for each type. The
                <reference internal="True" refid="cg-configuration-example"><inline classes="std std-ref">cinder.conf</inline></reference> example included with
                this documentation illustrates configuration of multiple types.</paragraph>
        </section>
        <section ids="testing-resources" names="testing\ resources">
            <title>Testing resources</title>
            <paragraph>Blockbridge is freely available for testing purposes and deploys in
                seconds as a Docker container. This is the same container used to run
                continuous integration for OpenStack. For more information visit
                <reference name="www.blockbridge.io" refuri="http://www.blockbridge.io">www.blockbridge.io</reference>.</paragraph>
        </section>
    </section>
</document>

<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/cinder/doc/source/configuration/block-storage/drivers/netapp-volume-driver.rst">
    <section ids="netapp-unified-driver" names="netapp\ unified\ driver">
        <title>NetApp unified driver</title>
        <paragraph>The NetApp unified driver is a Block Storage driver that supports
            multiple storage families and protocols. A storage family corresponds to
            storage systems built on different NetApp technologies such as clustered
            Data ONTAP, Data ONTAP operating in 7-Mode, and E-Series. The storage
            protocol refers to the protocol used to initiate data storage and access
            operations on those storage systems like iSCSI and NFS. The NetApp
            unified driver can be configured to provision and manage OpenStack
            volumes on a given storage family using a specified storage protocol.
            Also, the NetApp unified driver supports over subscription or over
            provisioning when thin provisioned Block Storage volumes are in use
            on an E-Series backend. The OpenStack volumes can then be used for
            accessing and storing data using the storage protocol on the storage
            family system. The NetApp unified driver is an extensible interface
            that can support new storage families and protocols.</paragraph>
        <important>
            <paragraph>The NetApp unified driver in cinder currently provides integration for
                two major generations of the ONTAP operating system: the current
                clustered ONTAP and the legacy 7-mode. NetApp’s full support for
                7-mode ended in August of 2015 and the current limited support period
                will end in February of 2017.</paragraph>
            <paragraph>The 7-mode components of the cinder NetApp unified driver have now been
                marked deprecated and will be removed in the Queens release. This will
                apply to all three protocols currently supported in this driver: iSCSI,
                FC and NFS.</paragraph>
        </important>
        <note>
            <paragraph>With the Juno release of OpenStack, Block Storage has
                introduced the concept of storage pools, in which a single
                Block Storage back end may present one or more logical
                storage resource pools from which Block Storage will
                select a storage location when provisioning volumes.</paragraph>
            <paragraph>In releases prior to Juno, the NetApp unified driver contained some
                scheduling logic that determined which NetApp storage container
                (namely, a FlexVol volume for Data ONTAP, or a dynamic disk pool for
                E-Series) that a new Block Storage volume would be placed into.</paragraph>
            <paragraph>With the introduction of pools, all scheduling logic is performed
                completely within the Block Storage scheduler, as each
                NetApp storage container is directly exposed to the Block
                Storage scheduler as a storage pool. Previously, the NetApp
                unified driver presented an aggregated view to the scheduler and
                made a final placement decision as to which NetApp storage container
                the Block Storage volume would be provisioned into.</paragraph>
        </note>
        <section ids="netapp-clustered-data-ontap-storage-family" names="netapp\ clustered\ data\ ontap\ storage\ family">
            <title>NetApp clustered Data ONTAP storage family</title>
            <paragraph>The NetApp clustered Data ONTAP storage family represents a
                configuration group which provides Compute instances access to
                clustered Data ONTAP storage systems. At present it can be configured in
                Block Storage to work with iSCSI and NFS storage protocols.</paragraph>
            <section ids="netapp-iscsi-configuration-for-clustered-data-ontap" names="netapp\ iscsi\ configuration\ for\ clustered\ data\ ontap">
                <title>NetApp iSCSI configuration for clustered Data ONTAP</title>
                <paragraph>The NetApp iSCSI configuration for clustered Data ONTAP is an interface
                    from OpenStack to clustered Data ONTAP storage systems. It provisions
                    and manages the SAN block storage entity, which is a NetApp LUN that
                    can be accessed using the iSCSI protocol.</paragraph>
                <paragraph>The iSCSI configuration for clustered Data ONTAP is a direct interface
                    from Block Storage to the clustered Data ONTAP instance and as
                    such does not require additional management software to achieve the
                    desired functionality. It uses NetApp APIs to interact with the
                    clustered Data ONTAP instance.</paragraph>
                <paragraph><strong>Configuration options</strong></paragraph>
                <paragraph>Configure the volume driver, storage family, and storage protocol to the
                    NetApp unified driver, clustered Data ONTAP, and iSCSI respectively by
                    setting the <literal>volume_driver</literal>, <literal>netapp_storage_family</literal> and
                    <literal>netapp_storage_protocol</literal> options in the <literal>cinder.conf</literal> file as follows:</paragraph>
                <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">volume_driver = cinder.volume.drivers.netapp.common.NetAppDriver
netapp_storage_family = ontap_cluster
netapp_storage_protocol = iscsi
netapp_vserver = openstack-vserver
netapp_server_hostname = myhostname
netapp_server_port = port
netapp_login = username
netapp_password = password</literal_block>
                <note>
                    <paragraph>To use the iSCSI protocol, you must override the default value of
                        <literal>netapp_storage_protocol</literal> with <literal>iscsi</literal>.</paragraph>
                </note>
                <comment xml:space="preserve">Warning: Do not edit this file. It is automatically generated from the
software project's code and your changes will be overwritten.

The tool to generate this file lives in openstack-doc-tools repository.

Please make any changes needed in the code, then run the
autogenerate-config-doc tool from the openstack-doc-tools repository, or
ask for help on the documentation mailing list, IRC channel or meeting.</comment>
                <target refid="cinder-netapp-cdot-iscsi"></target>
                <table classes="config-ref-table" ids="id5 cinder-netapp-cdot-iscsi" names="cinder-netapp_cdot_iscsi">
                    <title>Description of NetApp cDOT iSCSI driver configuration options</title>
                    <tgroup cols="2">
                        <colspec colwidth="50"></colspec>
                        <colspec colwidth="50"></colspec>
                        <thead>
                            <row>
                                <entry>
                                    <paragraph>Configuration option = Default value</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Description</paragraph>
                                </entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry>
                                    <paragraph><strong>[DEFAULT]</strong></paragraph>
                                </entry>
                                <entry>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_login</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) Administrative user account name used to access the storage system or proxy server.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_lun_ostype</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) This option defines the type of operating system that will access a LUN exported from Data ONTAP; it is assigned to the LUN at the time it is created.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_lun_space_reservation</literal> = <literal>enabled</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) This option determines if storage space is reserved for LUN allocation. If enabled, LUNs are thick provisioned. If space reservation is disabled, storage space is allocated on demand.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_partner_backend_name</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) The name of the config.conf stanza for a Data ONTAP (7-mode) HA partner. This option is only used by the driver when connecting to an instance with a storage family of Data ONTAP operating in 7-Mode, and it is required if the storage protocol selected is FC.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_password</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) Password for the administrative user account specified in the netapp_login option.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_pool_name_search_pattern</literal> = <literal>(.+)</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) This option is used to restrict provisioning to the specified pools. Specify the value of this option to be a regular expression which will be applied to the names of objects from the storage backend which represent pools in Cinder. This option is only utilized when the storage protocol is configured to use iSCSI or FC.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_replication_aggregate_map</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Unknown) Multi opt of dictionaries to represent the aggregate mapping between source and destination back ends when using whole back end replication. For every source aggregate associated with a cinder pool (NetApp FlexVol), you would need to specify the destination aggregate on the replication target device. A replication target device is configured with the configuration option replication_device. Specify this option as many times as you have replication devices. Each entry takes the standard dict config form: netapp_replication_aggregate_map = backend_id:&lt;name_of_replication_device_section&gt;,src_aggr_name1:dest_aggr_name1,src_aggr_name2:dest_aggr_name2,…</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_server_hostname</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) The hostname (or IP address) for the storage system or proxy server.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_server_port</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Integer) The TCP port to use for communication with the storage system or proxy server. If not specified, Data ONTAP drivers will use 80 for HTTP and 443 for HTTPS; E-Series will use 8080 for HTTP and 8443 for HTTPS.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_size_multiplier</literal> = <literal>1.2</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Floating point) The quantity to be multiplied by the requested volume size to ensure enough space is available on the virtual storage server (Vserver) to fulfill the volume creation request. Note: this option is deprecated and will be removed in favor of “reserved_percentage” in the Mitaka release.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_snapmirror_quiesce_timeout</literal> = <literal>3600</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Integer) The maximum time in seconds to wait for existing SnapMirror transfers to complete before aborting during a failover.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_storage_family</literal> = <literal>ontap_cluster</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) The storage family type used on the storage system; valid values are ontap_7mode for using Data ONTAP operating in 7-Mode, ontap_cluster for using clustered Data ONTAP, or eseries for using E-Series.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_storage_protocol</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) The storage protocol to be used on the data path with the storage system.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_transport_type</literal> = <literal>http</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) The transport protocol used when communicating with the storage system or proxy server.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_vserver</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) This option specifies the virtual storage server (Vserver) name on the storage cluster on which provisioning of block storage volumes should occur.</paragraph>
                                </entry>
                            </row>
                        </tbody>
                    </tgroup>
                </table>
                <note>
                    <paragraph>If you specify an account in the <literal>netapp_login</literal> that only has
                        virtual storage server (Vserver) administration privileges (rather
                        than cluster-wide administration privileges), some advanced features
                        of the NetApp unified driver will not work and you may see warnings
                        in the Block Storage logs.</paragraph>
                </note>
                <note>
                    <paragraph>The driver supports iSCSI CHAP uni-directional authentication.
                        To enable it, set the <literal>use_chap_auth</literal> option to <literal>True</literal>.</paragraph>
                </note>
                <tip>
                    <paragraph>For more information on these options and other deployment and
                        operational scenarios, visit the <reference name="NetApp OpenStack Deployment and Operations Guide" refuri="http://netapp.github.io/openstack-deploy-ops-guide/">NetApp OpenStack Deployment and
                            Operations
                            Guide</reference>.</paragraph>
                </tip>
            </section>
            <section ids="netapp-nfs-configuration-for-clustered-data-ontap" names="netapp\ nfs\ configuration\ for\ clustered\ data\ ontap">
                <title>NetApp NFS configuration for clustered Data ONTAP</title>
                <paragraph>The NetApp NFS configuration for clustered Data ONTAP is an interface from
                    OpenStack to a clustered Data ONTAP system for provisioning and managing
                    OpenStack volumes on NFS exports provided by the clustered Data ONTAP system
                    that are accessed using the NFS protocol.</paragraph>
                <paragraph>The NFS configuration for clustered Data ONTAP is a direct interface from
                    Block Storage to the clustered Data ONTAP instance and as such does
                    not require any additional management software to achieve the desired
                    functionality. It uses NetApp APIs to interact with the clustered Data ONTAP
                    instance.</paragraph>
                <paragraph><strong>Configuration options</strong></paragraph>
                <paragraph>Configure the volume driver, storage family, and storage protocol to NetApp
                    unified driver, clustered Data ONTAP, and NFS respectively by setting the
                    <literal>volume_driver</literal>, <literal>netapp_storage_family</literal>, and <literal>netapp_storage_protocol</literal>
                    options in the <literal>cinder.conf</literal> file as follows:</paragraph>
                <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">volume_driver = cinder.volume.drivers.netapp.common.NetAppDriver
netapp_storage_family = ontap_cluster
netapp_storage_protocol = nfs
netapp_vserver = openstack-vserver
netapp_server_hostname = myhostname
netapp_server_port = port
netapp_login = username
netapp_password = password
nfs_shares_config = /etc/cinder/nfs_shares</literal_block>
                <comment xml:space="preserve">Warning: Do not edit this file. It is automatically generated from the
software project's code and your changes will be overwritten.

The tool to generate this file lives in openstack-doc-tools repository.

Please make any changes needed in the code, then run the
autogenerate-config-doc tool from the openstack-doc-tools repository, or
ask for help on the documentation mailing list, IRC channel or meeting.</comment>
                <target refid="cinder-netapp-cdot-nfs"></target>
                <table classes="config-ref-table" ids="id6 cinder-netapp-cdot-nfs" names="cinder-netapp_cdot_nfs">
                    <title>Description of NetApp cDOT NFS driver configuration options</title>
                    <tgroup cols="2">
                        <colspec colwidth="50"></colspec>
                        <colspec colwidth="50"></colspec>
                        <thead>
                            <row>
                                <entry>
                                    <paragraph>Configuration option = Default value</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Description</paragraph>
                                </entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry>
                                    <paragraph><strong>[DEFAULT]</strong></paragraph>
                                </entry>
                                <entry>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>expiry_thres_minutes</literal> = <literal>720</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Integer) This option specifies the threshold for last access time for images in the NFS image cache. When a cache cleaning cycle begins, images in the cache that have not been accessed in the last M minutes, where M is the value of this parameter, will be deleted from the cache to create free space on the NFS share.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_copyoffload_tool_path</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) This option specifies the path of the NetApp copy offload tool binary. Ensure that the binary has execute permissions set which allow the effective user of the cinder-volume process to execute the file.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_host_type</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) This option defines the type of operating system for all initiators that can access a LUN. This information is used when mapping LUNs to individual hosts or groups of hosts.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_host_type</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) This option defines the type of operating system for all initiators that can access a LUN. This information is used when mapping LUNs to individual hosts or groups of hosts.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_login</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) Administrative user account name used to access the storage system or proxy server.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_lun_ostype</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) This option defines the type of operating system that will access a LUN exported from Data ONTAP; it is assigned to the LUN at the time it is created.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_partner_backend_name</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) The name of the config.conf stanza for a Data ONTAP (7-mode) HA partner. This option is only used by the driver when connecting to an instance with a storage family of Data ONTAP operating in 7-Mode, and it is required if the storage protocol selected is FC.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_password</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) Password for the administrative user account specified in the netapp_login option.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_pool_name_search_pattern</literal> = <literal>(.+)</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) This option is used to restrict provisioning to the specified pools. Specify the value of this option to be a regular expression which will be applied to the names of objects from the storage backend which represent pools in Cinder. This option is only utilized when the storage protocol is configured to use iSCSI or FC.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_replication_aggregate_map</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Unknown) Multi opt of dictionaries to represent the aggregate mapping between source and destination back ends when using whole back end replication. For every source aggregate associated with a cinder pool (NetApp FlexVol), you would need to specify the destination aggregate on the replication target device. A replication target device is configured with the configuration option replication_device. Specify this option as many times as you have replication devices. Each entry takes the standard dict config form: netapp_replication_aggregate_map = backend_id:&lt;name_of_replication_device_section&gt;,src_aggr_name1:dest_aggr_name1,src_aggr_name2:dest_aggr_name2,…</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_server_hostname</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) The hostname (or IP address) for the storage system or proxy server.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_server_port</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Integer) The TCP port to use for communication with the storage system or proxy server. If not specified, Data ONTAP drivers will use 80 for HTTP and 443 for HTTPS; E-Series will use 8080 for HTTP and 8443 for HTTPS.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_snapmirror_quiesce_timeout</literal> = <literal>3600</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Integer) The maximum time in seconds to wait for existing SnapMirror transfers to complete before aborting during a failover.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_storage_family</literal> = <literal>ontap_cluster</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) The storage family type used on the storage system; valid values are ontap_7mode for using Data ONTAP operating in 7-Mode, ontap_cluster for using clustered Data ONTAP, or eseries for using E-Series.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_storage_protocol</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) The storage protocol to be used on the data path with the storage system.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_transport_type</literal> = <literal>http</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) The transport protocol used when communicating with the storage system or proxy server.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_vserver</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) This option specifies the virtual storage server (Vserver) name on the storage cluster on which provisioning of block storage volumes should occur.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>thres_avl_size_perc_start</literal> = <literal>20</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Integer) If the percentage of available space for an NFS share has dropped below the value specified by this option, the NFS image cache will be cleaned.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>thres_avl_size_perc_stop</literal> = <literal>60</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Integer) When the percentage of available space on an NFS share has reached the percentage specified by this option, the driver will stop clearing files from the NFS image cache that have not been accessed in the last M minutes, where M is the value of the expiry_thres_minutes configuration option.</paragraph>
                                </entry>
                            </row>
                        </tbody>
                    </tgroup>
                </table>
                <note>
                    <paragraph>Additional NetApp NFS configuration options are shared with the
                        generic NFS driver. These options can be found here:
                        <reference internal="True" refuri="nfs-volume-driver#cinder-storage-nfs"><inline classes="std std-ref">Description of NFS storage configuration options</inline></reference>.</paragraph>
                </note>
                <note>
                    <paragraph>If you specify an account in the <literal>netapp_login</literal> that only has
                        virtual storage server (Vserver) administration privileges (rather
                        than cluster-wide administration privileges), some advanced features
                        of the NetApp unified driver will not work and you may see warnings
                        in the Block Storage logs.</paragraph>
                </note>
            </section>
            <section ids="netapp-nfs-copy-offload-client" names="netapp\ nfs\ copy\ offload\ client">
                <title>NetApp NFS Copy Offload client</title>
                <paragraph>A feature was added in the Icehouse release of the NetApp unified driver that
                    enables Image service images to be efficiently copied to a destination Block
                    Storage volume. When the Block Storage and Image service are configured to use
                    the NetApp NFS Copy Offload client, a controller-side copy will be attempted
                    before reverting to downloading the image from the Image service. This improves
                    image provisioning times while reducing the consumption of bandwidth and CPU
                    cycles on the host(s) running the Image and Block Storage services. This is due
                    to the copy operation being performed completely within the storage cluster.</paragraph>
                <paragraph>The NetApp NFS Copy Offload client can be used in either of the following
                    scenarios:</paragraph>
                <bullet_list bullet="-">
                    <list_item>
                        <paragraph>The Image service is configured to store images in an NFS share that is
                            exported from a NetApp FlexVol volume <emphasis>and</emphasis> the destination for the new Block
                            Storage volume will be on an NFS share exported from a different FlexVol
                            volume than the one used by the Image service. Both FlexVols must be located
                            within the same cluster.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>The source image from the Image service has already been cached in an NFS
                            image cache within a Block Storage back end. The cached image resides on a
                            different FlexVol volume than the destination for the new Block Storage
                            volume. Both FlexVols must be located within the same cluster.</paragraph>
                    </list_item>
                </bullet_list>
                <paragraph>To use this feature, you must configure the Image service, as follows:</paragraph>
                <bullet_list bullet="-">
                    <list_item>
                        <paragraph>Set the <literal>default_store</literal> configuration option to <literal>file</literal>.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Set the <literal>filesystem_store_datadir</literal> configuration option to the path
                            to the Image service NFS export.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Set the <literal>show_image_direct_url</literal> configuration option to <literal>True</literal>.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Set the <literal>show_multiple_locations</literal> configuration option to <literal>True</literal>.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Set the <literal>filesystem_store_metadata_file</literal> configuration option to a metadata
                            file. The metadata file should contain a JSON object that contains the
                            correct information about the NFS export used by the Image service.</paragraph>
                    </list_item>
                </bullet_list>
                <paragraph>To use this feature, you must configure the Block Storage service, as follows:</paragraph>
                <bullet_list bullet="-">
                    <list_item>
                        <paragraph>Set the <literal>netapp_copyoffload_tool_path</literal> configuration option to the path to
                            the NetApp Copy Offload binary.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Set the <literal>glance_api_version</literal> configuration option to <literal>2</literal>.</paragraph>
                        <important>
                            <paragraph>This feature requires that:</paragraph>
                            <bullet_list bullet="-">
                                <list_item>
                                    <paragraph>The storage system must have Data ONTAP v8.2 or greater installed.</paragraph>
                                </list_item>
                                <list_item>
                                    <paragraph>The vStorage feature must be enabled on each storage virtual machine
                                        (SVM, also known as a Vserver) that is permitted to interact with the
                                        copy offload client.</paragraph>
                                </list_item>
                                <list_item>
                                    <paragraph>To configure the copy offload workflow, enable NFS v4.0 or greater and
                                        export it from the SVM.</paragraph>
                                </list_item>
                            </bullet_list>
                        </important>
                    </list_item>
                </bullet_list>
                <tip>
                    <paragraph>To download the NetApp copy offload binary to be utilized in conjunction
                        with the <literal>netapp_copyoffload_tool_path</literal> configuration option, please visit
                        the Utility Toolchest page at the <reference name="NetApp Support portal" refuri="http://mysupport.netapp.com/NOW/download/tools/ntap_openstack_nfs/">NetApp Support portal</reference>
                        (login is required).</paragraph>
                </tip>
                <tip>
                    <paragraph>For more information on these options and other deployment and operational
                        scenarios, visit the <reference name="NetApp OpenStack Deployment and Operations Guide" refuri="http://netapp.github.io/openstack-deploy-ops-guide/">NetApp OpenStack Deployment and Operations Guide</reference>.</paragraph>
                </tip>
            </section>
            <section ids="netapp-supported-extra-specs-for-clustered-data-ontap" names="netapp-supported\ extra\ specs\ for\ clustered\ data\ ontap">
                <title>NetApp-supported extra specs for clustered Data ONTAP</title>
                <paragraph>Extra specs enable vendors to specify extra filter criteria.
                    The Block Storage scheduler uses the specs when the scheduler determines
                    which volume node should fulfill a volume provisioning request.
                    When you use the NetApp unified driver with a clustered Data ONTAP
                    storage system, you can leverage extra specs with Block Storage
                    volume types to ensure that Block Storage volumes are created
                    on storage back ends that have certain properties.
                    An example of this is when you configure QoS, mirroring,
                    or compression for a storage back end.</paragraph>
                <paragraph>Extra specs are associated with Block Storage volume types.
                    When users request volumes of a particular volume type, the volumes
                    are created on storage back ends that meet the list of requirements.
                    An example of this is the back ends that have the available space or
                    extra specs. Use the specs in the following table to configure volumes.
                    Define Block Storage volume types by using the <literal_strong classes="command">openstack volume
                        type set</literal_strong> command.</paragraph>
                <table ids="id7">
                    <title>Description of extra specs options for NetApp Unified Driver with Clustered Data ONTAP</title>
                    <tgroup cols="3">
                        <colspec colwidth="33"></colspec>
                        <colspec colwidth="33"></colspec>
                        <colspec colwidth="33"></colspec>
                        <thead>
                            <row>
                                <entry>
                                    <paragraph>Extra spec</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Type</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Description</paragraph>
                                </entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_raid_type</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>String</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Limit the candidate volume list based on one of the following raid
                                        types: <literal>raid4, raid_dp</literal>.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_disk_type</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>String</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Limit the candidate volume list based on one of the following disk
                                        types: <literal>ATA, BSAS, EATA, FCAL, FSAS, LUN, MSATA, SAS, SATA, SCSI, XATA,
XSAS, or SSD.</literal></paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp:qos_policy_group</literal> <footnote_reference ids="id1" refid="id3">1</footnote_reference></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>String</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Specify the name of a QoS policy group, which defines measurable Service
                                        Level Objectives, that should be applied to the OpenStack Block Storage
                                        volume at the time of volume creation. Ensure that the QoS policy group
                                        object within Data ONTAP should be defined before an OpenStack Block
                                        Storage volume is created, and that the QoS policy group is not
                                        associated with the destination FlexVol volume.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_mirrored</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Boolean</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Limit the candidate volume list to only the ones that are mirrored on
                                        the storage controller.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_unmirrored</literal> <footnote_reference ids="id2" refid="id4">2</footnote_reference></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Boolean</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Limit the candidate volume list to only the ones that are not mirrored
                                        on the storage controller.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_dedup</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Boolean</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Limit the candidate volume list to only the ones that have deduplication
                                        enabled on the storage controller.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_nodedup</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Boolean</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Limit the candidate volume list to only the ones that have deduplication
                                        disabled on the storage controller.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_compression</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Boolean</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Limit the candidate volume list to only the ones that have compression
                                        enabled on the storage controller.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_nocompression</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Boolean</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Limit the candidate volume list to only the ones that have compression
                                        disabled on the storage controller.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_thin_provisioned</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Boolean</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Limit the candidate volume list to only the ones that support thin
                                        provisioning on the storage controller.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_thick_provisioned</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Boolean</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Limit the candidate volume list to only the ones that support thick
                                        provisioning on the storage controller.</paragraph>
                                </entry>
                            </row>
                        </tbody>
                    </tgroup>
                </table>
                <footnote backrefs="id1" ids="id3" names="1">
                    <label>1</label>
                    <paragraph>Please note that this extra spec has a colon (<literal>:</literal>) in its name
                        because it is used by the driver to assign the QoS policy group to
                        the OpenStack Block Storage volume after it has been provisioned.</paragraph>
                </footnote>
                <footnote backrefs="id2" ids="id4" names="2">
                    <label>2</label>
                    <paragraph>In the Juno release, these negative-assertion extra specs are
                        formally deprecated by the NetApp unified driver. Instead of using
                        the deprecated negative-assertion extra specs (for example,
                        <literal>netapp_unmirrored</literal>) with a value of <literal>true</literal>, use the
                        corresponding positive-assertion extra spec (for example,
                        <literal>netapp_mirrored</literal>) with a value of <literal>false</literal>.</paragraph>
                </footnote>
            </section>
        </section>
        <section ids="netapp-data-ontap-operating-in-7-mode-storage-family" names="netapp\ data\ ontap\ operating\ in\ 7-mode\ storage\ family">
            <title>NetApp Data ONTAP operating in 7-Mode storage family</title>
            <paragraph>The NetApp Data ONTAP operating in 7-Mode storage family represents a
                configuration group which provides Compute instances access to 7-Mode
                storage systems. At present it can be configured in Block Storage to
                work with iSCSI and NFS storage protocols.</paragraph>
            <section ids="netapp-iscsi-configuration-for-data-ontap-operating-in-7-mode" names="netapp\ iscsi\ configuration\ for\ data\ ontap\ operating\ in\ 7-mode">
                <title>NetApp iSCSI configuration for Data ONTAP operating in 7-Mode</title>
                <paragraph>The NetApp iSCSI configuration for Data ONTAP operating in 7-Mode is an
                    interface from OpenStack to Data ONTAP operating in 7-Mode storage systems for
                    provisioning and managing the SAN block storage entity, that is, a LUN which
                    can be accessed using iSCSI protocol.</paragraph>
                <paragraph>The iSCSI configuration for Data ONTAP operating in 7-Mode is a direct
                    interface from OpenStack to Data ONTAP operating in 7-Mode storage system and
                    it does not require additional management software to achieve the desired
                    functionality. It uses NetApp ONTAPI to interact with the Data ONTAP operating
                    in 7-Mode storage system.</paragraph>
                <paragraph><strong>Configuration options</strong></paragraph>
                <paragraph>Configure the volume driver, storage family and storage protocol to the NetApp
                    unified driver, Data ONTAP operating in 7-Mode, and iSCSI respectively by
                    setting the <literal>volume_driver</literal>, <literal>netapp_storage_family</literal> and
                    <literal>netapp_storage_protocol</literal> options in the <literal>cinder.conf</literal> file as follows:</paragraph>
                <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">volume_driver = cinder.volume.drivers.netapp.common.NetAppDriver
netapp_storage_family = ontap_7mode
netapp_storage_protocol = iscsi
netapp_server_hostname = myhostname
netapp_server_port = 80
netapp_login = username
netapp_password = password</literal_block>
                <note>
                    <paragraph>To use the iSCSI protocol, you must override the default value of
                        <literal>netapp_storage_protocol</literal> with <literal>iscsi</literal>.</paragraph>
                </note>
                <comment xml:space="preserve">Warning: Do not edit this file. It is automatically generated from the
software project's code and your changes will be overwritten.

The tool to generate this file lives in openstack-doc-tools repository.

Please make any changes needed in the code, then run the
autogenerate-config-doc tool from the openstack-doc-tools repository, or
ask for help on the documentation mailing list, IRC channel or meeting.</comment>
                <target refid="cinder-netapp-7mode-iscsi"></target>
                <table classes="config-ref-table" ids="id8 cinder-netapp-7mode-iscsi" names="cinder-netapp_7mode_iscsi">
                    <title>Description of NetApp 7-Mode iSCSI driver configuration options</title>
                    <tgroup cols="2">
                        <colspec colwidth="50"></colspec>
                        <colspec colwidth="50"></colspec>
                        <thead>
                            <row>
                                <entry>
                                    <paragraph>Configuration option = Default value</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Description</paragraph>
                                </entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry>
                                    <paragraph><strong>[DEFAULT]</strong></paragraph>
                                </entry>
                                <entry>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_login</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) Administrative user account name used to access the storage system or proxy server.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_partner_backend_name</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) The name of the config.conf stanza for a Data ONTAP (7-mode) HA partner. This option is only used by the driver when connecting to an instance with a storage family of Data ONTAP operating in 7-Mode, and it is required if the storage protocol selected is FC.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_password</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) Password for the administrative user account specified in the netapp_login option.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_pool_name_search_pattern</literal> = <literal>(.+)</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) This option is used to restrict provisioning to the specified pools. Specify the value of this option to be a regular expression which will be applied to the names of objects from the storage backend which represent pools in Cinder. This option is only utilized when the storage protocol is configured to use iSCSI or FC.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_replication_aggregate_map</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Unknown) Multi opt of dictionaries to represent the aggregate mapping between source and destination back ends when using whole back end replication. For every source aggregate associated with a cinder pool (NetApp FlexVol), you would need to specify the destination aggregate on the replication target device. A replication target device is configured with the configuration option replication_device. Specify this option as many times as you have replication devices. Each entry takes the standard dict config form: netapp_replication_aggregate_map = backend_id:&lt;name_of_replication_device_section&gt;,src_aggr_name1:dest_aggr_name1,src_aggr_name2:dest_aggr_name2,…</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_server_hostname</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) The hostname (or IP address) for the storage system or proxy server.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_server_port</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Integer) The TCP port to use for communication with the storage system or proxy server. If not specified, Data ONTAP drivers will use 80 for HTTP and 443 for HTTPS; E-Series will use 8080 for HTTP and 8443 for HTTPS.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_size_multiplier</literal> = <literal>1.2</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Floating point) The quantity to be multiplied by the requested volume size to ensure enough space is available on the virtual storage server (Vserver) to fulfill the volume creation request. Note: this option is deprecated and will be removed in favor of “reserved_percentage” in the Mitaka release.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_snapmirror_quiesce_timeout</literal> = <literal>3600</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Integer) The maximum time in seconds to wait for existing SnapMirror transfers to complete before aborting during a failover.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_storage_family</literal> = <literal>ontap_cluster</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) The storage family type used on the storage system; valid values are ontap_7mode for using Data ONTAP operating in 7-Mode, ontap_cluster for using clustered Data ONTAP, or eseries for using E-Series.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_storage_protocol</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) The storage protocol to be used on the data path with the storage system.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_transport_type</literal> = <literal>http</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) The transport protocol used when communicating with the storage system or proxy server.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_vfiler</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) The vFiler unit on which provisioning of block storage volumes will be done. This option is only used by the driver when connecting to an instance with a storage family of Data ONTAP operating in 7-Mode. Only use this option when utilizing the MultiStore feature on the NetApp storage system.</paragraph>
                                </entry>
                            </row>
                        </tbody>
                    </tgroup>
                </table>
                <note>
                    <paragraph>The driver supports iSCSI CHAP uni-directional authentication.
                        To enable it, set the <literal>use_chap_auth</literal> option to <literal>True</literal>.</paragraph>
                </note>
                <tip>
                    <paragraph>For more information on these options and other deployment and
                        operational scenarios, visit the <reference name="NetApp OpenStack Deployment and Operations Guide" refuri="http://netapp.github.io/openstack-deploy-ops-guide/">NetApp OpenStack Deployment and
                            Operations
                            Guide</reference>.</paragraph>
                </tip>
            </section>
            <section ids="netapp-nfs-configuration-for-data-ontap-operating-in-7-mode" names="netapp\ nfs\ configuration\ for\ data\ ontap\ operating\ in\ 7-mode">
                <title>NetApp NFS configuration for Data ONTAP operating in 7-Mode</title>
                <paragraph>The NetApp NFS configuration for Data ONTAP operating in 7-Mode is an interface
                    from OpenStack to Data ONTAP operating in 7-Mode storage system for
                    provisioning and managing OpenStack volumes on NFS exports provided by the Data
                    ONTAP operating in 7-Mode storage system which can then be accessed using NFS
                    protocol.</paragraph>
                <paragraph>The NFS configuration for Data ONTAP operating in 7-Mode is a direct interface
                    from Block Storage to the Data ONTAP operating in 7-Mode instance and
                    as such does not require any additional management software to achieve the
                    desired functionality. It uses NetApp ONTAPI to interact with the Data ONTAP
                    operating in 7-Mode storage system.</paragraph>
                <important>
                    <paragraph>Support for 7-mode configuration has been deprecated in the Ocata release
                        and will be removed in the Queens release of OpenStack.</paragraph>
                </important>
                <paragraph><strong>Configuration options</strong></paragraph>
                <paragraph>Configure the volume driver, storage family, and storage protocol to the NetApp
                    unified driver, Data ONTAP operating in 7-Mode, and NFS respectively by setting
                    the <literal>volume_driver</literal>, <literal>netapp_storage_family</literal> and
                    <literal>netapp_storage_protocol</literal> options in the <literal>cinder.conf</literal> file as follows:</paragraph>
                <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">volume_driver = cinder.volume.drivers.netapp.common.NetAppDriver
netapp_storage_family = ontap_7mode
netapp_storage_protocol = nfs
netapp_server_hostname = myhostname
netapp_server_port = 80
netapp_login = username
netapp_password = password
nfs_shares_config = /etc/cinder/nfs_shares</literal_block>
                <comment xml:space="preserve">Warning: Do not edit this file. It is automatically generated from the
software project's code and your changes will be overwritten.

The tool to generate this file lives in openstack-doc-tools repository.

Please make any changes needed in the code, then run the
autogenerate-config-doc tool from the openstack-doc-tools repository, or
ask for help on the documentation mailing list, IRC channel or meeting.</comment>
                <target refid="cinder-netapp-7mode-nfs"></target>
                <table classes="config-ref-table" ids="id9 cinder-netapp-7mode-nfs" names="cinder-netapp_7mode_nfs">
                    <title>Description of NetApp 7-Mode NFS driver configuration options</title>
                    <tgroup cols="2">
                        <colspec colwidth="50"></colspec>
                        <colspec colwidth="50"></colspec>
                        <thead>
                            <row>
                                <entry>
                                    <paragraph>Configuration option = Default value</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Description</paragraph>
                                </entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry>
                                    <paragraph><strong>[DEFAULT]</strong></paragraph>
                                </entry>
                                <entry>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>expiry_thres_minutes</literal> = <literal>720</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Integer) This option specifies the threshold for last access time for images in the NFS image cache. When a cache cleaning cycle begins, images in the cache that have not been accessed in the last M minutes, where M is the value of this parameter, will be deleted from the cache to create free space on the NFS share.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_login</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) Administrative user account name used to access the storage system or proxy server.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_partner_backend_name</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) The name of the config.conf stanza for a Data ONTAP (7-mode) HA partner. This option is only used by the driver when connecting to an instance with a storage family of Data ONTAP operating in 7-Mode, and it is required if the storage protocol selected is FC.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_password</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) Password for the administrative user account specified in the netapp_login option.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_pool_name_search_pattern</literal> = <literal>(.+)</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) This option is used to restrict provisioning to the specified pools. Specify the value of this option to be a regular expression which will be applied to the names of objects from the storage backend which represent pools in Cinder. This option is only utilized when the storage protocol is configured to use iSCSI or FC.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_replication_aggregate_map</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Unknown) Multi opt of dictionaries to represent the aggregate mapping between source and destination back ends when using whole back end replication. For every source aggregate associated with a cinder pool (NetApp FlexVol), you would need to specify the destination aggregate on the replication target device. A replication target device is configured with the configuration option replication_device. Specify this option as many times as you have replication devices. Each entry takes the standard dict config form: netapp_replication_aggregate_map = backend_id:&lt;name_of_replication_device_section&gt;,src_aggr_name1:dest_aggr_name1,src_aggr_name2:dest_aggr_name2,…</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_server_hostname</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) The hostname (or IP address) for the storage system or proxy server.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_server_port</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Integer) The TCP port to use for communication with the storage system or proxy server. If not specified, Data ONTAP drivers will use 80 for HTTP and 443 for HTTPS; E-Series will use 8080 for HTTP and 8443 for HTTPS.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_snapmirror_quiesce_timeout</literal> = <literal>3600</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Integer) The maximum time in seconds to wait for existing SnapMirror transfers to complete before aborting during a failover.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_storage_family</literal> = <literal>ontap_cluster</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) The storage family type used on the storage system; valid values are ontap_7mode for using Data ONTAP operating in 7-Mode, ontap_cluster for using clustered Data ONTAP, or eseries for using E-Series.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_storage_protocol</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) The storage protocol to be used on the data path with the storage system.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_transport_type</literal> = <literal>http</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) The transport protocol used when communicating with the storage system or proxy server.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_vfiler</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) The vFiler unit on which provisioning of block storage volumes will be done. This option is only used by the driver when connecting to an instance with a storage family of Data ONTAP operating in 7-Mode. Only use this option when utilizing the MultiStore feature on the NetApp storage system.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>thres_avl_size_perc_start</literal> = <literal>20</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Integer) If the percentage of available space for an NFS share has dropped below the value specified by this option, the NFS image cache will be cleaned.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>thres_avl_size_perc_stop</literal> = <literal>60</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Integer) When the percentage of available space on an NFS share has reached the percentage specified by this option, the driver will stop clearing files from the NFS image cache that have not been accessed in the last M minutes, where M is the value of the expiry_thres_minutes configuration option.</paragraph>
                                </entry>
                            </row>
                        </tbody>
                    </tgroup>
                </table>
                <note>
                    <paragraph>Additional NetApp NFS configuration options are shared with the
                        generic NFS driver. For a description of these, see
                        <reference internal="True" refuri="nfs-volume-driver#cinder-storage-nfs"><inline classes="std std-ref">Description of NFS storage configuration options</inline></reference>.</paragraph>
                </note>
                <tip>
                    <paragraph>For more information on these options and other deployment and
                        operational scenarios, visit the <reference name="NetApp OpenStack Deployment and Operations Guide" refuri="http://netapp.github.io/openstack-deploy-ops-guide/">NetApp OpenStack Deployment and
                            Operations
                            Guide</reference>.</paragraph>
                </tip>
            </section>
        </section>
        <section ids="netapp-e-series-storage-family" names="netapp\ e-series\ storage\ family">
            <title>NetApp E-Series storage family</title>
            <paragraph>The NetApp E-Series storage family represents a configuration group which
                provides OpenStack compute instances access to E-Series storage systems. At
                present it can be configured in Block Storage to work with the iSCSI
                storage protocol.</paragraph>
            <section ids="netapp-iscsi-configuration-for-e-series" names="netapp\ iscsi\ configuration\ for\ e-series">
                <title>NetApp iSCSI configuration for E-Series</title>
                <paragraph>The NetApp iSCSI configuration for E-Series is an interface from OpenStack to
                    E-Series storage systems. It provisions and manages the SAN block storage
                    entity, which is a NetApp LUN which can be accessed using the iSCSI protocol.</paragraph>
                <paragraph>The iSCSI configuration for E-Series is an interface from Block
                    Storage to the E-Series proxy instance and as such requires the deployment of
                    the proxy instance in order to achieve the desired functionality. The driver
                    uses REST APIs to interact with the E-Series proxy instance, which in turn
                    interacts directly with the E-Series controllers.</paragraph>
                <paragraph>The use of multipath and DM-MP are required when using the Block
                    Storage driver for E-Series. In order for Block Storage and OpenStack
                    Compute to take advantage of multiple paths, the following configuration
                    options must be correctly configured:</paragraph>
                <bullet_list bullet="-">
                    <list_item>
                        <paragraph>The <literal>use_multipath_for_image_xfer</literal> option should be set to <literal>True</literal> in the
                            <literal>cinder.conf</literal> file within the driver-specific stanza (for example,
                            <literal>[myDriver]</literal>).</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>The <literal>iscsi_use_multipath</literal> option should be set to <literal>True</literal> in the
                            <literal>nova.conf</literal> file within the <literal>[libvirt]</literal> stanza.</paragraph>
                    </list_item>
                </bullet_list>
                <paragraph><strong>Configuration options</strong></paragraph>
                <paragraph>Configure the volume driver, storage family, and storage protocol to the
                    NetApp unified driver, E-Series, and iSCSI respectively by setting the
                    <literal>volume_driver</literal>, <literal>netapp_storage_family</literal> and
                    <literal>netapp_storage_protocol</literal> options in the <literal>cinder.conf</literal> file as follows:</paragraph>
                <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">volume_driver = cinder.volume.drivers.netapp.common.NetAppDriver
netapp_storage_family = eseries
netapp_storage_protocol = iscsi
netapp_server_hostname = myhostname
netapp_server_port = 80
netapp_login = username
netapp_password = password
netapp_controller_ips = 1.2.3.4,5.6.7.8
netapp_sa_password = arrayPassword
netapp_storage_pools = pool1,pool2
use_multipath_for_image_xfer = True</literal_block>
                <note>
                    <paragraph>To use the E-Series driver, you must override the default value of
                        <literal>netapp_storage_family</literal> with <literal>eseries</literal>.</paragraph>
                    <paragraph>To use the iSCSI protocol, you must override the default value of
                        <literal>netapp_storage_protocol</literal> with <literal>iscsi</literal>.</paragraph>
                </note>
                <comment xml:space="preserve">Warning: Do not edit this file. It is automatically generated from the
software project's code and your changes will be overwritten.

The tool to generate this file lives in openstack-doc-tools repository.

Please make any changes needed in the code, then run the
autogenerate-config-doc tool from the openstack-doc-tools repository, or
ask for help on the documentation mailing list, IRC channel or meeting.</comment>
                <target refid="cinder-netapp-eseries-iscsi"></target>
                <table classes="config-ref-table" ids="id10 cinder-netapp-eseries-iscsi" names="cinder-netapp_eseries_iscsi">
                    <title>Description of NetApp E-Series driver configuration options</title>
                    <tgroup cols="2">
                        <colspec colwidth="50"></colspec>
                        <colspec colwidth="50"></colspec>
                        <thead>
                            <row>
                                <entry>
                                    <paragraph>Configuration option = Default value</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Description</paragraph>
                                </entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry>
                                    <paragraph><strong>[DEFAULT]</strong></paragraph>
                                </entry>
                                <entry>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_controller_ips</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) This option is only utilized when the storage family is configured to eseries. This option is used to restrict provisioning to the specified controllers. Specify the value of this option to be a comma separated list of controller hostnames or IP addresses to be used for provisioning.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_enable_multiattach</literal> = <literal>False</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Boolean) This option specifies whether the driver should allow operations that require multiple attachments to a volume. An example would be live migration of servers that have volumes attached. When enabled, this backend is limited to 256 total volumes in order to guarantee volumes can be accessed by more than one host.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_host_type</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) This option defines the type of operating system for all initiators that can access a LUN. This information is used when mapping LUNs to individual hosts or groups of hosts.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_login</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) Administrative user account name used to access the storage system or proxy server.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_partner_backend_name</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) The name of the config.conf stanza for a Data ONTAP (7-mode) HA partner. This option is only used by the driver when connecting to an instance with a storage family of Data ONTAP operating in 7-Mode, and it is required if the storage protocol selected is FC.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_password</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) Password for the administrative user account specified in the netapp_login option.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_pool_name_search_pattern</literal> = <literal>(.+)</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) This option is used to restrict provisioning to the specified pools. Specify the value of this option to be a regular expression which will be applied to the names of objects from the storage backend which represent pools in Cinder. This option is only utilized when the storage protocol is configured to use iSCSI or FC.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_replication_aggregate_map</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Unknown) Multi opt of dictionaries to represent the aggregate mapping between source and destination back ends when using whole back end replication. For every source aggregate associated with a cinder pool (NetApp FlexVol), you would need to specify the destination aggregate on the replication target device. A replication target device is configured with the configuration option replication_device. Specify this option as many times as you have replication devices. Each entry takes the standard dict config form: netapp_replication_aggregate_map = backend_id:&lt;name_of_replication_device_section&gt;,src_aggr_name1:dest_aggr_name1,src_aggr_name2:dest_aggr_name2,…</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_sa_password</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) Password for the NetApp E-Series storage array.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_server_hostname</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) The hostname (or IP address) for the storage system or proxy server.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_server_port</literal> = <literal>None</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Integer) The TCP port to use for communication with the storage system or proxy server. If not specified, Data ONTAP drivers will use 80 for HTTP and 443 for HTTPS; E-Series will use 8080 for HTTP and 8443 for HTTPS.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_snapmirror_quiesce_timeout</literal> = <literal>3600</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(Integer) The maximum time in seconds to wait for existing SnapMirror transfers to complete before aborting during a failover.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_storage_family</literal> = <literal>ontap_cluster</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) The storage family type used on the storage system; valid values are ontap_7mode for using Data ONTAP operating in 7-Mode, ontap_cluster for using clustered Data ONTAP, or eseries for using E-Series.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_transport_type</literal> = <literal>http</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) The transport protocol used when communicating with the storage system or proxy server.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_webservice_path</literal> = <literal>/devmgr/v2</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>(String) This option is used to specify the path to the E-Series proxy application on a proxy server. The value is combined with the value of the netapp_transport_type, netapp_server_hostname, and netapp_server_port options to create the URL used by the driver to connect to the proxy application.</paragraph>
                                </entry>
                            </row>
                        </tbody>
                    </tgroup>
                </table>
                <tip>
                    <paragraph>For more information on these options and other deployment and
                        operational scenarios, visit the <reference name="NetApp OpenStack Deployment and Operations Guide" refuri="http://netapp.github.io/openstack-deploy-ops-guide/">NetApp OpenStack Deployment and
                            Operations
                            Guide</reference>.</paragraph>
                </tip>
            </section>
            <section ids="netapp-supported-extra-specs-for-e-series" names="netapp-supported\ extra\ specs\ for\ e-series">
                <title>NetApp-supported extra specs for E-Series</title>
                <paragraph>Extra specs enable vendors to specify extra filter criteria.
                    The Block Storage scheduler uses the specs when the scheduler determines
                    which volume node should fulfill a volume provisioning request.
                    When you use the NetApp unified driver with an E-Series storage system,
                    you can leverage extra specs with Block Storage volume types to ensure
                    that Block Storage volumes are created on storage back ends that have
                    certain properties. An example of this is when you configure thin
                    provisioning for a storage back end.</paragraph>
                <paragraph>Extra specs are associated with Block Storage volume types.
                    When users request volumes of a particular volume type, the volumes are
                    created on storage back ends that meet the list of requirements.
                    An example of this is the back ends that have the available space or
                    extra specs. Use the specs in the following table to configure volumes.
                    Define Block Storage volume types by using the <literal_strong classes="command">openstack volume
                        type set</literal_strong> command.</paragraph>
                <table ids="id11">
                    <title>Description of extra specs options for NetApp Unified Driver with E-Series</title>
                    <tgroup cols="3">
                        <colspec colwidth="33"></colspec>
                        <colspec colwidth="33"></colspec>
                        <colspec colwidth="33"></colspec>
                        <thead>
                            <row>
                                <entry>
                                    <paragraph>Extra spec</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Type</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Description</paragraph>
                                </entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry>
                                    <paragraph><literal>netapp_thin_provisioned</literal></paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Boolean</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Limit the candidate volume list to only the ones that support thin
                                        provisioning on the storage controller.</paragraph>
                                </entry>
                            </row>
                        </tbody>
                    </tgroup>
                </table>
            </section>
        </section>
        <section ids="upgrading-prior-netapp-drivers-to-the-netapp-unified-driver" names="upgrading\ prior\ netapp\ drivers\ to\ the\ netapp\ unified\ driver">
            <title>Upgrading prior NetApp drivers to the NetApp unified driver</title>
            <paragraph>NetApp introduced a new unified block storage driver in Havana for configuring
                different storage families and storage protocols. This requires defining an
                upgrade path for NetApp drivers which existed in releases prior to Havana. This
                section covers the upgrade configuration for NetApp drivers to the new unified
                configuration and a list of deprecated NetApp drivers.</paragraph>
            <section ids="upgraded-netapp-drivers" names="upgraded\ netapp\ drivers">
                <title>Upgraded NetApp drivers</title>
                <paragraph>This section describes how to update Block Storage configuration from
                    a pre-Havana release to the unified driver format.</paragraph>
                <bullet_list bullet="-">
                    <list_item>
                        <paragraph>NetApp iSCSI direct driver for Clustered Data ONTAP in Grizzly (or earlier):</paragraph>
                        <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">volume_driver = cinder.volume.drivers.netapp.iscsi.NetAppDirectCmodeISCSIDriver</literal_block>
                        <paragraph>NetApp unified driver configuration:</paragraph>
                        <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">volume_driver = cinder.volume.drivers.netapp.common.NetAppDriver
netapp_storage_family = ontap_cluster
netapp_storage_protocol = iscsi</literal_block>
                    </list_item>
                    <list_item>
                        <paragraph>NetApp NFS direct driver for Clustered Data ONTAP in Grizzly (or
                            earlier):</paragraph>
                        <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">volume_driver = cinder.volume.drivers.netapp.nfs.NetAppDirectCmodeNfsDriver</literal_block>
                        <paragraph>NetApp unified driver configuration:</paragraph>
                        <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">volume_driver = cinder.volume.drivers.netapp.common.NetAppDriver
netapp_storage_family = ontap_cluster
netapp_storage_protocol = nfs</literal_block>
                    </list_item>
                    <list_item>
                        <paragraph>NetApp iSCSI direct driver for Data ONTAP operating in 7-Mode storage
                            controller in Grizzly (or earlier):</paragraph>
                        <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">volume_driver = cinder.volume.drivers.netapp.iscsi.NetAppDirect7modeISCSIDriver</literal_block>
                        <paragraph>NetApp unified driver configuration:</paragraph>
                        <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">volume_driver = cinder.volume.drivers.netapp.common.NetAppDriver
netapp_storage_family = ontap_7mode
netapp_storage_protocol = iscsi</literal_block>
                    </list_item>
                    <list_item>
                        <paragraph>NetApp NFS direct driver for Data ONTAP operating in 7-Mode storage
                            controller in Grizzly (or earlier):</paragraph>
                        <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">volume_driver = cinder.volume.drivers.netapp.nfs.NetAppDirect7modeNfsDriver</literal_block>
                        <paragraph>NetApp unified driver configuration:</paragraph>
                        <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">volume_driver = cinder.volume.drivers.netapp.common.NetAppDriver
netapp_storage_family = ontap_7mode
netapp_storage_protocol = nfs</literal_block>
                    </list_item>
                </bullet_list>
            </section>
            <section ids="deprecated-netapp-drivers" names="deprecated\ netapp\ drivers">
                <title>Deprecated NetApp drivers</title>
                <paragraph>This section lists the NetApp drivers in earlier releases that are
                    deprecated in Havana.</paragraph>
                <bullet_list bullet="-">
                    <list_item>
                        <paragraph>NetApp iSCSI driver for clustered Data ONTAP:</paragraph>
                        <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">volume_driver = cinder.volume.drivers.netapp.iscsi.NetAppCmodeISCSIDriver</literal_block>
                    </list_item>
                    <list_item>
                        <paragraph>NetApp NFS driver for clustered Data ONTAP:</paragraph>
                        <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">volume_driver = cinder.volume.drivers.netapp.nfs.NetAppCmodeNfsDriver</literal_block>
                    </list_item>
                    <list_item>
                        <paragraph>NetApp iSCSI driver for Data ONTAP operating in 7-Mode storage
                            controller:</paragraph>
                        <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">volume_driver = cinder.volume.drivers.netapp.iscsi.NetAppISCSIDriver</literal_block>
                    </list_item>
                    <list_item>
                        <paragraph>NetApp NFS driver for Data ONTAP operating in 7-Mode storage
                            controller:</paragraph>
                        <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">volume_driver = cinder.volume.drivers.netapp.nfs.NetAppNFSDriver</literal_block>
                    </list_item>
                </bullet_list>
                <note>
                    <paragraph>For support information on deprecated NetApp drivers in the Havana
                        release, visit the <reference name="NetApp OpenStack Deployment and Operations Guide" refuri="http://netapp.github.io/openstack-deploy-ops-guide/">NetApp OpenStack Deployment and Operations
                            Guide</reference>.</paragraph>
                </note>
            </section>
        </section>
    </section>
</document>

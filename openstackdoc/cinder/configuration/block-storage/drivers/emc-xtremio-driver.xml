<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/cinder/doc/source/configuration/block-storage/drivers/emc-xtremio-driver.rst">
    <section ids="emc-xtremio-block-storage-driver-configuration" names="emc\ xtremio\ block\ storage\ driver\ configuration">
        <title>EMC XtremIO Block Storage driver configuration</title>
        <paragraph>The high performance XtremIO All Flash Array (AFA) offers Block Storage
            services to OpenStack. Using the driver, OpenStack Block Storage hosts
            can connect to an XtremIO Storage cluster.</paragraph>
        <paragraph>This section explains how to configure and connect the block
            storage nodes to an XtremIO storage cluster.</paragraph>
        <section ids="support-matrix" names="support\ matrix">
            <title>Support matrix</title>
            <paragraph>XtremIO version 4.x is supported.</paragraph>
        </section>
        <section ids="supported-operations" names="supported\ operations">
            <title>Supported operations</title>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>Create, delete, clone, attach, and detach volumes.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Create and delete volume snapshots.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Create a volume from a snapshot.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Copy an image to a volume.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Copy a volume to an image.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Extend a volume.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Manage and unmanage a volume.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Manage and unmanage a snapshot.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Get volume statistics.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Create, modify, delete, and list consistency groups.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Create, modify, delete, and list snapshots of consistency groups.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Create consistency group from consistency group or consistency group
                        snapshot.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Volume Migration (host assisted)</paragraph>
                </list_item>
            </bullet_list>
        </section>
        <section ids="xtremio-block-storage-driver-configuration" names="xtremio\ block\ storage\ driver\ configuration">
            <title>XtremIO Block Storage driver configuration</title>
            <paragraph>Edit the <literal>cinder.conf</literal> file by adding the configuration below under
                the [DEFAULT] section of the file in case of a single back end or
                under a separate section in case of multiple back ends (for example
                [XTREMIO]). The configuration file is usually located under the
                following path <literal>/etc/cinder/cinder.conf</literal>.</paragraph>
            <comment xml:space="preserve">Warning: Do not edit this file. It is automatically generated from the
software project's code and your changes will be overwritten.

The tool to generate this file lives in openstack-doc-tools repository.

Please make any changes needed in the code, then run the
autogenerate-config-doc tool from the openstack-doc-tools repository, or
ask for help on the documentation mailing list, IRC channel or meeting.</comment>
            <target refid="cinder-emc-xtremio"></target>
            <table classes="config-ref-table" ids="id1 cinder-emc-xtremio" names="cinder-emc_xtremio">
                <title>Description of EMC XtremIO volume driver configuration options</title>
                <tgroup cols="2">
                    <colspec colwidth="50"></colspec>
                    <colspec colwidth="50"></colspec>
                    <thead>
                        <row>
                            <entry>
                                <paragraph>Configuration option = Default value</paragraph>
                            </entry>
                            <entry>
                                <paragraph>Description</paragraph>
                            </entry>
                        </row>
                    </thead>
                    <tbody>
                        <row>
                            <entry>
                                <paragraph><strong>[DEFAULT]</strong></paragraph>
                            </entry>
                            <entry>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>xtremio_array_busy_retry_count</literal> = <literal>5</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(Integer) Number of retries in case array is busy</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>xtremio_array_busy_retry_interval</literal> = <literal>5</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(Integer) Interval between retries in case array is busy</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>xtremio_cluster_name</literal> =</paragraph>
                            </entry>
                            <entry>
                                <paragraph>(String) XMS cluster id in multi-cluster environment</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><literal>xtremio_volumes_per_glance_cache</literal> = <literal>100</literal></paragraph>
                            </entry>
                            <entry>
                                <paragraph>(Integer) Number of volumes created from each cached glance image</paragraph>
                            </entry>
                        </row>
                    </tbody>
                </tgroup>
            </table>
            <paragraph>For a configuration example, refer to the configuration
                <reference internal="True" refid="emc-extremio-configuration-example"><inline classes="std std-ref">Configuration example</inline></reference>.</paragraph>
            <section ids="xtremio-driver-name" names="xtremio\ driver\ name">
                <title>XtremIO driver name</title>
                <paragraph>Configure the driver name by setting the following parameter in the
                    <literal>cinder.conf</literal> file:</paragraph>
                <bullet_list bullet="-">
                    <list_item>
                        <paragraph>For iSCSI:</paragraph>
                        <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">volume_driver = cinder.volume.drivers.emc.xtremio.XtremIOISCSIDriver</literal_block>
                    </list_item>
                    <list_item>
                        <paragraph>For Fibre Channel:</paragraph>
                        <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">volume_driver = cinder.volume.drivers.emc.xtremio.XtremIOFibreChannelDriver</literal_block>
                    </list_item>
                </bullet_list>
            </section>
            <section ids="xtremio-management-server-xms-ip" names="xtremio\ management\ server\ (xms)\ ip">
                <title>XtremIO management server (XMS) IP</title>
                <paragraph>To retrieve the management IP, use the <literal_strong classes="command">show-xms</literal_strong> CLI command.</paragraph>
                <paragraph>Configure the management IP by adding the following parameter:</paragraph>
                <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">san_ip = XMS Management IP</literal_block>
            </section>
            <section ids="xtremio-cluster-name" names="xtremio\ cluster\ name">
                <title>XtremIO cluster name</title>
                <paragraph>In XtremIO version 4.0, a single XMS can manage multiple cluster back ends. In
                    such setups, the administrator is required to specify the cluster name (in
                    addition to the XMS IP). Each cluster must be defined as a separate back end.</paragraph>
                <paragraph>To retrieve the cluster name, run the <literal_strong classes="command">show-clusters</literal_strong> CLI command.</paragraph>
                <paragraph>Configure the cluster name by adding the following parameter:</paragraph>
                <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">xtremio_cluster_name = Cluster-Name</literal_block>
                <note>
                    <paragraph>When a single cluster is managed in XtremIO version 4.0, the cluster name is
                        not required.</paragraph>
                </note>
            </section>
            <section ids="xtremio-user-credentials" names="xtremio\ user\ credentials">
                <title>XtremIO user credentials</title>
                <paragraph>OpenStack Block Storage requires an XtremIO XMS user with administrative
                    privileges. XtremIO recommends creating a dedicated OpenStack user account that
                    holds an administrative user role.</paragraph>
                <paragraph>Refer to the XtremIO User Guide for details on user account management.</paragraph>
                <paragraph>Create an XMS account using either the XMS GUI or the
                    <literal_strong classes="command">add-user-account</literal_strong> CLI command.</paragraph>
                <paragraph>Configure the user credentials by adding the following parameters:</paragraph>
                <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">san_login = XMS username
san_password = XMS username password</literal_block>
            </section>
        </section>
        <section ids="multiple-back-ends" names="multiple\ back\ ends">
            <title>Multiple back ends</title>
            <paragraph>Configuring multiple storage back ends enables you to create several back-end
                storage solutions that serve the same OpenStack Compute resources.</paragraph>
            <paragraph>When a volume is created, the scheduler selects the appropriate back end to
                handle the request, according to the specified volume type.</paragraph>
        </section>
        <section ids="setting-thin-provisioning-and-multipathing-parameters" names="setting\ thin\ provisioning\ and\ multipathing\ parameters">
            <title>Setting thin provisioning and multipathing parameters</title>
            <paragraph>To support thin provisioning and multipathing in the XtremIO Array, the
                following parameters from the Nova and Cinder configuration files should be
                modified as follows:</paragraph>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>Thin Provisioning</paragraph>
                    <paragraph>All XtremIO volumes are thin provisioned. The default value of 20 should be
                        maintained for the <literal>max_over_subscription_ratio</literal> parameter.</paragraph>
                    <paragraph>The <literal>use_cow_images</literal> parameter in the <literal>nova.conf</literal> file should be set to
                        <literal>False</literal> as follows:</paragraph>
                    <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">use_cow_images = False</literal_block>
                </list_item>
                <list_item>
                    <paragraph>Multipathing</paragraph>
                    <paragraph>The <literal>use_multipath_for_image_xfer</literal> parameter in the <literal>cinder.conf</literal> file
                        should be set to <literal>True</literal> as follows:</paragraph>
                    <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">use_multipath_for_image_xfer = True</literal_block>
                </list_item>
            </bullet_list>
        </section>
        <section ids="image-service-optimization" names="image\ service\ optimization">
            <title>Image service optimization</title>
            <paragraph>Limit the number of copies (XtremIO snapshots) taken from each image cache.</paragraph>
            <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">xtremio_volumes_per_glance_cache = 100</literal_block>
            <paragraph>The default value is <literal>100</literal>. A value of <literal>0</literal> ignores the limit and defers to
                the array maximum as the effective limit.</paragraph>
        </section>
        <section ids="ssl-certification" names="ssl\ certification">
            <title>SSL certification</title>
            <paragraph>To enable SSL certificate validation, modify the following option in the
                <literal>cinder.conf</literal> file:</paragraph>
            <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">driver_ssl_cert_verify = true</literal_block>
            <paragraph>By default, SSL certificate validation is disabled.</paragraph>
            <paragraph>To specify a non-default path to <literal>CA_Bundle</literal> file or directory with
                certificates of trusted CAs:</paragraph>
            <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">driver_ssl_cert_path = Certificate path</literal_block>
        </section>
        <section ids="configuring-chap" names="configuring\ chap">
            <title>Configuring CHAP</title>
            <paragraph>The XtremIO Block Storage driver supports CHAP initiator authentication and
                discovery.</paragraph>
            <paragraph>If CHAP initiator authentication is required, set the CHAP
                Authentication mode to initiator.</paragraph>
            <paragraph>To set the CHAP initiator mode using CLI, run the following XMCLI command:</paragraph>
            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ modify-chap chap-authentication-mode=initiator</literal_block>
            <paragraph>If CHAP initiator discovery is required, set the CHAP discovery mode to
                initiator.</paragraph>
            <paragraph>To set the CHAP initiator discovery mode using CLI, run the following XMCLI
                command:</paragraph>
            <literal_block highlight_args="{}" language="console" linenos="False" xml:space="preserve">$ modify-chap chap-discovery-mode=initiator</literal_block>
            <paragraph>The CHAP initiator modes can also be set via the XMS GUI.</paragraph>
            <paragraph>Refer to XtremIO User Guide for details on CHAP configuration via GUI and CLI.</paragraph>
            <paragraph>The CHAP initiator authentication and discovery credentials (username and
                password) are generated automatically by the Block Storage driver. Therefore,
                there is no need to configure the initial CHAP credentials manually in XMS.</paragraph>
            <target refid="emc-extremio-configuration-example"></target>
        </section>
        <section ids="configuration-example emc-extremio-configuration-example" names="configuration\ example emc_extremio_configuration_example">
            <title>Configuration example</title>
            <paragraph>You can update the <literal>cinder.conf</literal> file by editing the necessary parameters as
                follows:</paragraph>
            <literal_block highlight_args="{}" language="ini" linenos="False" xml:space="preserve">[Default]
enabled_backends = XtremIO

[XtremIO]
volume_driver = cinder.volume.drivers.emc.xtremio.XtremIOFibreChannelDriver
san_ip = XMS_IP
xtremio_cluster_name = Cluster01
san_login = XMS_USER
san_password = XMS_PASSWD
volume_backend_name = XtremIOAFA</literal_block>
        </section>
    </section>
</document>

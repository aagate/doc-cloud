<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/cinder/doc/source/contributor/api_microversion_history.rst">
    <section ids="rest-api-version-history" names="rest\ api\ version\ history">
        <title>REST API Version History</title>
        <paragraph>This documents the changes made to the REST API with every
            microversion change. The description for each version should be a
            verbose one which has enough information to be suitable for use in
            user documentation.</paragraph>
        <section ids="id1" names="3.0">
            <title>3.0</title>
            <block_quote>
                <paragraph>The 3.0 Cinder API includes all v2 core APIs existing prior to
                    the introduction of microversions.  The /v3 URL is used to call
                    3.0 APIs.
                    This is the initial version of the Cinder API which supports
                    microversions.</paragraph>
                <paragraph>A user can specify a header in the API request:</paragraph>
                <literal_block xml:space="preserve">OpenStack-API-Version: volume &lt;version&gt;</literal_block>
                <paragraph>where <literal>&lt;version&gt;</literal> is any valid api version for this API.</paragraph>
                <paragraph>If no version is specified then the API will behave as if version 3.0
                    was requested.</paragraph>
                <paragraph>The only API change in version 3.0 is versions, i.e.
                    GET <reference refuri="http://localhost:8786/">http://localhost:8786/</reference>, which now returns information about
                    3.0 and later versions and their respective /v3 endpoints.</paragraph>
                <paragraph>All other 3.0 APIs are functionally identical to version 2.0.</paragraph>
            </block_quote>
        </section>
        <section ids="id2" names="3.1">
            <title>3.1</title>
            <block_quote>
                <paragraph>Added the parameters <literal>protected</literal> and <literal>visibility</literal> to
                    _volume_upload_image requests.</paragraph>
            </block_quote>
        </section>
        <section ids="id3" names="3.2">
            <title>3.2</title>
            <block_quote>
                <paragraph>Change in return value of ‘GET API request’ for fetching cinder volume
                    list on the basis of ‘bootable’ status of volume as filter.</paragraph>
                <paragraph>Before V3.2, ‘GET API request’ to fetch volume list returns non-bootable
                    volumes if bootable filter value is any of the false or False.
                    For any other value provided to this filter, it always returns
                    bootable volume list.</paragraph>
                <paragraph>But in V3.2, this behavior is updated.
                    In V3.2, bootable volume list will be returned for any of the
                    ‘T/True/1/true’ bootable filter values only.
                    Non-bootable volume list will be returned for any of ‘F/False/0/false’
                    bootable filter values.
                    But for any other values passed for bootable filter, it will return
                    “Invalid input received: bootable={filter value}’ error.</paragraph>
            </block_quote>
        </section>
        <section ids="id4" names="3.3">
            <title>3.3</title>
            <block_quote>
                <paragraph>Added /messages API.</paragraph>
            </block_quote>
        </section>
        <section ids="id5" names="3.4">
            <title>3.4</title>
            <block_quote>
                <paragraph>Added the filter parameters <literal>glance_metadata</literal> to
                    list/detail volumes requests.</paragraph>
            </block_quote>
        </section>
        <section ids="id6" names="3.5">
            <title>3.5</title>
            <block_quote>
                <paragraph>Added pagination support to /messages API</paragraph>
            </block_quote>
        </section>
        <section ids="id7" names="3.6">
            <title>3.6</title>
            <block_quote>
                <paragraph>Allowed to set empty description and empty name for consistency
                    group in consisgroup-update operation.</paragraph>
            </block_quote>
        </section>
        <section ids="id8" names="3.7">
            <title>3.7</title>
            <block_quote>
                <paragraph>Added <literal>cluster_name</literal> field to service list/detail.</paragraph>
                <paragraph>Added /clusters endpoint to list/show/update clusters.</paragraph>
                <paragraph>Show endpoint requires the cluster name and optionally the binary as a URL
                    parameter (default is “cinder-volume”).  Returns:</paragraph>
                <literal_block highlight_args="{}" language="json" linenos="False" xml:space="preserve">{
    "cluster": {
        "created_at": "",
        "disabled_reason": null,
        "last_heartbeat": "",
        "name": "cluster_name",
        "num_down_hosts": 4,
        "num_hosts": 2,
        "state": "up",
        "status": "enabled",
        "updated_at": ""
    }
}</literal_block>
                <paragraph>Update endpoint allows enabling and disabling a cluster in a similar way to
                    service’s update endpoint, but in the body we must specify the name and
                    optionally the binary (“cinder-volume” is the default) and the disabled
                    reason. Returns:</paragraph>
                <literal_block highlight_args="{}" language="json" linenos="False" xml:space="preserve">{
    "cluster": {
        "name": "cluster_name",
        "state": "up",
        "status": "enabled",
        "disabled_reason": null
    }
}</literal_block>
                <paragraph>Index and detail accept filtering by <title_reference>name</title_reference>, <title_reference>binary</title_reference>, <title_reference>disabled</title_reference>,
                    <title_reference>num_hosts</title_reference> , <title_reference>num_down_hosts</title_reference>, and up/down status (<title_reference>is_up</title_reference>) as URL
                    parameters.</paragraph>
                <paragraph>Index endpoint returns:</paragraph>
                <literal_block highlight_args="{}" language="json" linenos="False" xml:space="preserve">{
    "clusters": [
        {
            "name": "cluster_name",
            "state": "up",
            "status": "enabled"
        }
    ]
 }</literal_block>
                <paragraph>Detail endpoint returns:</paragraph>
                <literal_block highlight_args="{}" language="json" linenos="False" xml:space="preserve">{
    "clusters": [
        {
            "created_at": "",
            "disabled_reason": null,
            "last_heartbeat": "",
            "name": "cluster_name",
            "num_down_hosts": 4,
            "num_hosts": 2,
            "state": "up",
            "status": "enabled",
            "updated_at": ""
        }
    ]
}</literal_block>
            </block_quote>
        </section>
        <section ids="id9" names="3.8">
            <title>3.8</title>
            <block_quote>
                <paragraph>Adds the following resources that were previously in extensions:
                    - os-volume-manage =&gt; /v3/&lt;project_id&gt;/manageable_volumes
                    - os-snapshot-manage =&gt; /v3/&lt;project_id&gt;/manageable_snapshots</paragraph>
            </block_quote>
        </section>
        <section ids="id10" names="3.9">
            <title>3.9</title>
            <block_quote>
                <paragraph>Added backup update interface to change name and description.
                    Returns:</paragraph>
                <literal_block highlight_args="{}" language="json" linenos="False" xml:space="preserve">{
    "backup": {
        "id": "backup_id",
        "name": "backup_name",
        "links": "backup_link"
    }
}</literal_block>
            </block_quote>
        </section>
        <section ids="id11" names="3.10">
            <title>3.10</title>
            <block_quote>
                <paragraph>Added the filter parameters <literal>group_id</literal> to
                    list/detail volumes requests.</paragraph>
            </block_quote>
        </section>
        <section ids="id12" names="3.11">
            <title>3.11</title>
            <block_quote>
                <paragraph>Added group types and group specs APIs.</paragraph>
            </block_quote>
        </section>
        <section ids="id13" names="3.12">
            <title>3.12</title>
            <block_quote>
                <paragraph>Added volumes/summary API.</paragraph>
            </block_quote>
        </section>
        <section ids="id14" names="3.13">
            <title>3.13</title>
            <block_quote>
                <paragraph>Added create/delete/update/list/show APIs for generic volume groups.</paragraph>
            </block_quote>
        </section>
        <section ids="id15" names="3.14">
            <title>3.14</title>
            <block_quote>
                <paragraph>Added group snapshots and create group from src APIs.</paragraph>
            </block_quote>
        </section>
        <section ids="maximum-in-newton" names="3.15\ (maximum\ in\ newton)">
            <title>3.15 (Maximum in Newton)</title>
            <block_quote>
                <paragraph>Added injecting the response’s <title_reference>Etag</title_reference> header to avoid the lost update
                    problem with volume metadata.</paragraph>
            </block_quote>
        </section>
        <section ids="id16" names="3.16">
            <title>3.16</title>
            <block_quote>
                <paragraph>os-migrate_volume now accepts <literal>cluster</literal> parameter when we want to migrate a
                    volume to a cluster.  If we pass the <literal>host</literal> parameter for a volume that is
                    in a cluster, the request will be sent to the cluster as if we had requested
                    that specific cluster.  Only <literal>host</literal> or <literal>cluster</literal> can be provided.</paragraph>
                <paragraph>Creating a managed volume also supports the cluster parameter.</paragraph>
            </block_quote>
        </section>
        <section ids="id17" names="3.17">
            <title>3.17</title>
            <block_quote>
                <paragraph>os-snapshot-manage and os-volume-manage now support <literal>cluster</literal> parameter on
                    listings (summary and detailed).  Both location parameters, <literal>cluster</literal> and
                    <literal>host</literal> are exclusive and only one should be provided.</paragraph>
            </block_quote>
        </section>
        <section ids="id18" names="3.18">
            <title>3.18</title>
            <block_quote>
                <paragraph>Added backup project attribute.</paragraph>
            </block_quote>
        </section>
        <section ids="id19" names="3.19">
            <title>3.19</title>
            <block_quote>
                <paragraph>Added reset status actions ‘reset_status’ to group snapshot.</paragraph>
            </block_quote>
        </section>
        <section ids="id20" names="3.20">
            <title>3.20</title>
            <block_quote>
                <paragraph>Added reset status actions ‘reset_status’ to generic volume group.</paragraph>
            </block_quote>
        </section>
        <section ids="id21" names="3.21">
            <title>3.21</title>
            <block_quote>
                <paragraph>Show provider_id in detailed view of a volume for admin.</paragraph>
            </block_quote>
        </section>
        <section ids="id22" names="3.22">
            <title>3.22</title>
            <block_quote>
                <paragraph>Added support to filter snapshot list based on metadata of snapshot.</paragraph>
            </block_quote>
        </section>
        <section ids="id23" names="3.23">
            <title>3.23</title>
            <block_quote>
                <paragraph>Allow passing force parameter to volume delete.</paragraph>
            </block_quote>
        </section>
        <section ids="id24" names="3.24">
            <title>3.24</title>
            <block_quote>
                <paragraph>New API endpoint /workers/cleanup allows triggering cleanup for cinder-volume
                    services.  Meant for cleaning ongoing operations from failed nodes.</paragraph>
                <paragraph>The cleanup will be performed by other services belonging to the same
                    cluster, so at least one of them must be up to be able to do the cleanup.</paragraph>
                <paragraph>Cleanup cannot be triggered during a cloud upgrade.</paragraph>
                <paragraph>If no arguments are provided cleanup will try to issue a clean message for
                    all nodes that are down, but we can restrict which nodes we want to be
                    cleaned using parameters <literal>service_id</literal>, <literal>cluster_name</literal>, <literal>host</literal>,
                    <literal>binary</literal>, and <literal>disabled</literal>.</paragraph>
                <paragraph>Cleaning specific resources is also possible using <literal>resource_type</literal> and
                    <literal>resource_id</literal> parameters.</paragraph>
                <paragraph>We can even force cleanup on nodes that are up with <literal>is_up</literal>, but that’s
                    not recommended and should only used if you know what you are doing.  For
                    example if you know a specific cinder-volume is down even though it’s still
                    not being reported as down when listing the services and you know the cluster
                    has at least another service to do the cleanup.</paragraph>
                <paragraph>API will return a dictionary with 2 lists, one with services that have been
                    issued a cleanup request (<literal>cleaning</literal> key) and the other with services
                    that cannot be cleaned right now because there is no alternative service to
                    do the cleanup in that cluster (<literal>unavailable</literal> key).</paragraph>
                <paragraph>Data returned for each service element in these two lists consist of the
                    <literal>id</literal>, <literal>host</literal>, <literal>binary</literal>, and <literal>cluster_name</literal>.  These are not the
                    services that will be performing the cleanup, but the services that will be
                    cleaned up or couldn’t be cleaned up.</paragraph>
            </block_quote>
        </section>
        <section ids="id25" names="3.25">
            <title>3.25</title>
            <block_quote>
                <paragraph>Add <literal>volumes</literal> field to group list/detail and group show.</paragraph>
            </block_quote>
        </section>
        <section ids="id26" names="3.26">
            <title>3.26</title>
            <block_quote>
                <bullet_list bullet="-">
                    <list_item>
                        <paragraph>New <literal>failover</literal> action equivalent to <literal>failover_host</literal>, but accepting
                            <literal>cluster</literal> parameter as well as the <literal>host</literal> cluster that
                            <literal>failover_host</literal> accepts.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph><literal>freeze</literal> and <literal>thaw</literal> actions accept <literal>cluster</literal> parameter.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Cluster listing accepts <literal>replication_status</literal>, <literal>frozen</literal> and
                            <literal>active_backend_id</literal> as filters, and returns additional fields for each
                            cluster: <literal>replication_status</literal>, <literal>frozen</literal>, <literal>active_backend_id</literal>.</paragraph>
                    </list_item>
                </bullet_list>
            </block_quote>
        </section>
        <section ids="maximum-in-ocata" names="3.27\ (maximum\ in\ ocata)">
            <title>3.27 (Maximum in Ocata)</title>
            <block_quote>
                <paragraph>Added new attachment APIs</paragraph>
            </block_quote>
        </section>
        <section ids="id27" names="3.28">
            <title>3.28</title>
            <block_quote>
                <paragraph>Add filters support to get_pools</paragraph>
            </block_quote>
        </section>
        <section ids="id28" names="3.29">
            <title>3.29</title>
            <block_quote>
                <paragraph>Add filter, sorter and pagination support in group snapshot.</paragraph>
            </block_quote>
        </section>
        <section ids="id29" names="3.30">
            <title>3.30</title>
            <block_quote>
                <paragraph>Support sort snapshots with “name”.</paragraph>
            </block_quote>
        </section>
        <section ids="id30" names="3.31">
            <title>3.31</title>
            <block_quote>
                <paragraph>Add support for configure resource query filters.</paragraph>
            </block_quote>
        </section>
        <section ids="id31" names="3.32">
            <title>3.32</title>
            <block_quote>
                <paragraph>Added <literal>set-log</literal> and <literal>get-log</literal> service actions.</paragraph>
            </block_quote>
        </section>
        <section ids="id32" names="3.33">
            <title>3.33</title>
            <block_quote>
                <paragraph>Add <literal>resource_filters</literal> API to retrieve configured resource filters.</paragraph>
            </block_quote>
        </section>
        <section ids="id33" names="3.34">
            <title>3.34</title>
            <block_quote>
                <paragraph>Add like filter support in <literal>volume</literal>, <literal>backup</literal>, <literal>snapshot</literal>, <literal>message</literal>,
                    <literal>attachment</literal>, <literal>group</literal> and <literal>group-snapshot</literal> list APIs.</paragraph>
            </block_quote>
        </section>
        <section ids="id34" names="3.35">
            <title>3.35</title>
            <block_quote>
                <paragraph>Add <literal>volume-type</literal> filter to Get-Pools API.</paragraph>
            </block_quote>
        </section>
        <section ids="id35" names="3.36">
            <title>3.36</title>
            <block_quote>
                <paragraph>Add metadata to volumes/summary response body.</paragraph>
            </block_quote>
        </section>
        <section ids="id36" names="3.37">
            <title>3.37</title>
            <block_quote>
                <paragraph>Support sort backup by “name”.</paragraph>
            </block_quote>
        </section>
        <section ids="id37" names="3.38">
            <title>3.38</title>
            <block_quote>
                <paragraph>Added enable_replication/disable_replication/failover_replication/
                    list_replication_targets for replication groups (Tiramisu).</paragraph>
            </block_quote>
        </section>
        <section ids="id38" names="3.39">
            <title>3.39</title>
            <block_quote>
                <paragraph>Add <literal>project_id</literal> admin filters support to limits.</paragraph>
            </block_quote>
        </section>
        <section ids="id39" names="3.40">
            <title>3.40</title>
            <block_quote>
                <paragraph>Add volume revert to its latest snapshot support.</paragraph>
            </block_quote>
        </section>
        <section ids="id40" names="3.41">
            <title>3.41</title>
            <block_quote>
                <paragraph>Add <literal>user_id</literal> field to snapshot list/detail and snapshot show.</paragraph>
            </block_quote>
        </section>
        <section ids="id41" names="3.42">
            <title>3.42</title>
            <block_quote>
                <paragraph>Add ability to extend ‘in-use’ volume. User should be aware of the
                    whole environment before using this feature because it’s dependent
                    on several external factors below:</paragraph>
                <enumerated_list enumtype="arabic" prefix="" suffix=".">
                    <list_item>
                        <paragraph>nova-compute version - needs to be the latest for Pike.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>only the libvirt compute driver supports this currently.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>only iscsi and fibre channel volume types are supported on the
                            nova side currently.</paragraph>
                    </list_item>
                </enumerated_list>
                <paragraph>Administrator can disable this ability by updating the
                    <literal>volume:extend_attached_volume</literal> policy rule.  Extend of a resered
                    Volume is NOT allowed.</paragraph>
            </block_quote>
        </section>
        <section ids="id42" names="3.43">
            <title>3.43</title>
            <block_quote>
                <paragraph>Support backup CRUD with metadata.</paragraph>
            </block_quote>
        </section>
    </section>
</document>

<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.14 -->
<document source="/home/fbaumanis/openstack/soc8_test/openstack_repo/swift/doc/source/middleware.rst">
    <target refid="common-middleware"></target>
    <section ids="middleware common-middleware" names="middleware common_middleware">
        <title>Middleware</title>
        <section ids="module-swift.common.middleware.account_quotas account-quotas" names="account\ quotas">
            <title>Account Quotas</title>
            <index entries="['single',\ u'swift.common.middleware.account_quotas\ (module)',\ u'module-swift.common.middleware.account_quotas',\ '',\ None]"></index>
            <paragraph><literal>account_quotas</literal> is a middleware which blocks write requests (PUT, POST) if a
                given account quota (in bytes) is exceeded while DELETE requests are still
                allowed.</paragraph>
            <paragraph><literal>account_quotas</literal> uses the <literal>x-account-meta-quota-bytes</literal> metadata entry to
                store the quota. Write requests to this metadata entry are only permitted for
                resellers. There is no quota limit if <literal>x-account-meta-quota-bytes</literal> is not
                set.</paragraph>
            <paragraph>The <literal>account_quotas</literal> middleware should be added to the pipeline in your
                <literal>/etc/swift/proxy-server.conf</literal> file just after any auth middleware.
                For example:</paragraph>
            <literal_block xml:space="preserve">[pipeline:main]
pipeline = catch_errors cache tempauth account_quotas proxy-server

[filter:account_quotas]
use = egg:swift#account_quotas</literal_block>
            <paragraph>To set the quota on an account:</paragraph>
            <literal_block xml:space="preserve">swift -A http://127.0.0.1:8080/auth/v1.0 -U account:reseller -K secret post -m quota-bytes:10000</literal_block>
            <paragraph>Remove the quota:</paragraph>
            <literal_block xml:space="preserve">swift -A http://127.0.0.1:8080/auth/v1.0 -U account:reseller -K secret post -m quota-bytes:</literal_block>
            <paragraph>The same limitations apply for the account quotas as for the container quotas.</paragraph>
            <paragraph>For example, when uploading an object without a content-length header the proxy
                server doesn’t know the final size of the currently uploaded object and the
                upload will be allowed if the current account size is within the quota.
                Due to the eventual consistency further uploads might be possible until the
                account size has been updated.</paragraph>
            <index entries="['single',\ u'AccountQuotaMiddleware\ (class\ in\ swift.common.middleware.account_quotas)',\ u'swift.common.middleware.account_quotas.AccountQuotaMiddleware',\ '',\ None]"></index>
            <desc desctype="class" domain="py" noindex="False" objtype="class">
                <desc_signature class="" first="False" fullname="AccountQuotaMiddleware" ids="swift.common.middleware.account_quotas.AccountQuotaMiddleware" module="swift.common.middleware.account_quotas" names="swift.common.middleware.account_quotas.AccountQuotaMiddleware"><desc_annotation xml:space="preserve">class </desc_annotation><desc_addname xml:space="preserve">swift.common.middleware.account_quotas.</desc_addname><desc_name xml:space="preserve">AccountQuotaMiddleware</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">app</desc_parameter><desc_parameter xml:space="preserve">*args</desc_parameter><desc_parameter xml:space="preserve">**kwargs</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">object</literal></paragraph>
                    <paragraph>Account quota middleware</paragraph>
                    <paragraph>See above for a full description.</paragraph>
                </desc_content>
            </desc>
            <index entries="['single',\ u'filter_factory()\ (in\ module\ swift.common.middleware.account_quotas)',\ u'swift.common.middleware.account_quotas.filter_factory',\ '',\ None]"></index>
            <desc desctype="function" domain="py" noindex="False" objtype="function">
                <desc_signature class="" first="False" fullname="filter_factory" ids="swift.common.middleware.account_quotas.filter_factory" module="swift.common.middleware.account_quotas" names="swift.common.middleware.account_quotas.filter_factory"><desc_addname xml:space="preserve">swift.common.middleware.account_quotas.</desc_addname><desc_name xml:space="preserve">filter_factory</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">global_conf</desc_parameter><desc_parameter xml:space="preserve">**local_conf</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Returns a WSGI filter app for use with paste.deploy.</paragraph>
                </desc_content>
            </desc>
            <target refid="bulk"></target>
        </section>
        <section ids="module-swift.common.middleware.bulk bulk-operations-delete-and-archive-auto-extraction bulk" names="bulk\ operations\ (delete\ and\ archive\ auto\ extraction) bulk">
            <title>Bulk Operations (Delete and Archive Auto Extraction)</title>
            <index entries="['single',\ u'swift.common.middleware.bulk\ (module)',\ u'module-swift.common.middleware.bulk',\ '',\ None]"></index>
            <paragraph>Middleware that will perform many operations on a single request.</paragraph>
            <section ids="extract-archive" names="extract\ archive">
                <title>Extract Archive</title>
                <paragraph>Expand tar files into a Swift account. Request must be a PUT with the
                    query parameter <literal>?extract-archive=format</literal> specifying the format of archive
                    file. Accepted formats are tar, tar.gz, and tar.bz2.</paragraph>
                <paragraph>For a PUT to the following url:</paragraph>
                <literal_block xml:space="preserve">/v1/AUTH_Account/$UPLOAD_PATH?extract-archive=tar.gz</literal_block>
                <paragraph>UPLOAD_PATH is where the files will be expanded to. UPLOAD_PATH can be a
                    container, a pseudo-directory within a container, or an empty string. The
                    destination of a file in the archive will be built as follows:</paragraph>
                <literal_block xml:space="preserve">/v1/AUTH_Account/$UPLOAD_PATH/$FILE_PATH</literal_block>
                <paragraph>Where FILE_PATH is the file name from the listing in the tar file.</paragraph>
                <paragraph>If the UPLOAD_PATH is an empty string, containers will be auto created
                    accordingly and files in the tar that would not map to any container (files
                    in the base directory) will be ignored.</paragraph>
                <paragraph>Only regular files will be uploaded. Empty directories, symlinks, etc will
                    not be uploaded.</paragraph>
            </section>
            <section ids="content-type" names="content\ type">
                <title>Content Type</title>
                <paragraph>If the content-type header is set in the extract-archive call, Swift will
                    assign that content-type to all the underlying files. The bulk middleware
                    will extract the archive file and send the internal files using PUT
                    operations using the same headers from the original request
                    (e.g. auth-tokens, content-Type, etc.). Notice that any middleware call
                    that follows the bulk middleware does not know if this was a bulk request
                    or if these were individual requests sent by the user.</paragraph>
                <paragraph>In order to make Swift detect the content-type for the files based on the
                    file extension, the content-type in the extract-archive call should not be
                    set. Alternatively, it is possible to explicitly tell Swift to detect the
                    content type using this header:</paragraph>
                <literal_block xml:space="preserve">X-Detect-Content-Type: true</literal_block>
                <paragraph>For example:</paragraph>
                <literal_block xml:space="preserve">curl -X PUT http://127.0.0.1/v1/AUTH_acc/cont/$?extract-archive=tar
 -T backup.tar
 -H "Content-Type: application/x-tar"
 -H "X-Auth-Token: xxx"
 -H "X-Detect-Content-Type: true"</literal_block>
            </section>
            <section ids="assigning-metadata" names="assigning\ metadata">
                <title>Assigning Metadata</title>
                <paragraph>The tar file format (1) allows for UTF-8 key/value pairs to be associated
                    with each file in an archive. If a file has extended attributes, then tar
                    will store those as key/value pairs. The bulk middleware can read those
                    extended attributes and convert them to Swift object metadata. Attributes
                    starting with “user.meta” are converted to object metadata, and
                    “user.mime_type” is converted to Content-Type.</paragraph>
                <paragraph>For example:</paragraph>
                <literal_block xml:space="preserve">setfattr -n user.mime_type -v "application/python-setup" setup.py
setfattr -n user.meta.lunch -v "burger and fries" setup.py
setfattr -n user.meta.dinner -v "baked ziti" setup.py
setfattr -n user.stuff -v "whee" setup.py</literal_block>
                <paragraph>Will get translated to headers:</paragraph>
                <literal_block xml:space="preserve">Content-Type: application/python-setup
X-Object-Meta-Lunch: burger and fries
X-Object-Meta-Dinner: baked ziti</literal_block>
                <paragraph>The bulk middleware  will handle xattrs stored by both GNU and BSD tar (2).
                    Only xattrs <literal>user.mime_type</literal> and <literal>user.meta.*</literal> are processed. Other
                    attributes are ignored.</paragraph>
                <paragraph>Notes:</paragraph>
                <paragraph>(1) The POSIX 1003.1-2001 (pax) format. The default format on GNU tar
                    1.27.1 or later.</paragraph>
                <paragraph>(2) Even with pax-format tarballs, different encoders store xattrs slightly
                    differently; for example, GNU tar stores the xattr “user.userattribute” as
                    pax header “SCHILY.xattr.user.userattribute”, while BSD tar (which uses
                    libarchive) stores it as “LIBARCHIVE.xattr.user.userattribute”.</paragraph>
            </section>
            <section ids="response" names="response">
                <title>Response</title>
                <paragraph>The response from bulk operations functions differently from other Swift
                    responses. This is because a short request body sent from the client could
                    result in many operations on the proxy server and precautions need to be
                    made to prevent the request from timing out due to lack of activity. To
                    this end, the client will always receive a 200 OK response, regardless of
                    the actual success of the call.  The body of the response must be parsed to
                    determine the actual success of the operation. In addition to this the
                    client may receive zero or more whitespace characters prepended to the
                    actual response body while the proxy server is completing the request.</paragraph>
                <paragraph>The format of the response body defaults to text/plain but can be either
                    json or xml depending on the <literal>Accept</literal> header. Acceptable formats are
                    <literal>text/plain</literal>, <literal>application/json</literal>, <literal>application/xml</literal>, and <literal>text/xml</literal>.
                    An example body is as follows:</paragraph>
                <literal_block xml:space="preserve">{"Response Status": "201 Created",
 "Response Body": "",
 "Errors": [],
 "Number Files Created": 10}</literal_block>
                <paragraph>If all valid files were uploaded successfully the Response Status will be
                    201 Created.  If any files failed to be created the response code
                    corresponds to the subrequest’s error. Possible codes are 400, 401, 502 (on
                    server errors), etc. In both cases the response body will specify the
                    number of files successfully uploaded and a list of the files that failed.</paragraph>
                <paragraph>There are proxy logs created for each file (which becomes a subrequest) in
                    the tar. The subrequest’s proxy log will have a swift.source set to “EA”
                    the log’s content length will reflect the unzipped size of the file. If
                    double proxy-logging is used the leftmost logger will not have a
                    swift.source set and the content length will reflect the size of the
                    payload sent to the proxy (the unexpanded size of the tar.gz).</paragraph>
            </section>
            <section ids="bulk-delete" names="bulk\ delete">
                <title>Bulk Delete</title>
                <paragraph>Will delete multiple objects or containers from their account with a
                    single request. Responds to POST requests with query parameter
                    <literal>?bulk-delete</literal> set. The request url is your storage url. The Content-Type
                    should be set to <literal>text/plain</literal>. The body of the POST request will be a
                    newline separated list of url encoded objects to delete. You can delete
                    10,000 (configurable) objects per request. The objects specified in the
                    POST request body must be URL encoded and in the form:</paragraph>
                <literal_block xml:space="preserve">/container_name/obj_name</literal_block>
                <paragraph>or for a container (which must be empty at time of delete):</paragraph>
                <literal_block xml:space="preserve">/container_name</literal_block>
                <paragraph>The response is similar to extract archive as in every response will be a
                    200 OK and you must parse the response body for actual results. An example
                    response is:</paragraph>
                <literal_block xml:space="preserve">{"Number Not Found": 0,
 "Response Status": "200 OK",
 "Response Body": "",
 "Errors": [],
 "Number Deleted": 6}</literal_block>
                <paragraph>If all items were successfully deleted (or did not exist), the Response
                    Status will be 200 OK. If any failed to delete, the response code
                    corresponds to the subrequest’s error. Possible codes are 400, 401, 502 (on
                    server errors), etc. In all cases the response body will specify the number
                    of items successfully deleted, not found, and a list of those that failed.
                    The return body will be formatted in the way specified in the request’s
                    <literal>Accept</literal> header. Acceptable formats are <literal>text/plain</literal>, <literal>application/json</literal>,
                    <literal>application/xml</literal>, and <literal>text/xml</literal>.</paragraph>
                <paragraph>There are proxy logs created for each object or container (which becomes a
                    subrequest) that is deleted. The subrequest’s proxy log will have a
                    swift.source set to “BD” the log’s content length of 0. If double
                    proxy-logging is used the leftmost logger will not have a
                    swift.source set and the content length will reflect the size of the
                    payload sent to the proxy (the list of objects/containers to be deleted).</paragraph>
                <index entries="['single',\ u'get_response_body()\ (in\ module\ swift.common.middleware.bulk)',\ u'swift.common.middleware.bulk.get_response_body',\ '',\ None]"></index>
                <desc desctype="function" domain="py" noindex="False" objtype="function">
                    <desc_signature class="" first="False" fullname="get_response_body" ids="swift.common.middleware.bulk.get_response_body" module="swift.common.middleware.bulk" names="swift.common.middleware.bulk.get_response_body"><desc_addname xml:space="preserve">swift.common.middleware.bulk.</desc_addname><desc_name xml:space="preserve">get_response_body</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">data_format</desc_parameter><desc_parameter xml:space="preserve">data_dict</desc_parameter><desc_parameter xml:space="preserve">error_list</desc_parameter></desc_parameterlist></desc_signature>
                    <desc_content>
                        <paragraph>Returns a properly formatted response body according to format. Handles
                            json and xml, otherwise will return text/plain. Note: xml response does not
                            include xml declaration.
                            :params data_format: resulting format
                            :params data_dict: generated data about results.
                            :params error_list: list of quoted filenames that failed</paragraph>
                    </desc_content>
                </desc>
            </section>
            <target refid="catch-errors"></target>
        </section>
        <section ids="module-swift.common.middleware.catch_errors catcherrors catch-errors" names="catcherrors catch_errors">
            <title>CatchErrors</title>
            <index entries="['single',\ u'swift.common.middleware.catch_errors\ (module)',\ u'module-swift.common.middleware.catch_errors',\ '',\ None]"></index>
            <index entries="['single',\ u'CatchErrorMiddleware\ (class\ in\ swift.common.middleware.catch_errors)',\ u'swift.common.middleware.catch_errors.CatchErrorMiddleware',\ '',\ None]"></index>
            <desc desctype="class" domain="py" noindex="False" objtype="class">
                <desc_signature class="" first="False" fullname="CatchErrorMiddleware" ids="swift.common.middleware.catch_errors.CatchErrorMiddleware" module="swift.common.middleware.catch_errors" names="swift.common.middleware.catch_errors.CatchErrorMiddleware"><desc_annotation xml:space="preserve">class </desc_annotation><desc_addname xml:space="preserve">swift.common.middleware.catch_errors.</desc_addname><desc_name xml:space="preserve">CatchErrorMiddleware</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">app</desc_parameter><desc_parameter xml:space="preserve">conf</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">object</literal></paragraph>
                    <paragraph>Middleware that provides high-level error handling and ensures that a
                        transaction id will be set for every request.</paragraph>
                </desc_content>
            </desc>
        </section>
        <section ids="module-swift.common.middleware.cname_lookup cname-lookup" names="cname\ lookup">
            <title>CNAME Lookup</title>
            <index entries="['single',\ u'swift.common.middleware.cname_lookup\ (module)',\ u'module-swift.common.middleware.cname_lookup',\ '',\ None]"></index>
            <paragraph>CNAME Lookup Middleware</paragraph>
            <paragraph>Middleware that translates an unknown domain in the host header to
                something that ends with the configured storage_domain by looking up
                the given domain’s CNAME record in DNS.</paragraph>
            <paragraph>This middleware will continue to follow a CNAME chain in DNS until it finds
                a record ending in the configured storage domain or it reaches the configured
                maximum lookup depth. If a match is found, the environment’s Host header is
                rewritten and the request is passed further down the WSGI chain.</paragraph>
            <index entries="['single',\ u'CNAMELookupMiddleware\ (class\ in\ swift.common.middleware.cname_lookup)',\ u'swift.common.middleware.cname_lookup.CNAMELookupMiddleware',\ '',\ None]"></index>
            <desc desctype="class" domain="py" noindex="False" objtype="class">
                <desc_signature class="" first="False" fullname="CNAMELookupMiddleware" ids="swift.common.middleware.cname_lookup.CNAMELookupMiddleware" module="swift.common.middleware.cname_lookup" names="swift.common.middleware.cname_lookup.CNAMELookupMiddleware"><desc_annotation xml:space="preserve">class </desc_annotation><desc_addname xml:space="preserve">swift.common.middleware.cname_lookup.</desc_addname><desc_name xml:space="preserve">CNAMELookupMiddleware</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">app</desc_parameter><desc_parameter xml:space="preserve">conf</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">object</literal></paragraph>
                    <paragraph>CNAME Lookup Middleware</paragraph>
                    <paragraph>See above for a full description.</paragraph>
                    <field_list>
                        <field>
                            <field_name>Parameters</field_name>
                            <field_body>
                                <bullet_list>
                                    <list_item>
                                        <paragraph><literal_strong refspecific="True">app</literal_strong> – The next WSGI filter or app in the paste.deploy
                                            chain.</paragraph>
                                    </list_item>
                                    <list_item>
                                        <paragraph><literal_strong refspecific="True">conf</literal_strong> – The configuration dict for the middleware.</paragraph>
                                    </list_item>
                                </bullet_list>
                            </field_body>
                        </field>
                    </field_list>
                </desc_content>
            </desc>
            <index entries="['single',\ u'lookup_cname()\ (in\ module\ swift.common.middleware.cname_lookup)',\ u'swift.common.middleware.cname_lookup.lookup_cname',\ '',\ None]"></index>
            <desc desctype="function" domain="py" noindex="False" objtype="function">
                <desc_signature class="" first="False" fullname="lookup_cname" ids="swift.common.middleware.cname_lookup.lookup_cname" module="swift.common.middleware.cname_lookup" names="swift.common.middleware.cname_lookup.lookup_cname"><desc_addname xml:space="preserve">swift.common.middleware.cname_lookup.</desc_addname><desc_name xml:space="preserve">lookup_cname</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">domain</desc_parameter><desc_parameter xml:space="preserve">resolver</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Given a domain, returns its DNS CNAME mapping and DNS ttl.</paragraph>
                    <field_list>
                        <field>
                            <field_name>Parameters</field_name>
                            <field_body>
                                <bullet_list>
                                    <list_item>
                                        <paragraph><literal_strong refspecific="True">domain</literal_strong> – domain to query on</paragraph>
                                    </list_item>
                                    <list_item>
                                        <paragraph><literal_strong refspecific="True">resolver</literal_strong> – dns.resolver.Resolver() instance used for executing DNS
                                            queries</paragraph>
                                    </list_item>
                                </bullet_list>
                            </field_body>
                        </field>
                        <field>
                            <field_name>Returns</field_name>
                            <field_body>
                                <paragraph>(ttl, result)</paragraph>
                            </field_body>
                        </field>
                    </field_list>
                </desc_content>
            </desc>
            <target refid="container-quotas"></target>
        </section>
        <section ids="module-swift.common.middleware.container_quotas id1 container-quotas" names="container\ quotas container-quotas">
            <title>Container Quotas</title>
            <index entries="['single',\ u'swift.common.middleware.container_quotas\ (module)',\ u'module-swift.common.middleware.container_quotas',\ '',\ None]"></index>
            <paragraph>The <literal>container_quotas</literal> middleware implements simple quotas that can be
                imposed on swift containers by a user with the ability to set container
                metadata, most likely the account administrator.  This can be useful for
                limiting the scope of containers that are delegated to non-admin users, exposed
                to <literal>formpost</literal> uploads, or just as a self-imposed sanity check.</paragraph>
            <paragraph>Any object PUT operations that exceed these quotas return a 413 response
                (request entity too large) with a descriptive body.</paragraph>
            <paragraph>Quotas are subject to several limitations: eventual consistency, the timeliness
                of the cached container_info (60 second ttl by default), and it’s unable to
                reject chunked transfer uploads that exceed the quota (though once the quota
                is exceeded, new chunked transfers will be refused).</paragraph>
            <paragraph>Quotas are set by adding meta values to the container, and are validated when
                set:</paragraph>
            <table>
                <tgroup cols="2">
                    <colspec colwidth="45"></colspec>
                    <colspec colwidth="31"></colspec>
                    <thead>
                        <row>
                            <entry>
                                <paragraph>Metadata</paragraph>
                            </entry>
                            <entry>
                                <paragraph>Use</paragraph>
                            </entry>
                        </row>
                    </thead>
                    <tbody>
                        <row>
                            <entry>
                                <paragraph>X-Container-Meta-Quota-Bytes</paragraph>
                            </entry>
                            <entry>
                                <paragraph>Maximum size of the
                                    container, in bytes.</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph>X-Container-Meta-Quota-Count</paragraph>
                            </entry>
                            <entry>
                                <paragraph>Maximum object count of the
                                    container.</paragraph>
                            </entry>
                        </row>
                    </tbody>
                </tgroup>
            </table>
            <paragraph>The <literal>container_quotas</literal> middleware should be added to the pipeline in your
                <literal>/etc/swift/proxy-server.conf</literal> file just after any auth middleware.
                For example:</paragraph>
            <literal_block xml:space="preserve">[pipeline:main]
pipeline = catch_errors cache tempauth container_quotas proxy-server

[filter:container_quotas]
use = egg:swift#container_quotas</literal_block>
            <target refid="container-sync"></target>
        </section>
        <section ids="module-swift.common.middleware.container_sync container-sync-middleware container-sync" names="container\ sync\ middleware container-sync">
            <title>Container Sync Middleware</title>
            <index entries="['single',\ u'swift.common.middleware.container_sync\ (module)',\ u'module-swift.common.middleware.container_sync',\ '',\ None]"></index>
            <index entries="['single',\ u'ContainerSync\ (class\ in\ swift.common.middleware.container_sync)',\ u'swift.common.middleware.container_sync.ContainerSync',\ '',\ None]"></index>
            <desc desctype="class" domain="py" noindex="False" objtype="class">
                <desc_signature class="" first="False" fullname="ContainerSync" ids="swift.common.middleware.container_sync.ContainerSync" module="swift.common.middleware.container_sync" names="swift.common.middleware.container_sync.ContainerSync"><desc_annotation xml:space="preserve">class </desc_annotation><desc_addname xml:space="preserve">swift.common.middleware.container_sync.</desc_addname><desc_name xml:space="preserve">ContainerSync</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">app</desc_parameter><desc_parameter xml:space="preserve">conf</desc_parameter><desc_parameter xml:space="preserve">logger=None</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">object</literal></paragraph>
                    <paragraph>WSGI middleware that validates an incoming container sync request
                        using the container-sync-realms.conf style of container sync.</paragraph>
                </desc_content>
            </desc>
        </section>
        <section ids="module-swift.common.middleware.crossdomain cross-domain-policies" names="cross\ domain\ policies">
            <title>Cross Domain Policies</title>
            <index entries="['single',\ u'swift.common.middleware.crossdomain\ (module)',\ u'module-swift.common.middleware.crossdomain',\ '',\ None]"></index>
            <index entries="['single',\ u'CrossDomainMiddleware\ (class\ in\ swift.common.middleware.crossdomain)',\ u'swift.common.middleware.crossdomain.CrossDomainMiddleware',\ '',\ None]"></index>
            <desc desctype="class" domain="py" noindex="False" objtype="class">
                <desc_signature class="" first="False" fullname="CrossDomainMiddleware" ids="swift.common.middleware.crossdomain.CrossDomainMiddleware" module="swift.common.middleware.crossdomain" names="swift.common.middleware.crossdomain.CrossDomainMiddleware"><desc_annotation xml:space="preserve">class </desc_annotation><desc_addname xml:space="preserve">swift.common.middleware.crossdomain.</desc_addname><desc_name xml:space="preserve">CrossDomainMiddleware</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">app</desc_parameter><desc_parameter xml:space="preserve">conf</desc_parameter><desc_parameter xml:space="preserve">*args</desc_parameter><desc_parameter xml:space="preserve">**kwargs</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">object</literal></paragraph>
                    <paragraph>Cross domain middleware used to respond to requests for cross domain
                        policy information.</paragraph>
                    <paragraph>If the path is /crossdomain.xml it will respond with an xml cross domain
                        policy document. This allows web pages hosted elsewhere to use client
                        side technologies such as Flash, Java and Silverlight to interact
                        with the Swift API.</paragraph>
                    <paragraph>To enable this middleware, add it to the pipeline in your proxy-server.conf
                        file. It should be added before any authentication (e.g., tempauth or
                        keystone) middleware. In this example ellipsis (…) indicate other
                        middleware you may have chosen to use:</paragraph>
                    <literal_block xml:space="preserve">[pipeline:main]
pipeline =  ... crossdomain ... authtoken ... proxy-server</literal_block>
                    <paragraph>And add a filter section, such as:</paragraph>
                    <literal_block xml:space="preserve">[filter:crossdomain]
use = egg:swift#crossdomain
cross_domain_policy = &lt;allow-access-from domain="*.example.com" /&gt;
    &lt;allow-access-from domain="www.example.com" secure="false" /&gt;</literal_block>
                    <paragraph>For continuation lines, put some whitespace before the continuation
                        text. Ensure you put a completely blank line to terminate the
                        cross_domain_policy value.</paragraph>
                    <paragraph>The cross_domain_policy name/value is optional. If omitted, the policy
                        defaults as if you had specified:</paragraph>
                    <literal_block xml:space="preserve">cross_domain_policy = &lt;allow-access-from domain="*" secure="false" /&gt;</literal_block>
                    <index entries="['single',\ u'GET()\ (swift.common.middleware.crossdomain.CrossDomainMiddleware\ method)',\ u'swift.common.middleware.crossdomain.CrossDomainMiddleware.GET',\ '',\ None]"></index>
                    <desc desctype="method" domain="py" noindex="False" objtype="method">
                        <desc_signature class="CrossDomainMiddleware" first="False" fullname="CrossDomainMiddleware.GET" ids="swift.common.middleware.crossdomain.CrossDomainMiddleware.GET" module="swift.common.middleware.crossdomain" names="swift.common.middleware.crossdomain.CrossDomainMiddleware.GET"><desc_name xml:space="preserve">GET</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">req</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Returns a 200 response with cross domain policy information</paragraph>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
            <target refid="discoverability"></target>
        </section>
        <section dupnames="discoverability" ids="discoverability id2" names="discoverability">
            <title>Discoverability</title>
            <paragraph>Swift will by default provide clients with an interface providing details
                about the installation. Unless disabled (i.e <literal>expose_info=false</literal> in
                <reference internal="True" refuri="deployment_guide#proxy-server-config"><inline classes="std std-ref">Proxy Server Configuration</inline></reference>), a GET request to <literal>/info</literal> will return configuration
                data in JSON format.  An example response:</paragraph>
            <literal_block xml:space="preserve">{"swift": {"version": "1.11.0"}, "staticweb": {}, "tempurl": {}}</literal_block>
            <paragraph>This would signify to the client that swift version 1.11.0 is running and that
                staticweb and tempurl are available in this installation.</paragraph>
            <paragraph>There may be administrator-only information available via <literal>/info</literal>. To
                retrieve it, one must use an HMAC-signed request, similar to TempURL.
                The signature may be produced like so:</paragraph>
            <literal_block xml:space="preserve">swift tempurl GET 3600 /info secret 2&gt;/dev/null | sed s/temp_url/swiftinfo/g</literal_block>
        </section>
        <section ids="module-swift.common.middleware.domain_remap domain-remap" names="domain\ remap">
            <title>Domain Remap</title>
            <index entries="['single',\ u'swift.common.middleware.domain_remap\ (module)',\ u'module-swift.common.middleware.domain_remap',\ '',\ None]"></index>
            <paragraph>Domain Remap Middleware</paragraph>
            <paragraph>Middleware that translates container and account parts of a domain to
                path parameters that the proxy server understands.</paragraph>
            <paragraph>container.account.storageurl/object gets translated to
                container.account.storageurl/path_root/account/container/object</paragraph>
            <paragraph>account.storageurl/path_root/container/object gets translated to
                account.storageurl/path_root/account/container/object</paragraph>
            <paragraph>Browsers can convert a host header to lowercase, so check that reseller
                prefix on the account is the correct case. This is done by comparing the
                items in the reseller_prefixes config option to the found prefix. If they
                match except for case, the item from reseller_prefixes will be used
                instead of the found reseller prefix. When none match, the default reseller
                prefix is used. When no default reseller prefix is configured, any request with
                an account prefix not in that list will be ignored by this middleware.
                reseller_prefixes defaults to ‘AUTH’.</paragraph>
            <paragraph>Note that this middleware requires that container names and account names
                (except as described above) must be DNS-compatible. This means that the
                account name created in the system and the containers created by users
                cannot exceed 63 characters or have UTF-8 characters. These are
                restrictions over and above what swift requires and are not explicitly
                checked. Simply put, the this middleware will do a best-effort attempt to
                derive account and container names from elements in the domain name and
                put those derived values into the URL path (leaving the Host header
                unchanged).</paragraph>
            <paragraph>Also note that using container sync with remapped domain names is not
                advised. With container sync, you should use the true storage end points as
                sync destinations.</paragraph>
            <index entries="['single',\ u'DomainRemapMiddleware\ (class\ in\ swift.common.middleware.domain_remap)',\ u'swift.common.middleware.domain_remap.DomainRemapMiddleware',\ '',\ None]"></index>
            <desc desctype="class" domain="py" noindex="False" objtype="class">
                <desc_signature class="" first="False" fullname="DomainRemapMiddleware" ids="swift.common.middleware.domain_remap.DomainRemapMiddleware" module="swift.common.middleware.domain_remap" names="swift.common.middleware.domain_remap.DomainRemapMiddleware"><desc_annotation xml:space="preserve">class </desc_annotation><desc_addname xml:space="preserve">swift.common.middleware.domain_remap.</desc_addname><desc_name xml:space="preserve">DomainRemapMiddleware</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">app</desc_parameter><desc_parameter xml:space="preserve">conf</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">object</literal></paragraph>
                    <paragraph>Domain Remap Middleware</paragraph>
                    <paragraph>See above for a full description.</paragraph>
                    <field_list>
                        <field>
                            <field_name>Parameters</field_name>
                            <field_body>
                                <bullet_list>
                                    <list_item>
                                        <paragraph><literal_strong refspecific="True">app</literal_strong> – The next WSGI filter or app in the paste.deploy
                                            chain.</paragraph>
                                    </list_item>
                                    <list_item>
                                        <paragraph><literal_strong refspecific="True">conf</literal_strong> – The configuration dict for the middleware.</paragraph>
                                    </list_item>
                                </bullet_list>
                            </field_body>
                        </field>
                    </field_list>
                </desc_content>
            </desc>
        </section>
        <section ids="dynamic-large-objects" names="dynamic\ large\ objects">
            <title>Dynamic Large Objects</title>
            <paragraph>DLO support centers around a user specified filter that matches
                segments and concatenates them together in object listing order. Please see
                the DLO docs for <reference internal="True" refuri="overview_large_objects#dlo-doc"><inline classes="std std-ref">Dynamic Large Objects</inline></reference> further details.</paragraph>
            <target refid="encryption"></target>
        </section>
        <section dupnames="encryption" ids="encryption id3" names="encryption">
            <title>Encryption</title>
            <paragraph>Encryption middleware should be deployed in conjunction with the
                <reference internal="True" refid="keymaster"><inline classes="std std-ref">Keymaster</inline></reference> middleware.</paragraph>
            <target ids="module-swift.common.middleware.crypto" ismod="True"></target>
            <index entries="['single',\ u'swift.common.middleware.crypto\ (module)',\ u'module-swift.common.middleware.crypto',\ '',\ None]"></index>
            <paragraph>Implements middleware for object encryption which comprises an instance of a
                <reference internal="True" refid="swift.common.middleware.crypto.decrypter.Decrypter" reftitle="swift.common.middleware.crypto.decrypter.Decrypter"><literal classes="xref py py-class">Decrypter</literal></reference> combined with an
                instance of an <reference internal="True" refid="swift.common.middleware.crypto.encrypter.Encrypter" reftitle="swift.common.middleware.crypto.encrypter.Encrypter"><literal classes="xref py py-class">Encrypter</literal></reference>.</paragraph>
            <index entries="['single',\ u'filter_factory()\ (in\ module\ swift.common.middleware.crypto)',\ u'swift.common.middleware.crypto.filter_factory',\ '',\ None]"></index>
            <desc desctype="function" domain="py" noindex="False" objtype="function">
                <desc_signature class="" first="False" fullname="filter_factory" ids="swift.common.middleware.crypto.filter_factory" module="swift.common.middleware.crypto" names="swift.common.middleware.crypto.filter_factory"><desc_addname xml:space="preserve">swift.common.middleware.crypto.</desc_addname><desc_name xml:space="preserve">filter_factory</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">global_conf</desc_parameter><desc_parameter xml:space="preserve">**local_conf</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Provides a factory function for loading encryption middleware.</paragraph>
                </desc_content>
            </desc>
            <target ids="module-swift.common.middleware.crypto.encrypter" ismod="True"></target>
            <index entries="['single',\ u'swift.common.middleware.crypto.encrypter\ (module)',\ u'module-swift.common.middleware.crypto.encrypter',\ '',\ None]"></index>
            <index entries="['single',\ u'EncInputWrapper\ (class\ in\ swift.common.middleware.crypto.encrypter)',\ u'swift.common.middleware.crypto.encrypter.EncInputWrapper',\ '',\ None]"></index>
            <desc desctype="class" domain="py" noindex="False" objtype="class">
                <desc_signature class="" first="False" fullname="EncInputWrapper" ids="swift.common.middleware.crypto.encrypter.EncInputWrapper" module="swift.common.middleware.crypto.encrypter" names="swift.common.middleware.crypto.encrypter.EncInputWrapper"><desc_annotation xml:space="preserve">class </desc_annotation><desc_addname xml:space="preserve">swift.common.middleware.crypto.encrypter.</desc_addname><desc_name xml:space="preserve">EncInputWrapper</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">crypto</desc_parameter><desc_parameter xml:space="preserve">keys</desc_parameter><desc_parameter xml:space="preserve">req</desc_parameter><desc_parameter xml:space="preserve">logger</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">object</literal></paragraph>
                    <paragraph>File-like object to be swapped in for wsgi.input.</paragraph>
                </desc_content>
            </desc>
            <index entries="['single',\ u'Encrypter\ (class\ in\ swift.common.middleware.crypto.encrypter)',\ u'swift.common.middleware.crypto.encrypter.Encrypter',\ '',\ None]"></index>
            <desc desctype="class" domain="py" noindex="False" objtype="class">
                <desc_signature class="" first="False" fullname="Encrypter" ids="swift.common.middleware.crypto.encrypter.Encrypter" module="swift.common.middleware.crypto.encrypter" names="swift.common.middleware.crypto.encrypter.Encrypter"><desc_annotation xml:space="preserve">class </desc_annotation><desc_addname xml:space="preserve">swift.common.middleware.crypto.encrypter.</desc_addname><desc_name xml:space="preserve">Encrypter</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">app</desc_parameter><desc_parameter xml:space="preserve">conf</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">object</literal></paragraph>
                    <paragraph>Middleware for encrypting data and user metadata.</paragraph>
                    <paragraph>By default all PUT or POST’ed object data and/or metadata will be
                        encrypted. Encryption of new data and/or metadata may be disabled by
                        setting the <literal>disable_encryption</literal> option to True. However, this middleware
                        should remain in the pipeline in order for existing encrypted data to be
                        read.</paragraph>
                </desc_content>
            </desc>
            <index entries="['single',\ u'encrypt_header_val()\ (in\ module\ swift.common.middleware.crypto.encrypter)',\ u'swift.common.middleware.crypto.encrypter.encrypt_header_val',\ '',\ None]"></index>
            <desc desctype="function" domain="py" noindex="False" objtype="function">
                <desc_signature class="" first="False" fullname="encrypt_header_val" ids="swift.common.middleware.crypto.encrypter.encrypt_header_val" module="swift.common.middleware.crypto.encrypter" names="swift.common.middleware.crypto.encrypter.encrypt_header_val"><desc_addname xml:space="preserve">swift.common.middleware.crypto.encrypter.</desc_addname><desc_name xml:space="preserve">encrypt_header_val</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">crypto</desc_parameter><desc_parameter xml:space="preserve">value</desc_parameter><desc_parameter xml:space="preserve">key</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Encrypt a header value using the supplied key.</paragraph>
                    <field_list>
                        <field>
                            <field_name>Parameters</field_name>
                            <field_body>
                                <bullet_list>
                                    <list_item>
                                        <paragraph><literal_strong refspecific="True">crypto</literal_strong> – a Crypto instance</paragraph>
                                    </list_item>
                                    <list_item>
                                        <paragraph><literal_strong refspecific="True">value</literal_strong> – value to encrypt</paragraph>
                                    </list_item>
                                    <list_item>
                                        <paragraph><literal_strong refspecific="True">key</literal_strong> – crypto key to use</paragraph>
                                    </list_item>
                                </bullet_list>
                            </field_body>
                        </field>
                        <field>
                            <field_name>Returns</field_name>
                            <field_body>
                                <paragraph>a tuple of (encrypted value, crypto_meta) where crypto_meta is a
                                    dict of form returned by
                                    <literal classes="xref py py-func">get_crypto_meta()</literal></paragraph>
                            </field_body>
                        </field>
                        <field>
                            <field_name>Raises</field_name>
                            <field_body>
                                <paragraph><literal_strong>ValueError</literal_strong> – if value is empty</paragraph>
                            </field_body>
                        </field>
                    </field_list>
                </desc_content>
            </desc>
            <target ids="module-swift.common.middleware.crypto.decrypter" ismod="True"></target>
            <index entries="['single',\ u'swift.common.middleware.crypto.decrypter\ (module)',\ u'module-swift.common.middleware.crypto.decrypter',\ '',\ None]"></index>
            <index entries="['single',\ u'Decrypter\ (class\ in\ swift.common.middleware.crypto.decrypter)',\ u'swift.common.middleware.crypto.decrypter.Decrypter',\ '',\ None]"></index>
            <desc desctype="class" domain="py" noindex="False" objtype="class">
                <desc_signature class="" first="False" fullname="Decrypter" ids="swift.common.middleware.crypto.decrypter.Decrypter" module="swift.common.middleware.crypto.decrypter" names="swift.common.middleware.crypto.decrypter.Decrypter"><desc_annotation xml:space="preserve">class </desc_annotation><desc_addname xml:space="preserve">swift.common.middleware.crypto.decrypter.</desc_addname><desc_name xml:space="preserve">Decrypter</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">app</desc_parameter><desc_parameter xml:space="preserve">conf</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">object</literal></paragraph>
                    <paragraph>Middleware for decrypting data and user metadata.</paragraph>
                </desc_content>
            </desc>
            <target refid="formpost"></target>
        </section>
        <section dupnames="formpost" ids="formpost id4" names="formpost">
            <title>FormPost</title>
            <target ids="module-swift.common.middleware.formpost" ismod="True"></target>
            <index entries="['single',\ u'swift.common.middleware.formpost\ (module)',\ u'module-swift.common.middleware.formpost',\ '',\ None]"></index>
            <paragraph>FormPost Middleware</paragraph>
            <paragraph>Translates a browser form post into a regular Swift object PUT.</paragraph>
            <paragraph>The format of the form is:</paragraph>
            <literal_block xml:space="preserve">&lt;form action="&lt;swift-url&gt;" method="POST"
      enctype="multipart/form-data"&gt;
  &lt;input type="hidden" name="redirect" value="&lt;redirect-url&gt;" /&gt;
  &lt;input type="hidden" name="max_file_size" value="&lt;bytes&gt;" /&gt;
  &lt;input type="hidden" name="max_file_count" value="&lt;count&gt;" /&gt;
  &lt;input type="hidden" name="expires" value="&lt;unix-timestamp&gt;" /&gt;
  &lt;input type="hidden" name="signature" value="&lt;hmac&gt;" /&gt;
  &lt;input type="file" name="file1" /&gt;&lt;br /&gt;
  &lt;input type="submit" /&gt;
&lt;/form&gt;</literal_block>
            <paragraph>Optionally, if you want the uploaded files to be temporary you can set
                x-delete-at or x-delete-after attributes by adding one of these as a
                form input:</paragraph>
            <literal_block xml:space="preserve">&lt;input type="hidden" name="x_delete_at" value="&lt;unix-timestamp&gt;" /&gt;
&lt;input type="hidden" name="x_delete_after" value="&lt;seconds&gt;" /&gt;</literal_block>
            <paragraph>The &lt;swift-url&gt; is the URL of the Swift destination, such as:</paragraph>
            <literal_block xml:space="preserve">https://swift-cluster.example.com/v1/AUTH_account/container/object_prefix</literal_block>
            <paragraph>The name of each file uploaded will be appended to the &lt;swift-url&gt;
                given. So, you can upload directly to the root of container with a
                url like:</paragraph>
            <literal_block xml:space="preserve">https://swift-cluster.example.com/v1/AUTH_account/container/</literal_block>
            <paragraph>Optionally, you can include an object prefix to better separate
                different users’ uploads, such as:</paragraph>
            <literal_block xml:space="preserve">https://swift-cluster.example.com/v1/AUTH_account/container/object_prefix</literal_block>
            <paragraph>Note the form method must be POST and the enctype must be set as
                “multipart/form-data”.</paragraph>
            <paragraph>The redirect attribute is the URL to redirect the browser to after the upload
                completes. This is an optional parameter. If you are uploading the form via an
                XMLHttpRequest the redirect should not be included. The URL will have status
                and message query parameters added to it, indicating the HTTP status code for
                the upload (2xx is success) and a possible message for further information if
                there was an error (such as “max_file_size exceeded”).</paragraph>
            <paragraph>The max_file_size attribute must be included and indicates the
                largest single file upload that can be done, in bytes.</paragraph>
            <paragraph>The max_file_count attribute must be included and indicates the
                maximum number of files that can be uploaded with the form. Include
                additional <literal>&lt;input type="file" name="filexx" /&gt;</literal> attributes if
                desired.</paragraph>
            <paragraph>The expires attribute is the Unix timestamp before which the form
                must be submitted before it is invalidated.</paragraph>
            <paragraph>The signature attribute is the HMAC-SHA1 signature of the form. Here is
                sample code for computing the signature:</paragraph>
            <literal_block xml:space="preserve">import hmac
from hashlib import sha1
from time import time
path = '/v1/account/container/object_prefix'
redirect = 'https://srv.com/some-page'  # set to '' if redirect not in form
max_file_size = 104857600
max_file_count = 10
expires = int(time() + 600)
key = 'mykey'
hmac_body = '%s\n%s\n%s\n%s\n%s' % (path, redirect,
    max_file_size, max_file_count, expires)
signature = hmac.new(key, hmac_body, sha1).hexdigest()</literal_block>
            <paragraph>The key is the value of either the account (X-Account-Meta-Temp-URL-Key,
                X-Account-Meta-Temp-Url-Key-2) or the container
                (X-Container-Meta-Temp-URL-Key, X-Container-Meta-Temp-Url-Key-2) TempURL keys.</paragraph>
            <paragraph>Be certain to use the full path, from the /v1/ onward.
                Note that x_delete_at and x_delete_after are not used in signature generation
                as they are both optional attributes.</paragraph>
            <paragraph>The command line tool <literal>swift-form-signature</literal> may be used (mostly
                just when testing) to compute expires and signature.</paragraph>
            <paragraph>Also note that the file attributes must be after the other attributes
                in order to be processed correctly. If attributes come after the
                file, they won’t be sent with the subrequest (there is no way to
                parse all the attributes on the server-side without reading the whole
                thing into memory – to service many requests, some with large files,
                there just isn’t enough memory on the server, so attributes following
                the file are simply ignored).</paragraph>
            <index entries="['single',\ u'FormPost\ (class\ in\ swift.common.middleware.formpost)',\ u'swift.common.middleware.formpost.FormPost',\ '',\ None]"></index>
            <desc desctype="class" domain="py" noindex="False" objtype="class">
                <desc_signature class="" first="False" fullname="FormPost" ids="swift.common.middleware.formpost.FormPost" module="swift.common.middleware.formpost" names="swift.common.middleware.formpost.FormPost"><desc_annotation xml:space="preserve">class </desc_annotation><desc_addname xml:space="preserve">swift.common.middleware.formpost.</desc_addname><desc_name xml:space="preserve">FormPost</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">app</desc_parameter><desc_parameter xml:space="preserve">conf</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">object</literal></paragraph>
                    <paragraph>FormPost Middleware</paragraph>
                    <paragraph>See above for a full description.</paragraph>
                    <paragraph>The proxy logs created for any subrequests made will have swift.source set
                        to “FP”.</paragraph>
                    <field_list>
                        <field>
                            <field_name>Parameters</field_name>
                            <field_body>
                                <bullet_list>
                                    <list_item>
                                        <paragraph><literal_strong refspecific="True">app</literal_strong> – The next WSGI filter or app in the paste.deploy
                                            chain.</paragraph>
                                    </list_item>
                                    <list_item>
                                        <paragraph><literal_strong refspecific="True">conf</literal_strong> – The configuration dict for the middleware.</paragraph>
                                    </list_item>
                                </bullet_list>
                            </field_body>
                        </field>
                    </field_list>
                    <index entries="['single',\ u'app\ (swift.common.middleware.formpost.FormPost\ attribute)',\ u'swift.common.middleware.formpost.FormPost.app',\ '',\ None]"></index>
                    <desc desctype="attribute" domain="py" noindex="False" objtype="attribute">
                        <desc_signature class="FormPost" first="False" fullname="FormPost.app" ids="swift.common.middleware.formpost.FormPost.app" module="swift.common.middleware.formpost" names="swift.common.middleware.formpost.FormPost.app"><desc_name xml:space="preserve">app</desc_name><desc_annotation xml:space="preserve"> = None</desc_annotation></desc_signature>
                        <desc_content>
                            <paragraph>The next WSGI application/filter in the paste.deploy pipeline.</paragraph>
                        </desc_content>
                    </desc>
                    <index entries="['single',\ u'conf\ (swift.common.middleware.formpost.FormPost\ attribute)',\ u'swift.common.middleware.formpost.FormPost.conf',\ '',\ None]"></index>
                    <desc desctype="attribute" domain="py" noindex="False" objtype="attribute">
                        <desc_signature class="FormPost" first="False" fullname="FormPost.conf" ids="swift.common.middleware.formpost.FormPost.conf" module="swift.common.middleware.formpost" names="swift.common.middleware.formpost.FormPost.conf"><desc_name xml:space="preserve">conf</desc_name><desc_annotation xml:space="preserve"> = None</desc_annotation></desc_signature>
                        <desc_content>
                            <paragraph>The filter configuration dict.</paragraph>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
            <index entries="['single',\ u'filter_factory()\ (in\ module\ swift.common.middleware.formpost)',\ u'swift.common.middleware.formpost.filter_factory',\ '',\ None]"></index>
            <desc desctype="function" domain="py" noindex="False" objtype="function">
                <desc_signature class="" first="False" fullname="filter_factory" ids="swift.common.middleware.formpost.filter_factory" module="swift.common.middleware.formpost" names="swift.common.middleware.formpost.filter_factory"><desc_addname xml:space="preserve">swift.common.middleware.formpost.</desc_addname><desc_name xml:space="preserve">filter_factory</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">global_conf</desc_parameter><desc_parameter xml:space="preserve">**local_conf</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Returns the WSGI filter for use with paste.deploy.</paragraph>
                </desc_content>
            </desc>
            <index entries="['single',\ u'READ_CHUNK_SIZE\ (in\ module\ swift.common.middleware.formpost)',\ u'swift.common.middleware.formpost.READ_CHUNK_SIZE',\ '',\ None]"></index>
            <desc desctype="data" domain="py" noindex="False" objtype="data">
                <desc_signature class="" first="False" fullname="READ_CHUNK_SIZE" ids="swift.common.middleware.formpost.READ_CHUNK_SIZE" module="swift.common.middleware.formpost" names="swift.common.middleware.formpost.READ_CHUNK_SIZE"><desc_addname xml:space="preserve">swift.common.middleware.formpost.</desc_addname><desc_name xml:space="preserve">READ_CHUNK_SIZE</desc_name><desc_annotation xml:space="preserve"> = 4096</desc_annotation></desc_signature>
                <desc_content>
                    <paragraph>The size of data to read from the form at any given time.</paragraph>
                </desc_content>
            </desc>
            <index entries="['single',\ u'MAX_VALUE_LENGTH\ (in\ module\ swift.common.middleware.formpost)',\ u'swift.common.middleware.formpost.MAX_VALUE_LENGTH',\ '',\ None]"></index>
            <desc desctype="data" domain="py" noindex="False" objtype="data">
                <desc_signature class="" first="False" fullname="MAX_VALUE_LENGTH" ids="swift.common.middleware.formpost.MAX_VALUE_LENGTH" module="swift.common.middleware.formpost" names="swift.common.middleware.formpost.MAX_VALUE_LENGTH"><desc_addname xml:space="preserve">swift.common.middleware.formpost.</desc_addname><desc_name xml:space="preserve">MAX_VALUE_LENGTH</desc_name><desc_annotation xml:space="preserve"> = 4096</desc_annotation></desc_signature>
                <desc_content>
                    <paragraph>The maximum size of any attribute’s value. Any additional data will be
                        truncated.</paragraph>
                </desc_content>
            </desc>
            <target refid="gatekeeper"></target>
        </section>
        <section dupnames="gatekeeper" ids="gatekeeper id5" names="gatekeeper">
            <title>GateKeeper</title>
            <target ids="module-swift.common.middleware.gatekeeper" ismod="True"></target>
            <index entries="['single',\ u'swift.common.middleware.gatekeeper\ (module)',\ u'module-swift.common.middleware.gatekeeper',\ '',\ None]"></index>
            <paragraph>The <literal>gatekeeper</literal> middleware imposes restrictions on the headers that
                may be included with requests and responses. Request headers are filtered
                to remove headers that should never be generated by a client. Similarly,
                response headers are filtered to remove private headers that should
                never be passed to a client.</paragraph>
            <paragraph>The <literal>gatekeeper</literal> middleware must always be present in the proxy server
                wsgi pipeline. It should be configured close to the start of the pipeline
                specified in <literal>/etc/swift/proxy-server.conf</literal>, immediately after catch_errors
                and before any other middleware. It is essential that it is configured ahead
                of all middlewares using system metadata in order that they function
                correctly.</paragraph>
            <paragraph>If <literal>gatekeeper</literal> middleware is not configured in the pipeline then it will be
                automatically inserted close to the start of the pipeline by the proxy server.</paragraph>
            <index entries="['single',\ u'inbound_exclusions\ (in\ module\ swift.common.middleware.gatekeeper)',\ u'swift.common.middleware.gatekeeper.inbound_exclusions',\ '',\ None]"></index>
            <desc desctype="data" domain="py" noindex="False" objtype="data">
                <desc_signature class="" first="False" fullname="inbound_exclusions" ids="swift.common.middleware.gatekeeper.inbound_exclusions" module="swift.common.middleware.gatekeeper" names="swift.common.middleware.gatekeeper.inbound_exclusions"><desc_addname xml:space="preserve">swift.common.middleware.gatekeeper.</desc_addname><desc_name xml:space="preserve">inbound_exclusions</desc_name><desc_annotation xml:space="preserve"> = ['x-account-sysmeta-', 'x-container-sysmeta-', 'x-object-sysmeta-', 'x-object-transient-sysmeta-', 'x-backend']</desc_annotation></desc_signature>
                <desc_content>
                    <paragraph>A list of python regular expressions that will be used to
                        match against inbound request headers. Matching headers will
                        be removed from the request.</paragraph>
                </desc_content>
            </desc>
            <index entries="['single',\ u'outbound_exclusions\ (in\ module\ swift.common.middleware.gatekeeper)',\ u'swift.common.middleware.gatekeeper.outbound_exclusions',\ '',\ None]"></index>
            <desc desctype="data" domain="py" noindex="False" objtype="data">
                <desc_signature class="" first="False" fullname="outbound_exclusions" ids="swift.common.middleware.gatekeeper.outbound_exclusions" module="swift.common.middleware.gatekeeper" names="swift.common.middleware.gatekeeper.outbound_exclusions"><desc_addname xml:space="preserve">swift.common.middleware.gatekeeper.</desc_addname><desc_name xml:space="preserve">outbound_exclusions</desc_name><desc_annotation xml:space="preserve"> = ['x-account-sysmeta-', 'x-container-sysmeta-', 'x-object-sysmeta-', 'x-object-transient-sysmeta-', 'x-backend']</desc_annotation></desc_signature>
                <desc_content>
                    <paragraph>A list of python regular expressions that will be used to
                        match against outbound response headers. Matching headers will
                        be removed from the response.</paragraph>
                </desc_content>
            </desc>
            <target refid="healthcheck"></target>
        </section>
        <section dupnames="healthcheck" ids="healthcheck id6" names="healthcheck">
            <title>Healthcheck</title>
            <target ids="module-swift.common.middleware.healthcheck" ismod="True"></target>
            <index entries="['single',\ u'swift.common.middleware.healthcheck\ (module)',\ u'module-swift.common.middleware.healthcheck',\ '',\ None]"></index>
            <index entries="['single',\ u'HealthCheckMiddleware\ (class\ in\ swift.common.middleware.healthcheck)',\ u'swift.common.middleware.healthcheck.HealthCheckMiddleware',\ '',\ None]"></index>
            <desc desctype="class" domain="py" noindex="False" objtype="class">
                <desc_signature class="" first="False" fullname="HealthCheckMiddleware" ids="swift.common.middleware.healthcheck.HealthCheckMiddleware" module="swift.common.middleware.healthcheck" names="swift.common.middleware.healthcheck.HealthCheckMiddleware"><desc_annotation xml:space="preserve">class </desc_annotation><desc_addname xml:space="preserve">swift.common.middleware.healthcheck.</desc_addname><desc_name xml:space="preserve">HealthCheckMiddleware</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">app</desc_parameter><desc_parameter xml:space="preserve">conf</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">object</literal></paragraph>
                    <paragraph>Healthcheck middleware used for monitoring.</paragraph>
                    <paragraph>If the path is /healthcheck, it will respond 200 with “OK” as the body.</paragraph>
                    <paragraph>If the optional config parameter “disable_path” is set, and a file is
                        present at that path, it will respond 503 with “DISABLED BY FILE” as the
                        body.</paragraph>
                    <index entries="['single',\ u'DISABLED()\ (swift.common.middleware.healthcheck.HealthCheckMiddleware\ method)',\ u'swift.common.middleware.healthcheck.HealthCheckMiddleware.DISABLED',\ '',\ None]"></index>
                    <desc desctype="method" domain="py" noindex="False" objtype="method">
                        <desc_signature class="HealthCheckMiddleware" first="False" fullname="HealthCheckMiddleware.DISABLED" ids="swift.common.middleware.healthcheck.HealthCheckMiddleware.DISABLED" module="swift.common.middleware.healthcheck" names="swift.common.middleware.healthcheck.HealthCheckMiddleware.DISABLED"><desc_name xml:space="preserve">DISABLED</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">req</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Returns a 503 response with “DISABLED BY FILE” in the body.</paragraph>
                        </desc_content>
                    </desc>
                    <index entries="['single',\ u'GET()\ (swift.common.middleware.healthcheck.HealthCheckMiddleware\ method)',\ u'swift.common.middleware.healthcheck.HealthCheckMiddleware.GET',\ '',\ None]"></index>
                    <desc desctype="method" domain="py" noindex="False" objtype="method">
                        <desc_signature class="HealthCheckMiddleware" first="False" fullname="HealthCheckMiddleware.GET" ids="swift.common.middleware.healthcheck.HealthCheckMiddleware.GET" module="swift.common.middleware.healthcheck" names="swift.common.middleware.healthcheck.HealthCheckMiddleware.GET"><desc_name xml:space="preserve">GET</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">req</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Returns a 200 response with “OK” in the body.</paragraph>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
            <target refid="keymaster"></target>
        </section>
        <section dupnames="keymaster" ids="keymaster id7" names="keymaster">
            <title>Keymaster</title>
            <paragraph>Keymaster middleware should be deployed in conjunction with the
                <reference internal="True" refid="encryption"><inline classes="std std-ref">Encryption</inline></reference> middleware.</paragraph>
            <target ids="module-swift.common.middleware.crypto.keymaster" ismod="True"></target>
            <index entries="['single',\ u'swift.common.middleware.crypto.keymaster\ (module)',\ u'module-swift.common.middleware.crypto.keymaster',\ '',\ None]"></index>
            <index entries="['single',\ u'KeyMaster\ (class\ in\ swift.common.middleware.crypto.keymaster)',\ u'swift.common.middleware.crypto.keymaster.KeyMaster',\ '',\ None]"></index>
            <desc desctype="class" domain="py" noindex="False" objtype="class">
                <desc_signature class="" first="False" fullname="KeyMaster" ids="swift.common.middleware.crypto.keymaster.KeyMaster" module="swift.common.middleware.crypto.keymaster" names="swift.common.middleware.crypto.keymaster.KeyMaster"><desc_annotation xml:space="preserve">class </desc_annotation><desc_addname xml:space="preserve">swift.common.middleware.crypto.keymaster.</desc_addname><desc_name xml:space="preserve">KeyMaster</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">app</desc_parameter><desc_parameter xml:space="preserve">conf</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">object</literal></paragraph>
                    <paragraph>Middleware for providing encryption keys.</paragraph>
                    <paragraph>The middleware requires its <literal>encryption_root_secret</literal> option to be set.
                        This is the root secret from which encryption keys are derived. This must
                        be set before first use to a value that is a base64 encoding of at least 32
                        bytes. The security of all encrypted data critically depends on this key,
                        therefore it should be set to a high-entropy value. For example, a suitable
                        value may be obtained by base-64 encoding a 32 byte (or longer) value
                        generated by a cryptographically secure random number generator. Changing
                        the root secret is likely to result in data loss.</paragraph>
                </desc_content>
            </desc>
            <index entries="['single',\ u'KeyMasterContext\ (class\ in\ swift.common.middleware.crypto.keymaster)',\ u'swift.common.middleware.crypto.keymaster.KeyMasterContext',\ '',\ None]"></index>
            <desc desctype="class" domain="py" noindex="False" objtype="class">
                <desc_signature class="" first="False" fullname="KeyMasterContext" ids="swift.common.middleware.crypto.keymaster.KeyMasterContext" module="swift.common.middleware.crypto.keymaster" names="swift.common.middleware.crypto.keymaster.KeyMasterContext"><desc_annotation xml:space="preserve">class </desc_annotation><desc_addname xml:space="preserve">swift.common.middleware.crypto.keymaster.</desc_addname><desc_name xml:space="preserve">KeyMasterContext</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">keymaster</desc_parameter><desc_parameter xml:space="preserve">account</desc_parameter><desc_parameter xml:space="preserve">container</desc_parameter><desc_parameter xml:space="preserve">obj</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Bases: <reference internal="True" reftitle="swift.common.wsgi.WSGIContext" refuri="misc#swift.common.wsgi.WSGIContext"><literal classes="xref py py-class">swift.common.wsgi.WSGIContext</literal></reference></paragraph>
                    <paragraph>The simple scheme for key derivation is as follows: every path is
                        associated with a key, where the key is derived from the path itself in a
                        deterministic fashion such that the key does not need to be stored.
                        Specifically, the key for any path is an HMAC of a root key and the path
                        itself, calculated using an SHA256 hash function:</paragraph>
                    <literal_block xml:space="preserve">&lt;path_key&gt; = HMAC_SHA256(&lt;root_secret&gt;, &lt;path&gt;)</literal_block>
                    <index entries="['single',\ u'fetch_crypto_keys()\ (swift.common.middleware.crypto.keymaster.KeyMasterContext\ method)',\ u'swift.common.middleware.crypto.keymaster.KeyMasterContext.fetch_crypto_keys',\ '',\ None]"></index>
                    <desc desctype="method" domain="py" noindex="False" objtype="method">
                        <desc_signature class="KeyMasterContext" first="False" fullname="KeyMasterContext.fetch_crypto_keys" ids="swift.common.middleware.crypto.keymaster.KeyMasterContext.fetch_crypto_keys" module="swift.common.middleware.crypto.keymaster" names="swift.common.middleware.crypto.keymaster.KeyMasterContext.fetch_crypto_keys"><desc_name xml:space="preserve">fetch_crypto_keys</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">*args</desc_parameter><desc_parameter xml:space="preserve">**kwargs</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Setup container and object keys based on the request path.</paragraph>
                            <paragraph>Keys are derived from request path. The ‘id’ entry in the results dict
                                includes the part of the path used to derive keys. Other keymaster
                                implementations may use a different strategy to generate keys and may
                                include a different type of ‘id’, so callers should treat the ‘id’ as
                                opaque keymaster-specific data.</paragraph>
                            <field_list>
                                <field>
                                    <field_name>Returns</field_name>
                                    <field_body>
                                        <paragraph>A dict containing encryption keys for ‘object’ and
                                            ‘container’ and a key ‘id’.</paragraph>
                                    </field_body>
                                </field>
                            </field_list>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
            <target refid="keystoneauth"></target>
        </section>
        <section dupnames="keystoneauth" ids="keystoneauth id8" names="keystoneauth">
            <title>KeystoneAuth</title>
            <target ids="module-swift.common.middleware.keystoneauth" ismod="True"></target>
            <index entries="['single',\ u'swift.common.middleware.keystoneauth\ (module)',\ u'module-swift.common.middleware.keystoneauth',\ '',\ None]"></index>
            <index entries="['single',\ u'KeystoneAuth\ (class\ in\ swift.common.middleware.keystoneauth)',\ u'swift.common.middleware.keystoneauth.KeystoneAuth',\ '',\ None]"></index>
            <desc desctype="class" domain="py" noindex="False" objtype="class">
                <desc_signature class="" first="False" fullname="KeystoneAuth" ids="swift.common.middleware.keystoneauth.KeystoneAuth" module="swift.common.middleware.keystoneauth" names="swift.common.middleware.keystoneauth.KeystoneAuth"><desc_annotation xml:space="preserve">class </desc_annotation><desc_addname xml:space="preserve">swift.common.middleware.keystoneauth.</desc_addname><desc_name xml:space="preserve">KeystoneAuth</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">app</desc_parameter><desc_parameter xml:space="preserve">conf</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">object</literal></paragraph>
                    <paragraph>Swift middleware to Keystone authorization system.</paragraph>
                    <paragraph>In Swift’s proxy-server.conf add this keystoneauth middleware and the
                        authtoken middleware to your pipeline. Make sure you have the authtoken
                        middleware before the keystoneauth middleware.</paragraph>
                    <paragraph>The authtoken middleware will take care of validating the user and
                        keystoneauth will authorize access.</paragraph>
                    <paragraph>The sample proxy-server.conf shows a sample pipeline that uses keystone.</paragraph>
                    <paragraph><download_reference filename="proxy-server.conf-sample" refdoc="middleware" refdomain="" refexplicit="True" reftarget="/../../etc/proxy-server.conf-sample" reftype="download" refwarn="False"><literal classes="xref download">proxy-server.conf-sample</literal></download_reference></paragraph>
                    <paragraph>The authtoken middleware is shipped with keystonemiddleware - it
                        does not have any other dependencies than itself so you can either
                        install it by copying the file directly in your python path or by
                        installing keystonemiddleware.</paragraph>
                    <paragraph>If support is required for unvalidated users (as with anonymous
                        access) or for formpost/staticweb/tempurl middleware, authtoken will
                        need to be configured with <literal>delay_auth_decision</literal> set to true.  See
                        the Keystone documentation for more detail on how to configure the
                        authtoken middleware.</paragraph>
                    <paragraph>In proxy-server.conf you will need to have the setting account
                        auto creation to true:</paragraph>
                    <literal_block xml:space="preserve">[app:proxy-server]
account_autocreate = true</literal_block>
                    <paragraph>And add a swift authorization filter section, such as:</paragraph>
                    <literal_block xml:space="preserve">[filter:keystoneauth]
use = egg:swift#keystoneauth
operator_roles = admin, swiftoperator</literal_block>
                    <paragraph>The user who is able to give ACL / create Containers permissions
                        will be the user with a role listed in the <literal>operator_roles</literal>
                        setting which by default includes the admin and the swiftoperator
                        roles.</paragraph>
                    <paragraph>The keystoneauth middleware maps a Keystone project/tenant to an account
                        in Swift by adding a prefix (<literal>AUTH_</literal> by default) to the tenant/project
                        id.. For example, if the project id is <literal>1234</literal>, the path is
                        <literal>/v1/AUTH_1234</literal>.</paragraph>
                    <paragraph>If you need to have a different reseller_prefix to be able to
                        mix different auth servers you can configure the option
                        <literal>reseller_prefix</literal> in your keystoneauth entry like this:</paragraph>
                    <literal_block xml:space="preserve">reseller_prefix = NEWAUTH</literal_block>
                    <paragraph>Don’t forget to also update the Keystone service endpoint configuration to
                        use NEWAUTH in the path.</paragraph>
                    <paragraph>It is possible to have several accounts associated with the same project.
                        This is done by listing several prefixes as shown in the following
                        example:</paragraph>
                    <block_quote>
                        <paragraph>reseller_prefix = AUTH, SERVICE</paragraph>
                    </block_quote>
                    <paragraph>This means that for project id ‘1234’, the paths ‘/v1/AUTH_1234’ and
                        ‘/v1/SERVICE_1234’ are associated with the project and are authorized
                        using roles that a user has with that project. The core use of this feature
                        is that it is possible to provide different rules for each account
                        prefix. The following parameters may be prefixed with the appropriate
                        prefix:</paragraph>
                    <block_quote>
                        <paragraph>operator_roles
                            service_roles</paragraph>
                    </block_quote>
                    <paragraph>For backward compatibility, if either of these parameters is specified
                        without a prefix then it applies to all reseller_prefixes. Here is an
                        example, using two prefixes:</paragraph>
                    <literal_block xml:space="preserve">reseller_prefix = AUTH, SERVICE
# The next three lines have identical effects (since the first applies
# to both prefixes).
operator_roles = admin, swiftoperator
AUTH_operator_roles = admin, swiftoperator
SERVICE_operator_roles = admin, swiftoperator
# The next line only applies to accounts with the SERVICE prefix
SERVICE_operator_roles = admin, some_other_role</literal_block>
                    <paragraph>X-Service-Token tokens are supported by the inclusion of the service_roles
                        configuration option. When present, this option requires that the
                        X-Service-Token header supply a token from a user who has a role listed
                        in service_roles. Here is an example configuration:</paragraph>
                    <literal_block xml:space="preserve">reseller_prefix = AUTH, SERVICE
AUTH_operator_roles = admin, swiftoperator
SERVICE_operator_roles = admin, swiftoperator
SERVICE_service_roles = service</literal_block>
                    <paragraph>The keystoneauth middleware supports cross-tenant access control using the
                        syntax <literal>&lt;tenant&gt;:&lt;user&gt;</literal> to specify a grantee in container Access Control
                        Lists (ACLs). For a request to be granted by an ACL, the grantee
                        <literal>&lt;tenant&gt;</literal> must match the UUID of the tenant to which the request
                        X-Auth-Token is scoped and the grantee <literal>&lt;user&gt;</literal> must match the UUID of
                        the user authenticated by that token.</paragraph>
                    <paragraph>Note that names must no longer be used in cross-tenant ACLs because with
                        the introduction of domains in keystone names are no longer globally
                        unique.</paragraph>
                    <paragraph>For backwards compatibility, ACLs using names will be granted by
                        keystoneauth when it can be established that the grantee tenant,
                        the grantee user and the tenant being accessed are either not yet in a
                        domain (e.g. the X-Auth-Token has been obtained via the keystone v2
                        API) or are all in the default domain to which legacy accounts would
                        have been migrated. The default domain is identified by its UUID,
                        which by default has the value <literal>default</literal>. This can be changed by
                        setting the <literal>default_domain_id</literal> option in the keystoneauth
                        configuration:</paragraph>
                    <literal_block xml:space="preserve">default_domain_id = default</literal_block>
                    <paragraph>The backwards compatible behavior can be disabled by setting the config
                        option <literal>allow_names_in_acls</literal> to false:</paragraph>
                    <literal_block xml:space="preserve">allow_names_in_acls = false</literal_block>
                    <paragraph>To enable this backwards compatibility, keystoneauth will attempt to
                        determine the domain id of a tenant when any new account is created,
                        and persist this as account metadata. If an account is created for a tenant
                        using a token with reselleradmin role that is not scoped on that tenant,
                        keystoneauth is unable to determine the domain id of the tenant;
                        keystoneauth will assume that the tenant may not be in the default domain
                        and therefore not match names in ACLs for that account.</paragraph>
                    <paragraph>By default, middleware higher in the WSGI pipeline may override auth
                        processing, useful for middleware such as tempurl and formpost. If you know
                        you’re not going to use such middleware and you want a bit of extra
                        security you can disable this behaviour by setting the <literal>allow_overrides</literal>
                        option to <literal>false</literal>:</paragraph>
                    <literal_block xml:space="preserve">allow_overrides = false</literal_block>
                    <field_list>
                        <field>
                            <field_name>Parameters</field_name>
                            <field_body>
                                <bullet_list>
                                    <list_item>
                                        <paragraph><literal_strong refspecific="True">app</literal_strong> – The next WSGI app in the pipeline</paragraph>
                                    </list_item>
                                    <list_item>
                                        <paragraph><literal_strong refspecific="True">conf</literal_strong> – The dict of configuration values</paragraph>
                                    </list_item>
                                </bullet_list>
                            </field_body>
                        </field>
                    </field_list>
                    <index entries="['single',\ u'authorize_anonymous()\ (swift.common.middleware.keystoneauth.KeystoneAuth\ method)',\ u'swift.common.middleware.keystoneauth.KeystoneAuth.authorize_anonymous',\ '',\ None]"></index>
                    <desc desctype="method" domain="py" noindex="False" objtype="method">
                        <desc_signature class="KeystoneAuth" first="False" fullname="KeystoneAuth.authorize_anonymous" ids="swift.common.middleware.keystoneauth.KeystoneAuth.authorize_anonymous" module="swift.common.middleware.keystoneauth" names="swift.common.middleware.keystoneauth.KeystoneAuth.authorize_anonymous"><desc_name xml:space="preserve">authorize_anonymous</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">req</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Authorize an anonymous request.</paragraph>
                            <field_list>
                                <field>
                                    <field_name>Returns</field_name>
                                    <field_body>
                                        <paragraph>None if authorization is granted, an error page otherwise.</paragraph>
                                    </field_body>
                                </field>
                            </field_list>
                        </desc_content>
                    </desc>
                    <index entries="['single',\ u'denied_response()\ (swift.common.middleware.keystoneauth.KeystoneAuth\ method)',\ u'swift.common.middleware.keystoneauth.KeystoneAuth.denied_response',\ '',\ None]"></index>
                    <desc desctype="method" domain="py" noindex="False" objtype="method">
                        <desc_signature class="KeystoneAuth" first="False" fullname="KeystoneAuth.denied_response" ids="swift.common.middleware.keystoneauth.KeystoneAuth.denied_response" module="swift.common.middleware.keystoneauth" names="swift.common.middleware.keystoneauth.KeystoneAuth.denied_response"><desc_name xml:space="preserve">denied_response</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">req</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Deny WSGI Response.</paragraph>
                            <paragraph>Returns a standard WSGI response callable with the status of 403 or 401
                                depending on whether the REMOTE_USER is set or not.</paragraph>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
            <index entries="['single',\ u'filter_factory()\ (in\ module\ swift.common.middleware.keystoneauth)',\ u'swift.common.middleware.keystoneauth.filter_factory',\ '',\ None]"></index>
            <desc desctype="function" domain="py" noindex="False" objtype="function">
                <desc_signature class="" first="False" fullname="filter_factory" ids="swift.common.middleware.keystoneauth.filter_factory" module="swift.common.middleware.keystoneauth" names="swift.common.middleware.keystoneauth.filter_factory"><desc_addname xml:space="preserve">swift.common.middleware.keystoneauth.</desc_addname><desc_name xml:space="preserve">filter_factory</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">global_conf</desc_parameter><desc_parameter xml:space="preserve">**local_conf</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Returns a WSGI filter app for use with paste.deploy.</paragraph>
                </desc_content>
            </desc>
            <target refid="list-endpoints"></target>
        </section>
        <section ids="module-swift.common.middleware.list_endpoints id9 list-endpoints" names="list\ endpoints list_endpoints">
            <title>List Endpoints</title>
            <index entries="['single',\ u'swift.common.middleware.list_endpoints\ (module)',\ u'module-swift.common.middleware.list_endpoints',\ '',\ None]"></index>
            <paragraph>List endpoints for an object, account or container.</paragraph>
            <paragraph>This middleware makes it possible to integrate swift with software
                that relies on data locality information to avoid network overhead,
                such as Hadoop.</paragraph>
            <paragraph>Using the original API, answers requests of the form:</paragraph>
            <literal_block xml:space="preserve">/endpoints/{account}/{container}/{object}
/endpoints/{account}/{container}
/endpoints/{account}
/endpoints/v1/{account}/{container}/{object}
/endpoints/v1/{account}/{container}
/endpoints/v1/{account}</literal_block>
            <paragraph>with a JSON-encoded list of endpoints of the form:</paragraph>
            <literal_block xml:space="preserve">http://{server}:{port}/{dev}/{part}/{acc}/{cont}/{obj}
http://{server}:{port}/{dev}/{part}/{acc}/{cont}
http://{server}:{port}/{dev}/{part}/{acc}</literal_block>
            <paragraph>correspondingly, e.g.:</paragraph>
            <literal_block xml:space="preserve">http://10.1.1.1:6200/sda1/2/a/c2/o1
http://10.1.1.1:6200/sda1/2/a/c2
http://10.1.1.1:6200/sda1/2/a</literal_block>
            <paragraph>Using the v2 API, answers requests of the form:</paragraph>
            <literal_block xml:space="preserve">/endpoints/v2/{account}/{container}/{object}
/endpoints/v2/{account}/{container}
/endpoints/v2/{account}</literal_block>
            <paragraph>with a JSON-encoded dictionary containing a key ‘endpoints’ that maps to a list
                of endpoints having the same form as described above, and a key ‘headers’ that
                maps to a dictionary of headers that should be sent with a request made to
                the endpoints, e.g.:</paragraph>
            <literal_block xml:space="preserve">{ "endpoints": {"http://10.1.1.1:6010/sda1/2/a/c3/o1",
                "http://10.1.1.1:6030/sda3/2/a/c3/o1",
                "http://10.1.1.1:6040/sda4/2/a/c3/o1"},
  "headers": {"X-Backend-Storage-Policy-Index": "1"}}</literal_block>
            <paragraph>In this example, the ‘headers’ dictionary indicates that requests to the
                endpoint URLs should include the header ‘X-Backend-Storage-Policy-Index: 1’
                because the object’s container is using storage policy index 1.</paragraph>
            <paragraph>The ‘/endpoints/’ path is customizable (‘list_endpoints_path’
                configuration parameter).</paragraph>
            <paragraph>Intended for consumption by third-party services living inside the
                cluster (as the endpoints make sense only inside the cluster behind
                the firewall); potentially written in a different language.</paragraph>
            <paragraph>This is why it’s provided as a REST API and not just a Python API:
                to avoid requiring clients to write their own ring parsers in their
                languages, and to avoid the necessity to distribute the ring file
                to clients and keep it up-to-date.</paragraph>
            <paragraph>Note that the call is not authenticated, which means that a proxy
                with this middleware enabled should not be open to an untrusted
                environment (everyone can query the locality data using this middleware).</paragraph>
            <index entries="['single',\ u'ListEndpointsMiddleware\ (class\ in\ swift.common.middleware.list_endpoints)',\ u'swift.common.middleware.list_endpoints.ListEndpointsMiddleware',\ '',\ None]"></index>
            <desc desctype="class" domain="py" noindex="False" objtype="class">
                <desc_signature class="" first="False" fullname="ListEndpointsMiddleware" ids="swift.common.middleware.list_endpoints.ListEndpointsMiddleware" module="swift.common.middleware.list_endpoints" names="swift.common.middleware.list_endpoints.ListEndpointsMiddleware"><desc_annotation xml:space="preserve">class </desc_annotation><desc_addname xml:space="preserve">swift.common.middleware.list_endpoints.</desc_addname><desc_name xml:space="preserve">ListEndpointsMiddleware</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">app</desc_parameter><desc_parameter xml:space="preserve">conf</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">object</literal></paragraph>
                    <paragraph>List endpoints for an object, account or container.</paragraph>
                    <paragraph>See above for a full description.</paragraph>
                    <paragraph>Uses configuration parameter <title_reference>swift_dir</title_reference> (default <title_reference>/etc/swift</title_reference>).</paragraph>
                    <field_list>
                        <field>
                            <field_name>Parameters</field_name>
                            <field_body>
                                <bullet_list>
                                    <list_item>
                                        <paragraph><literal_strong refspecific="True">app</literal_strong> – The next WSGI filter or app in the paste.deploy
                                            chain.</paragraph>
                                    </list_item>
                                    <list_item>
                                        <paragraph><literal_strong refspecific="True">conf</literal_strong> – The configuration dict for the middleware.</paragraph>
                                    </list_item>
                                </bullet_list>
                            </field_body>
                        </field>
                    </field_list>
                    <index entries="['single',\ u'get_object_ring()\ (swift.common.middleware.list_endpoints.ListEndpointsMiddleware\ method)',\ u'swift.common.middleware.list_endpoints.ListEndpointsMiddleware.get_object_ring',\ '',\ None]"></index>
                    <desc desctype="method" domain="py" noindex="False" objtype="method">
                        <desc_signature class="ListEndpointsMiddleware" first="False" fullname="ListEndpointsMiddleware.get_object_ring" ids="swift.common.middleware.list_endpoints.ListEndpointsMiddleware.get_object_ring" module="swift.common.middleware.list_endpoints" names="swift.common.middleware.list_endpoints.ListEndpointsMiddleware.get_object_ring"><desc_name xml:space="preserve">get_object_ring</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">policy_idx</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Get the ring object to use to handle a request based on its policy.</paragraph>
                            <field_list>
                                <field>
                                    <field_name>Policy_idx</field_name>
                                    <field_body>
                                        <paragraph>policy index as defined in swift.conf</paragraph>
                                    </field_body>
                                </field>
                                <field>
                                    <field_name>Returns</field_name>
                                    <field_body>
                                        <paragraph>appropriate ring object</paragraph>
                                    </field_body>
                                </field>
                            </field_list>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
        </section>
        <section ids="module-swift.common.middleware.memcache memcache" names="memcache">
            <title>Memcache</title>
            <index entries="['single',\ u'swift.common.middleware.memcache\ (module)',\ u'module-swift.common.middleware.memcache',\ '',\ None]"></index>
            <index entries="['single',\ u'MemcacheMiddleware\ (class\ in\ swift.common.middleware.memcache)',\ u'swift.common.middleware.memcache.MemcacheMiddleware',\ '',\ None]"></index>
            <desc desctype="class" domain="py" noindex="False" objtype="class">
                <desc_signature class="" first="False" fullname="MemcacheMiddleware" ids="swift.common.middleware.memcache.MemcacheMiddleware" module="swift.common.middleware.memcache" names="swift.common.middleware.memcache.MemcacheMiddleware"><desc_annotation xml:space="preserve">class </desc_annotation><desc_addname xml:space="preserve">swift.common.middleware.memcache.</desc_addname><desc_name xml:space="preserve">MemcacheMiddleware</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">app</desc_parameter><desc_parameter xml:space="preserve">conf</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">object</literal></paragraph>
                    <paragraph>Caching middleware that manages caching in swift.</paragraph>
                </desc_content>
            </desc>
        </section>
        <section ids="module-swift.common.middleware.name_check name-check-forbidden-character-filter" names="name\ check\ (forbidden\ character\ filter)">
            <title>Name Check (Forbidden Character Filter)</title>
            <index entries="['single',\ u'swift.common.middleware.name_check\ (module)',\ u'module-swift.common.middleware.name_check',\ '',\ None]"></index>
            <paragraph>Created on February 27, 2012</paragraph>
            <paragraph>A filter that disallows any paths that contain defined forbidden characters or
                that exceed a defined length.</paragraph>
            <paragraph>Place early in the proxy-server pipeline after the left-most occurrence of the
                <literal>proxy-logging</literal> middleware (if present) and before the final
                <literal>proxy-logging</literal> middleware (if present) or the <literal>proxy-serer</literal> app itself,
                e.g.:</paragraph>
            <literal_block xml:space="preserve">[pipeline:main]
pipeline = catch_errors healthcheck proxy-logging name_check cache ratelimit tempauth sos proxy-logging proxy-server

[filter:name_check]
use = egg:swift#name_check
forbidden_chars = '"`&lt;&gt;
maximum_length = 255</literal_block>
            <paragraph>There are default settings for forbidden_chars (FORBIDDEN_CHARS) and
                maximum_length (MAX_LENGTH)</paragraph>
            <paragraph>The filter returns HTTPBadRequest if path is invalid.</paragraph>
            <paragraph>@author: eamonn-otoole</paragraph>
            <target refid="versioned-writes"></target>
        </section>
        <section ids="module-swift.common.middleware.versioned_writes object-versioning versioned-writes" names="object\ versioning versioned_writes">
            <title>Object Versioning</title>
            <index entries="['single',\ u'swift.common.middleware.versioned_writes\ (module)',\ u'module-swift.common.middleware.versioned_writes',\ '',\ None]"></index>
            <paragraph>Object versioning in swift is implemented by setting a flag on the container
                to tell swift to version all objects in the container. The value of the flag is
                the container where the versions are stored (commonly referred to as the
                “archive container”). The flag itself is one of two headers, which determines
                how object <literal>DELETE</literal> requests are handled:</paragraph>
            <block_quote>
                <bullet_list bullet="*">
                    <list_item>
                        <paragraph><literal>X-History-Location</literal></paragraph>
                        <paragraph>On <literal>DELETE</literal>, copy the current version of the object to the archive
                            container, write a zero-byte “delete marker” object that notes when the
                            delete took place, and delete the object from the versioned container. The
                            object will no longer appear in container listings for the versioned
                            container and future requests there will return <literal>404 Not Found</literal>. However,
                            the content will still be recoverable from the archive container.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph><literal>X-Versions-Location</literal></paragraph>
                        <paragraph>On <literal>DELETE</literal>, only remove the current version of the object. If any
                            previous versions exist in the archive container, the most recent one is
                            copied over the current version, and the copy in the archive container is
                            deleted. As a result, if you have 5 total versions of the object, you must
                            delete the object 5 times for that object name to start responding with
                            <literal>404 Not Found</literal>.</paragraph>
                    </list_item>
                </bullet_list>
            </block_quote>
            <paragraph>Either header may be used for the various containers within an account, but
                only one may be set for any given container. Attempting to set both
                simulataneously will result in a <literal>400 Bad Request</literal> response.</paragraph>
            <note>
                <paragraph>It is recommended to use a different archive container for
                    each container that is being versioned.</paragraph>
            </note>
            <note>
                <paragraph>Enabling versioning on an archive container is not recommended.</paragraph>
            </note>
            <paragraph>When data is <literal>PUT</literal> into a versioned container (a container with the
                versioning flag turned on), the existing data in the file is redirected to a
                new object in the archive container and the data in the <literal>PUT</literal> request is
                saved as the data for the versioned object. The new object name (for the
                previous version) is <literal>&lt;archive_container&gt;/&lt;length&gt;&lt;object_name&gt;/&lt;timestamp&gt;</literal>,
                where <literal>length</literal> is the 3-character zero-padded hexadecimal length of the
                <literal>&lt;object_name&gt;</literal> and <literal>&lt;timestamp&gt;</literal> is the timestamp of when the previous
                version was created.</paragraph>
            <paragraph>A <literal>GET</literal> to a versioned object will return the current version of the object
                without having to do any request redirects or metadata lookups.</paragraph>
            <paragraph>A <literal>POST</literal> to a versioned object will update the object metadata as normal,
                but will not create a new version of the object. In other words, new versions
                are only created when the content of the object changes.</paragraph>
            <paragraph>A <literal>DELETE</literal> to a versioned object will be handled in one of two ways,
                as described above.</paragraph>
            <paragraph>To restore a previous version of an object, find the desired version in the
                archive container then issue a <literal>COPY</literal> with a <literal>Destination</literal> header
                indicating the original location. This will archive the current version similar
                to a <literal>PUT</literal> over the versioned object. If the client additionally wishes to
                permanently delete what was the current version, it must find the newly-created
                archive in the archive container and issue a separate <literal>DELETE</literal> to it.</paragraph>
            <section ids="how-to-enable-object-versioning-in-a-swift-cluster" names="how\ to\ enable\ object\ versioning\ in\ a\ swift\ cluster">
                <title>How to Enable Object Versioning in a Swift Cluster</title>
                <paragraph>This middleware was written as an effort to refactor parts of the proxy server,
                    so this functionality was already available in previous releases and every
                    attempt was made to maintain backwards compatibility. To allow operators to
                    perform a seamless upgrade, it is not required to add the middleware to the
                    proxy pipeline and the flag <literal>allow_versions</literal> in the container server
                    configuration files are still valid, but only when using
                    <literal>X-Versions-Location</literal>. In future releases, <literal>allow_versions</literal> will be
                    deprecated in favor of adding this middleware to the pipeline to enable or
                    disable the feature.</paragraph>
                <paragraph>In case the middleware is added to the proxy pipeline, you must also
                    set <literal>allow_versioned_writes</literal> to <literal>True</literal> in the middleware options
                    to enable the information about this middleware to be returned in a /info
                    request.</paragraph>
                <block_quote>
                    <note>
                        <paragraph>You need to add the middleware to the proxy pipeline and set
                            <literal>allow_versioned_writes = True</literal> to use <literal>X-History-Location</literal>. Setting
                            <literal>allow_versions = True</literal> in the container server is not sufficient to
                            enable the use of <literal>X-History-Location</literal>.</paragraph>
                    </note>
                </block_quote>
                <section ids="upgrade-considerations" names="upgrade\ considerations:">
                    <title>Upgrade considerations:</title>
                    <paragraph>If <literal>allow_versioned_writes</literal> is set in the filter configuration, you can leave
                        the <literal>allow_versions</literal> flag in the container server configuration files
                        untouched. If you decide to disable or remove the <literal>allow_versions</literal> flag, you
                        must re-set any existing containers that had the <literal>X-Versions-Location</literal> flag
                        configured so that it can now be tracked by the versioned_writes middleware.</paragraph>
                    <paragraph>Clients should not use the <literal>X-History-Location</literal> header until all proxies in
                        the cluster have been upgraded to a version of Swift that supports it.
                        Attempting to use <literal>X-History-Location</literal> during a rolling upgrade may result
                        in some requests being served by proxies running old code, leading to data
                        loss.</paragraph>
                </section>
            </section>
            <section ids="examples-using-curl-with-x-versions-location" names="examples\ using\ curl\ with\ x-versions-location">
                <title>Examples Using <literal>curl</literal> with <literal>X-Versions-Location</literal></title>
                <paragraph>First, create a container with the <literal>X-Versions-Location</literal> header or add the
                    header to an existing container. Also make sure the container referenced by
                    the <literal>X-Versions-Location</literal> exists. In this example, the name of that
                    container is “versions”:</paragraph>
                <literal_block xml:space="preserve">curl -i -XPUT -H "X-Auth-Token: &lt;token&gt;" -H "X-Versions-Location: versions" http://&lt;storage_url&gt;/container
curl -i -XPUT -H "X-Auth-Token: &lt;token&gt;" http://&lt;storage_url&gt;/versions</literal_block>
                <paragraph>Create an object (the first version):</paragraph>
                <literal_block xml:space="preserve">curl -i -XPUT --data-binary 1 -H "X-Auth-Token: &lt;token&gt;" http://&lt;storage_url&gt;/container/myobject</literal_block>
                <paragraph>Now create a new version of that object:</paragraph>
                <literal_block xml:space="preserve">curl -i -XPUT --data-binary 2 -H "X-Auth-Token: &lt;token&gt;" http://&lt;storage_url&gt;/container/myobject</literal_block>
                <paragraph>See a listing of the older versions of the object:</paragraph>
                <literal_block xml:space="preserve">curl -i -H "X-Auth-Token: &lt;token&gt;" http://&lt;storage_url&gt;/versions?prefix=008myobject/</literal_block>
                <paragraph>Now delete the current version of the object and see that the older version is
                    gone from ‘versions’ container and back in ‘container’ container:</paragraph>
                <literal_block xml:space="preserve">curl -i -XDELETE -H "X-Auth-Token: &lt;token&gt;" http://&lt;storage_url&gt;/container/myobject
curl -i -H "X-Auth-Token: &lt;token&gt;" http://&lt;storage_url&gt;/versions?prefix=008myobject/
curl -i -XGET -H "X-Auth-Token: &lt;token&gt;" http://&lt;storage_url&gt;/container/myobject</literal_block>
            </section>
            <section ids="examples-using-curl-with-x-history-location" names="examples\ using\ curl\ with\ x-history-location">
                <title>Examples Using <literal>curl</literal> with <literal>X-History-Location</literal></title>
                <paragraph>As above, create a container with the <literal>X-History-Location</literal> header and ensure
                    that the container referenced by the <literal>X-History-Location</literal> exists. In this
                    example, the name of that container is “versions”:</paragraph>
                <literal_block xml:space="preserve">curl -i -XPUT -H "X-Auth-Token: &lt;token&gt;" -H "X-History-Location: versions" http://&lt;storage_url&gt;/container
curl -i -XPUT -H "X-Auth-Token: &lt;token&gt;" http://&lt;storage_url&gt;/versions</literal_block>
                <paragraph>Create an object (the first version):</paragraph>
                <literal_block xml:space="preserve">curl -i -XPUT --data-binary 1 -H "X-Auth-Token: &lt;token&gt;" http://&lt;storage_url&gt;/container/myobject</literal_block>
                <paragraph>Now create a new version of that object:</paragraph>
                <literal_block xml:space="preserve">curl -i -XPUT --data-binary 2 -H "X-Auth-Token: &lt;token&gt;" http://&lt;storage_url&gt;/container/myobject</literal_block>
                <paragraph>Now delete the current version of the object. Subsequent requests will 404:</paragraph>
                <literal_block xml:space="preserve">curl -i -XDELETE -H "X-Auth-Token: &lt;token&gt;" http://&lt;storage_url&gt;/container/myobject
curl -i -H "X-Auth-Token: &lt;token&gt;" http://&lt;storage_url&gt;/container/myobject</literal_block>
                <paragraph>A listing of the older versions of the object will include both the first and
                    second versions of the object, as well as a “delete marker” object:</paragraph>
                <literal_block xml:space="preserve">curl -i -H "X-Auth-Token: &lt;token&gt;" http://&lt;storage_url&gt;/versions?prefix=008myobject/</literal_block>
                <paragraph>To restore a previous version, simply <literal>COPY</literal> it from the archive container:</paragraph>
                <literal_block xml:space="preserve">curl -i -XCOPY -H "X-Auth-Token: &lt;token&gt;" http://&lt;storage_url&gt;/versions/008myobject/&lt;timestamp&gt; -H "Destination: container/myobject"</literal_block>
                <paragraph>Note that the archive container still has all previous versions of the object,
                    including the source for the restore:</paragraph>
                <literal_block xml:space="preserve">curl -i -H "X-Auth-Token: &lt;token&gt;" http://&lt;storage_url&gt;/versions?prefix=008myobject/</literal_block>
                <paragraph>To permanently delete a previous version, <literal>DELETE</literal> it from the archive
                    container:</paragraph>
                <literal_block xml:space="preserve">curl -i -XDELETE -H "X-Auth-Token: &lt;token&gt;" http://&lt;storage_url&gt;/versions/008myobject/&lt;timestamp&gt;</literal_block>
            </section>
            <section ids="how-to-disable-object-versioning-in-a-swift-cluster" names="how\ to\ disable\ object\ versioning\ in\ a\ swift\ cluster">
                <title>How to Disable Object Versioning in a Swift Cluster</title>
                <paragraph>If you want to disable all functionality, set <literal>allow_versioned_writes</literal> to
                    <literal>False</literal> in the middleware options.</paragraph>
                <paragraph>Disable versioning from a container (x is any value except empty):</paragraph>
                <literal_block xml:space="preserve">curl -i -XPOST -H "X-Auth-Token: &lt;token&gt;" -H "X-Remove-Versions-Location: x" http://&lt;storage_url&gt;/container</literal_block>
            </section>
        </section>
        <section ids="module-swift.common.middleware.proxy_logging proxy-logging" names="proxy\ logging">
            <title>Proxy Logging</title>
            <index entries="['single',\ u'swift.common.middleware.proxy_logging\ (module)',\ u'module-swift.common.middleware.proxy_logging',\ '',\ None]"></index>
            <paragraph>Logging middleware for the Swift proxy.</paragraph>
            <paragraph>This serves as both the default logging implementation and an example of how
                to plug in your own logging format/method.</paragraph>
            <paragraph>The logging format implemented below is as follows:</paragraph>
            <definition_list>
                <definition_list_item>
                    <term>client_ip remote_addr datetime request_method request_path protocol</term>
                    <definition>
                        <paragraph>status_int referer user_agent auth_token bytes_recvd bytes_sent
                            client_etag transaction_id headers request_time source log_info
                            request_start_time request_end_time</paragraph>
                    </definition>
                </definition_list_item>
            </definition_list>
            <paragraph>These values are space-separated, and each is url-encoded, so that they can
                be separated with a simple .split()</paragraph>
            <bullet_list bullet="*">
                <list_item>
                    <paragraph>remote_addr is the contents of the REMOTE_ADDR environment variable, while
                        client_ip is swift’s best guess at the end-user IP, extracted variously
                        from the X-Forwarded-For header, X-Cluster-Ip header, or the REMOTE_ADDR
                        environment variable.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>source (swift.source in the WSGI environment) indicates the code
                        that generated the request, such as most middleware. (See below for
                        more detail.)</paragraph>
                </list_item>
                <list_item>
                    <paragraph>log_info (swift.log_info in the WSGI environment) is for additional
                        information that could prove quite useful, such as any x-delete-at
                        value or other “behind the scenes” activity that might not
                        otherwise be detectable from the plain log information. Code that
                        wishes to add additional log information should use code like
                        <literal>env.setdefault('swift.log_info', []).append(your_info)</literal> so as to
                        not disturb others’ log information.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Values that are missing (e.g. due to a header not being present) or zero
                        are generally represented by a single hyphen (‘-‘).</paragraph>
                </list_item>
            </bullet_list>
            <paragraph>The proxy-logging can be used twice in the proxy server’s pipeline when there
                is middleware installed that can return custom responses that don’t follow the
                standard pipeline to the proxy server.</paragraph>
            <paragraph>For example, with staticweb, the middleware might intercept a request to
                /v1/AUTH_acc/cont/, make a subrequest to the proxy to retrieve
                /v1/AUTH_acc/cont/index.html and, in effect, respond to the client’s original
                request using the 2nd request’s body. In this instance the subrequest will be
                logged by the rightmost middleware (with a swift.source set) and the outgoing
                request (with body overridden) will be logged by leftmost middleware.</paragraph>
            <paragraph>Requests that follow the normal pipeline (use the same wsgi environment
                throughout) will not be double logged because an environment variable
                (swift.proxy_access_log_made) is checked/set when a log is made.</paragraph>
            <paragraph>All middleware making subrequests should take care to set swift.source when
                needed. With the doubled proxy logs, any consumer/processor of swift’s proxy
                logs should look at the swift.source field, the rightmost log value, to decide
                if this is a middleware subrequest or not. A log processor calculating
                bandwidth usage will want to only sum up logs with no swift.source.</paragraph>
            <index entries="['single',\ u'ProxyLoggingMiddleware\ (class\ in\ swift.common.middleware.proxy_logging)',\ u'swift.common.middleware.proxy_logging.ProxyLoggingMiddleware',\ '',\ None]"></index>
            <desc desctype="class" domain="py" noindex="False" objtype="class">
                <desc_signature class="" first="False" fullname="ProxyLoggingMiddleware" ids="swift.common.middleware.proxy_logging.ProxyLoggingMiddleware" module="swift.common.middleware.proxy_logging" names="swift.common.middleware.proxy_logging.ProxyLoggingMiddleware"><desc_annotation xml:space="preserve">class </desc_annotation><desc_addname xml:space="preserve">swift.common.middleware.proxy_logging.</desc_addname><desc_name xml:space="preserve">ProxyLoggingMiddleware</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">app</desc_parameter><desc_parameter xml:space="preserve">conf</desc_parameter><desc_parameter xml:space="preserve">logger=None</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">object</literal></paragraph>
                    <paragraph>Middleware that logs Swift proxy requests in the swift log format.</paragraph>
                    <index entries="['single',\ u'log_request()\ (swift.common.middleware.proxy_logging.ProxyLoggingMiddleware\ method)',\ u'swift.common.middleware.proxy_logging.ProxyLoggingMiddleware.log_request',\ '',\ None]"></index>
                    <desc desctype="method" domain="py" noindex="False" objtype="method">
                        <desc_signature class="ProxyLoggingMiddleware" first="False" fullname="ProxyLoggingMiddleware.log_request" ids="swift.common.middleware.proxy_logging.ProxyLoggingMiddleware.log_request" module="swift.common.middleware.proxy_logging" names="swift.common.middleware.proxy_logging.ProxyLoggingMiddleware.log_request"><desc_name xml:space="preserve">log_request</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">req</desc_parameter><desc_parameter xml:space="preserve">status_int</desc_parameter><desc_parameter xml:space="preserve">bytes_received</desc_parameter><desc_parameter xml:space="preserve">bytes_sent</desc_parameter><desc_parameter xml:space="preserve">start_time</desc_parameter><desc_parameter xml:space="preserve">end_time</desc_parameter><desc_parameter xml:space="preserve">resp_headers=None</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Log a request.</paragraph>
                            <field_list>
                                <field>
                                    <field_name>Parameters</field_name>
                                    <field_body>
                                        <bullet_list>
                                            <list_item>
                                                <paragraph><literal_strong refspecific="True">req</literal_strong> – swob.Request object for the request</paragraph>
                                            </list_item>
                                            <list_item>
                                                <paragraph><literal_strong refspecific="True">status_int</literal_strong> – integer code for the response status</paragraph>
                                            </list_item>
                                            <list_item>
                                                <paragraph><literal_strong refspecific="True">bytes_received</literal_strong> – bytes successfully read from the request body</paragraph>
                                            </list_item>
                                            <list_item>
                                                <paragraph><literal_strong refspecific="True">bytes_sent</literal_strong> – bytes yielded to the WSGI server</paragraph>
                                            </list_item>
                                            <list_item>
                                                <paragraph><literal_strong refspecific="True">start_time</literal_strong> – timestamp request started</paragraph>
                                            </list_item>
                                            <list_item>
                                                <paragraph><literal_strong refspecific="True">end_time</literal_strong> – timestamp request completed</paragraph>
                                            </list_item>
                                            <list_item>
                                                <paragraph><literal_strong refspecific="True">resp_headers</literal_strong> – dict of the response headers</paragraph>
                                            </list_item>
                                        </bullet_list>
                                    </field_body>
                                </field>
                            </field_list>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
        </section>
        <section ids="module-swift.common.middleware.ratelimit ratelimit" names="ratelimit">
            <title>Ratelimit</title>
            <index entries="['single',\ u'swift.common.middleware.ratelimit\ (module)',\ u'module-swift.common.middleware.ratelimit',\ '',\ None]"></index>
            <index entries="['single',\ u'RateLimitMiddleware\ (class\ in\ swift.common.middleware.ratelimit)',\ u'swift.common.middleware.ratelimit.RateLimitMiddleware',\ '',\ None]"></index>
            <desc desctype="class" domain="py" noindex="False" objtype="class">
                <desc_signature class="" first="False" fullname="RateLimitMiddleware" ids="swift.common.middleware.ratelimit.RateLimitMiddleware" module="swift.common.middleware.ratelimit" names="swift.common.middleware.ratelimit.RateLimitMiddleware"><desc_annotation xml:space="preserve">class </desc_annotation><desc_addname xml:space="preserve">swift.common.middleware.ratelimit.</desc_addname><desc_name xml:space="preserve">RateLimitMiddleware</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">app</desc_parameter><desc_parameter xml:space="preserve">conf</desc_parameter><desc_parameter xml:space="preserve">logger=None</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">object</literal></paragraph>
                    <paragraph>Rate limiting middleware</paragraph>
                    <paragraph>Rate limits requests on both an Account and Container level.  Limits are
                        configurable.</paragraph>
                    <index entries="['single',\ u'get_ratelimitable_key_tuples()\ (swift.common.middleware.ratelimit.RateLimitMiddleware\ method)',\ u'swift.common.middleware.ratelimit.RateLimitMiddleware.get_ratelimitable_key_tuples',\ '',\ None]"></index>
                    <desc desctype="method" domain="py" noindex="False" objtype="method">
                        <desc_signature class="RateLimitMiddleware" first="False" fullname="RateLimitMiddleware.get_ratelimitable_key_tuples" ids="swift.common.middleware.ratelimit.RateLimitMiddleware.get_ratelimitable_key_tuples" module="swift.common.middleware.ratelimit" names="swift.common.middleware.ratelimit.RateLimitMiddleware.get_ratelimitable_key_tuples"><desc_name xml:space="preserve">get_ratelimitable_key_tuples</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">req</desc_parameter><desc_parameter xml:space="preserve">account_name</desc_parameter><desc_parameter xml:space="preserve">container_name=None</desc_parameter><desc_parameter xml:space="preserve">obj_name=None</desc_parameter><desc_parameter xml:space="preserve">global_ratelimit=None</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Returns a list of key (used in memcache), ratelimit tuples. Keys
                                should be checked in order.</paragraph>
                            <field_list>
                                <field>
                                    <field_name>Parameters</field_name>
                                    <field_body>
                                        <bullet_list>
                                            <list_item>
                                                <paragraph><literal_strong refspecific="True">req</literal_strong> – swob request</paragraph>
                                            </list_item>
                                            <list_item>
                                                <paragraph><literal_strong refspecific="True">account_name</literal_strong> – account name from path</paragraph>
                                            </list_item>
                                            <list_item>
                                                <paragraph><literal_strong refspecific="True">container_name</literal_strong> – container name from path</paragraph>
                                            </list_item>
                                            <list_item>
                                                <paragraph><literal_strong refspecific="True">obj_name</literal_strong> – object name from path</paragraph>
                                            </list_item>
                                            <list_item>
                                                <paragraph><literal_strong refspecific="True">global_ratelimit</literal_strong> – this account has an account wide
                                                    ratelimit on all writes combined</paragraph>
                                            </list_item>
                                        </bullet_list>
                                    </field_body>
                                </field>
                            </field_list>
                        </desc_content>
                    </desc>
                    <index entries="['single',\ u'handle_ratelimit()\ (swift.common.middleware.ratelimit.RateLimitMiddleware\ method)',\ u'swift.common.middleware.ratelimit.RateLimitMiddleware.handle_ratelimit',\ '',\ None]"></index>
                    <desc desctype="method" domain="py" noindex="False" objtype="method">
                        <desc_signature class="RateLimitMiddleware" first="False" fullname="RateLimitMiddleware.handle_ratelimit" ids="swift.common.middleware.ratelimit.RateLimitMiddleware.handle_ratelimit" module="swift.common.middleware.ratelimit" names="swift.common.middleware.ratelimit.RateLimitMiddleware.handle_ratelimit"><desc_name xml:space="preserve">handle_ratelimit</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">req</desc_parameter><desc_parameter xml:space="preserve">account_name</desc_parameter><desc_parameter xml:space="preserve">container_name</desc_parameter><desc_parameter xml:space="preserve">obj_name</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>Performs rate limiting and account white/black listing.  Sleeps
                                if necessary. If self.memcache_client is not set, immediately returns
                                None.</paragraph>
                            <field_list>
                                <field>
                                    <field_name>Parameters</field_name>
                                    <field_body>
                                        <bullet_list>
                                            <list_item>
                                                <paragraph><literal_strong refspecific="True">account_name</literal_strong> – account name from path</paragraph>
                                            </list_item>
                                            <list_item>
                                                <paragraph><literal_strong refspecific="True">container_name</literal_strong> – container name from path</paragraph>
                                            </list_item>
                                            <list_item>
                                                <paragraph><literal_strong refspecific="True">obj_name</literal_strong> – object name from path</paragraph>
                                            </list_item>
                                        </bullet_list>
                                    </field_body>
                                </field>
                            </field_list>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
            <index entries="['single',\ u'filter_factory()\ (in\ module\ swift.common.middleware.ratelimit)',\ u'swift.common.middleware.ratelimit.filter_factory',\ '',\ None]"></index>
            <desc desctype="function" domain="py" noindex="False" objtype="function">
                <desc_signature class="" first="False" fullname="filter_factory" ids="swift.common.middleware.ratelimit.filter_factory" module="swift.common.middleware.ratelimit" names="swift.common.middleware.ratelimit.filter_factory"><desc_addname xml:space="preserve">swift.common.middleware.ratelimit.</desc_addname><desc_name xml:space="preserve">filter_factory</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">global_conf</desc_parameter><desc_parameter xml:space="preserve">**local_conf</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>paste.deploy app factory for creating WSGI proxy apps.</paragraph>
                </desc_content>
            </desc>
            <index entries="['single',\ u'get_maxrate()\ (in\ module\ swift.common.middleware.ratelimit)',\ u'swift.common.middleware.ratelimit.get_maxrate',\ '',\ None]"></index>
            <desc desctype="function" domain="py" noindex="False" objtype="function">
                <desc_signature class="" first="False" fullname="get_maxrate" ids="swift.common.middleware.ratelimit.get_maxrate" module="swift.common.middleware.ratelimit" names="swift.common.middleware.ratelimit.get_maxrate"><desc_addname xml:space="preserve">swift.common.middleware.ratelimit.</desc_addname><desc_name xml:space="preserve">get_maxrate</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">ratelimits</desc_parameter><desc_parameter xml:space="preserve">size</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Returns number of requests allowed per second for given size.</paragraph>
                </desc_content>
            </desc>
            <index entries="['single',\ u'interpret_conf_limits()\ (in\ module\ swift.common.middleware.ratelimit)',\ u'swift.common.middleware.ratelimit.interpret_conf_limits',\ '',\ None]"></index>
            <desc desctype="function" domain="py" noindex="False" objtype="function">
                <desc_signature class="" first="False" fullname="interpret_conf_limits" ids="swift.common.middleware.ratelimit.interpret_conf_limits" module="swift.common.middleware.ratelimit" names="swift.common.middleware.ratelimit.interpret_conf_limits"><desc_addname xml:space="preserve">swift.common.middleware.ratelimit.</desc_addname><desc_name xml:space="preserve">interpret_conf_limits</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">conf</desc_parameter><desc_parameter xml:space="preserve">name_prefix</desc_parameter><desc_parameter xml:space="preserve">info=None</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Parses general parms for rate limits looking for things that
                        start with the provided name_prefix within the provided conf
                        and returns lists for both internal use and for /info</paragraph>
                    <field_list>
                        <field>
                            <field_name>Parameters</field_name>
                            <field_body>
                                <bullet_list>
                                    <list_item>
                                        <paragraph><literal_strong refspecific="True">conf</literal_strong> – conf dict to parse</paragraph>
                                    </list_item>
                                    <list_item>
                                        <paragraph><literal_strong refspecific="True">name_prefix</literal_strong> – prefix of config parms to look for</paragraph>
                                    </list_item>
                                    <list_item>
                                        <paragraph><literal_strong refspecific="True">info</literal_strong> – set to return extra stuff for /info registration</paragraph>
                                    </list_item>
                                </bullet_list>
                            </field_body>
                        </field>
                    </field_list>
                </desc_content>
            </desc>
            <target refid="recon"></target>
        </section>
        <section dupnames="recon" ids="recon id10" names="recon">
            <title>Recon</title>
            <target ids="module-swift.common.middleware.recon" ismod="True"></target>
            <index entries="['single',\ u'swift.common.middleware.recon\ (module)',\ u'module-swift.common.middleware.recon',\ '',\ None]"></index>
            <index entries="['single',\ u'ReconMiddleware\ (class\ in\ swift.common.middleware.recon)',\ u'swift.common.middleware.recon.ReconMiddleware',\ '',\ None]"></index>
            <desc desctype="class" domain="py" noindex="False" objtype="class">
                <desc_signature class="" first="False" fullname="ReconMiddleware" ids="swift.common.middleware.recon.ReconMiddleware" module="swift.common.middleware.recon" names="swift.common.middleware.recon.ReconMiddleware"><desc_annotation xml:space="preserve">class </desc_annotation><desc_addname xml:space="preserve">swift.common.middleware.recon.</desc_addname><desc_name xml:space="preserve">ReconMiddleware</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">app</desc_parameter><desc_parameter xml:space="preserve">conf</desc_parameter><desc_parameter xml:space="preserve">*args</desc_parameter><desc_parameter xml:space="preserve">**kwargs</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">object</literal></paragraph>
                    <paragraph>Recon middleware used for monitoring.</paragraph>
                    <paragraph>/recon/load|mem|async… will return various system metrics.</paragraph>
                    <paragraph>Needs to be added to the pipeline and requires a filter
                        declaration in the object-server.conf:</paragraph>
                    <paragraph>[filter:recon]
                        use = egg:swift#recon
                        recon_cache_path = /var/cache/swift</paragraph>
                    <index entries="['single',\ u'get_async_info()\ (swift.common.middleware.recon.ReconMiddleware\ method)',\ u'swift.common.middleware.recon.ReconMiddleware.get_async_info',\ '',\ None]"></index>
                    <desc desctype="method" domain="py" noindex="False" objtype="method">
                        <desc_signature class="ReconMiddleware" first="False" fullname="ReconMiddleware.get_async_info" ids="swift.common.middleware.recon.ReconMiddleware.get_async_info" module="swift.common.middleware.recon" names="swift.common.middleware.recon.ReconMiddleware.get_async_info"><desc_name xml:space="preserve">get_async_info</desc_name><desc_parameterlist xml:space="preserve"></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>get # of async pendings</paragraph>
                        </desc_content>
                    </desc>
                    <index entries="['single',\ u'get_auditor_info()\ (swift.common.middleware.recon.ReconMiddleware\ method)',\ u'swift.common.middleware.recon.ReconMiddleware.get_auditor_info',\ '',\ None]"></index>
                    <desc desctype="method" domain="py" noindex="False" objtype="method">
                        <desc_signature class="ReconMiddleware" first="False" fullname="ReconMiddleware.get_auditor_info" ids="swift.common.middleware.recon.ReconMiddleware.get_auditor_info" module="swift.common.middleware.recon" names="swift.common.middleware.recon.ReconMiddleware.get_auditor_info"><desc_name xml:space="preserve">get_auditor_info</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">recon_type</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>get auditor info</paragraph>
                        </desc_content>
                    </desc>
                    <index entries="['single',\ u'get_device_info()\ (swift.common.middleware.recon.ReconMiddleware\ method)',\ u'swift.common.middleware.recon.ReconMiddleware.get_device_info',\ '',\ None]"></index>
                    <desc desctype="method" domain="py" noindex="False" objtype="method">
                        <desc_signature class="ReconMiddleware" first="False" fullname="ReconMiddleware.get_device_info" ids="swift.common.middleware.recon.ReconMiddleware.get_device_info" module="swift.common.middleware.recon" names="swift.common.middleware.recon.ReconMiddleware.get_device_info"><desc_name xml:space="preserve">get_device_info</desc_name><desc_parameterlist xml:space="preserve"></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>get devices</paragraph>
                        </desc_content>
                    </desc>
                    <index entries="['single',\ u'get_diskusage()\ (swift.common.middleware.recon.ReconMiddleware\ method)',\ u'swift.common.middleware.recon.ReconMiddleware.get_diskusage',\ '',\ None]"></index>
                    <desc desctype="method" domain="py" noindex="False" objtype="method">
                        <desc_signature class="ReconMiddleware" first="False" fullname="ReconMiddleware.get_diskusage" ids="swift.common.middleware.recon.ReconMiddleware.get_diskusage" module="swift.common.middleware.recon" names="swift.common.middleware.recon.ReconMiddleware.get_diskusage"><desc_name xml:space="preserve">get_diskusage</desc_name><desc_parameterlist xml:space="preserve"></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>get disk utilization statistics</paragraph>
                        </desc_content>
                    </desc>
                    <index entries="['single',\ u'get_driveaudit_error()\ (swift.common.middleware.recon.ReconMiddleware\ method)',\ u'swift.common.middleware.recon.ReconMiddleware.get_driveaudit_error',\ '',\ None]"></index>
                    <desc desctype="method" domain="py" noindex="False" objtype="method">
                        <desc_signature class="ReconMiddleware" first="False" fullname="ReconMiddleware.get_driveaudit_error" ids="swift.common.middleware.recon.ReconMiddleware.get_driveaudit_error" module="swift.common.middleware.recon" names="swift.common.middleware.recon.ReconMiddleware.get_driveaudit_error"><desc_name xml:space="preserve">get_driveaudit_error</desc_name><desc_parameterlist xml:space="preserve"></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>get # of drive audit errors</paragraph>
                        </desc_content>
                    </desc>
                    <index entries="['single',\ u'get_expirer_info()\ (swift.common.middleware.recon.ReconMiddleware\ method)',\ u'swift.common.middleware.recon.ReconMiddleware.get_expirer_info',\ '',\ None]"></index>
                    <desc desctype="method" domain="py" noindex="False" objtype="method">
                        <desc_signature class="ReconMiddleware" first="False" fullname="ReconMiddleware.get_expirer_info" ids="swift.common.middleware.recon.ReconMiddleware.get_expirer_info" module="swift.common.middleware.recon" names="swift.common.middleware.recon.ReconMiddleware.get_expirer_info"><desc_name xml:space="preserve">get_expirer_info</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">recon_type</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>get expirer info</paragraph>
                        </desc_content>
                    </desc>
                    <index entries="['single',\ u'get_load()\ (swift.common.middleware.recon.ReconMiddleware\ method)',\ u'swift.common.middleware.recon.ReconMiddleware.get_load',\ '',\ None]"></index>
                    <desc desctype="method" domain="py" noindex="False" objtype="method">
                        <desc_signature class="ReconMiddleware" first="False" fullname="ReconMiddleware.get_load" ids="swift.common.middleware.recon.ReconMiddleware.get_load" module="swift.common.middleware.recon" names="swift.common.middleware.recon.ReconMiddleware.get_load"><desc_name xml:space="preserve">get_load</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">openr=&lt;built-in function open&gt;</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>get info from /proc/loadavg</paragraph>
                        </desc_content>
                    </desc>
                    <index entries="['single',\ u'get_mem()\ (swift.common.middleware.recon.ReconMiddleware\ method)',\ u'swift.common.middleware.recon.ReconMiddleware.get_mem',\ '',\ None]"></index>
                    <desc desctype="method" domain="py" noindex="False" objtype="method">
                        <desc_signature class="ReconMiddleware" first="False" fullname="ReconMiddleware.get_mem" ids="swift.common.middleware.recon.ReconMiddleware.get_mem" module="swift.common.middleware.recon" names="swift.common.middleware.recon.ReconMiddleware.get_mem"><desc_name xml:space="preserve">get_mem</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">openr=&lt;built-in function open&gt;</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>get info from /proc/meminfo</paragraph>
                        </desc_content>
                    </desc>
                    <index entries="['single',\ u'get_mounted()\ (swift.common.middleware.recon.ReconMiddleware\ method)',\ u'swift.common.middleware.recon.ReconMiddleware.get_mounted',\ '',\ None]"></index>
                    <desc desctype="method" domain="py" noindex="False" objtype="method">
                        <desc_signature class="ReconMiddleware" first="False" fullname="ReconMiddleware.get_mounted" ids="swift.common.middleware.recon.ReconMiddleware.get_mounted" module="swift.common.middleware.recon" names="swift.common.middleware.recon.ReconMiddleware.get_mounted"><desc_name xml:space="preserve">get_mounted</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">openr=&lt;built-in function open&gt;</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>get ALL mounted fs from /proc/mounts</paragraph>
                        </desc_content>
                    </desc>
                    <index entries="['single',\ u'get_quarantine_count()\ (swift.common.middleware.recon.ReconMiddleware\ method)',\ u'swift.common.middleware.recon.ReconMiddleware.get_quarantine_count',\ '',\ None]"></index>
                    <desc desctype="method" domain="py" noindex="False" objtype="method">
                        <desc_signature class="ReconMiddleware" first="False" fullname="ReconMiddleware.get_quarantine_count" ids="swift.common.middleware.recon.ReconMiddleware.get_quarantine_count" module="swift.common.middleware.recon" names="swift.common.middleware.recon.ReconMiddleware.get_quarantine_count"><desc_name xml:space="preserve">get_quarantine_count</desc_name><desc_parameterlist xml:space="preserve"></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>get obj/container/account quarantine counts</paragraph>
                        </desc_content>
                    </desc>
                    <index entries="['single',\ u'get_replication_info()\ (swift.common.middleware.recon.ReconMiddleware\ method)',\ u'swift.common.middleware.recon.ReconMiddleware.get_replication_info',\ '',\ None]"></index>
                    <desc desctype="method" domain="py" noindex="False" objtype="method">
                        <desc_signature class="ReconMiddleware" first="False" fullname="ReconMiddleware.get_replication_info" ids="swift.common.middleware.recon.ReconMiddleware.get_replication_info" module="swift.common.middleware.recon" names="swift.common.middleware.recon.ReconMiddleware.get_replication_info"><desc_name xml:space="preserve">get_replication_info</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">recon_type</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>get replication info</paragraph>
                        </desc_content>
                    </desc>
                    <index entries="['single',\ u'get_ring_md5()\ (swift.common.middleware.recon.ReconMiddleware\ method)',\ u'swift.common.middleware.recon.ReconMiddleware.get_ring_md5',\ '',\ None]"></index>
                    <desc desctype="method" domain="py" noindex="False" objtype="method">
                        <desc_signature class="ReconMiddleware" first="False" fullname="ReconMiddleware.get_ring_md5" ids="swift.common.middleware.recon.ReconMiddleware.get_ring_md5" module="swift.common.middleware.recon" names="swift.common.middleware.recon.ReconMiddleware.get_ring_md5"><desc_name xml:space="preserve">get_ring_md5</desc_name><desc_parameterlist xml:space="preserve"></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>get all ring md5sum’s</paragraph>
                        </desc_content>
                    </desc>
                    <index entries="['single',\ u'get_socket_info()\ (swift.common.middleware.recon.ReconMiddleware\ method)',\ u'swift.common.middleware.recon.ReconMiddleware.get_socket_info',\ '',\ None]"></index>
                    <desc desctype="method" domain="py" noindex="False" objtype="method">
                        <desc_signature class="ReconMiddleware" first="False" fullname="ReconMiddleware.get_socket_info" ids="swift.common.middleware.recon.ReconMiddleware.get_socket_info" module="swift.common.middleware.recon" names="swift.common.middleware.recon.ReconMiddleware.get_socket_info"><desc_name xml:space="preserve">get_socket_info</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">openr=&lt;built-in function open&gt;</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>get info from /proc/net/sockstat and sockstat6</paragraph>
                            <paragraph>Note: The mem value is actually kernel pages, but we return bytes
                                allocated based on the systems page size.</paragraph>
                        </desc_content>
                    </desc>
                    <index entries="['single',\ u'get_swift_conf_md5()\ (swift.common.middleware.recon.ReconMiddleware\ method)',\ u'swift.common.middleware.recon.ReconMiddleware.get_swift_conf_md5',\ '',\ None]"></index>
                    <desc desctype="method" domain="py" noindex="False" objtype="method">
                        <desc_signature class="ReconMiddleware" first="False" fullname="ReconMiddleware.get_swift_conf_md5" ids="swift.common.middleware.recon.ReconMiddleware.get_swift_conf_md5" module="swift.common.middleware.recon" names="swift.common.middleware.recon.ReconMiddleware.get_swift_conf_md5"><desc_name xml:space="preserve">get_swift_conf_md5</desc_name><desc_parameterlist xml:space="preserve"></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>get md5 of swift.conf</paragraph>
                        </desc_content>
                    </desc>
                    <index entries="['single',\ u'get_time()\ (swift.common.middleware.recon.ReconMiddleware\ method)',\ u'swift.common.middleware.recon.ReconMiddleware.get_time',\ '',\ None]"></index>
                    <desc desctype="method" domain="py" noindex="False" objtype="method">
                        <desc_signature class="ReconMiddleware" first="False" fullname="ReconMiddleware.get_time" ids="swift.common.middleware.recon.ReconMiddleware.get_time" module="swift.common.middleware.recon" names="swift.common.middleware.recon.ReconMiddleware.get_time"><desc_name xml:space="preserve">get_time</desc_name><desc_parameterlist xml:space="preserve"></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>get current time</paragraph>
                        </desc_content>
                    </desc>
                    <index entries="['single',\ u'get_unmounted()\ (swift.common.middleware.recon.ReconMiddleware\ method)',\ u'swift.common.middleware.recon.ReconMiddleware.get_unmounted',\ '',\ None]"></index>
                    <desc desctype="method" domain="py" noindex="False" objtype="method">
                        <desc_signature class="ReconMiddleware" first="False" fullname="ReconMiddleware.get_unmounted" ids="swift.common.middleware.recon.ReconMiddleware.get_unmounted" module="swift.common.middleware.recon" names="swift.common.middleware.recon.ReconMiddleware.get_unmounted"><desc_name xml:space="preserve">get_unmounted</desc_name><desc_parameterlist xml:space="preserve"></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>list unmounted (failed?) devices</paragraph>
                        </desc_content>
                    </desc>
                    <index entries="['single',\ u'get_updater_info()\ (swift.common.middleware.recon.ReconMiddleware\ method)',\ u'swift.common.middleware.recon.ReconMiddleware.get_updater_info',\ '',\ None]"></index>
                    <desc desctype="method" domain="py" noindex="False" objtype="method">
                        <desc_signature class="ReconMiddleware" first="False" fullname="ReconMiddleware.get_updater_info" ids="swift.common.middleware.recon.ReconMiddleware.get_updater_info" module="swift.common.middleware.recon" names="swift.common.middleware.recon.ReconMiddleware.get_updater_info"><desc_name xml:space="preserve">get_updater_info</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">recon_type</desc_parameter></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>get updater info</paragraph>
                        </desc_content>
                    </desc>
                    <index entries="['single',\ u'get_version()\ (swift.common.middleware.recon.ReconMiddleware\ method)',\ u'swift.common.middleware.recon.ReconMiddleware.get_version',\ '',\ None]"></index>
                    <desc desctype="method" domain="py" noindex="False" objtype="method">
                        <desc_signature class="ReconMiddleware" first="False" fullname="ReconMiddleware.get_version" ids="swift.common.middleware.recon.ReconMiddleware.get_version" module="swift.common.middleware.recon" names="swift.common.middleware.recon.ReconMiddleware.get_version"><desc_name xml:space="preserve">get_version</desc_name><desc_parameterlist xml:space="preserve"></desc_parameterlist></desc_signature>
                        <desc_content>
                            <paragraph>get swift version</paragraph>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
            <target refid="copy"></target>
        </section>
        <section ids="module-swift.common.middleware.copy server-side-copy copy" names="server\ side\ copy copy">
            <title>Server Side Copy</title>
            <index entries="['single',\ u'swift.common.middleware.copy\ (module)',\ u'module-swift.common.middleware.copy',\ '',\ None]"></index>
            <paragraph>Server side copy is a feature that enables users/clients to COPY objects
                between accounts and containers without the need to download and then
                re-upload objects, thus eliminating additional bandwidth consumption and
                also saving time. This may be used when renaming/moving an object which
                in Swift is a (COPY + DELETE) operation.</paragraph>
            <paragraph>The server side copy middleware should be inserted in the pipeline after auth
                and before the quotas and large object middlewares. If it is not present in the
                pipeline in the proxy-server configuration file, it will be inserted
                automatically. There is no configurable option provided to turn off server
                side copy.</paragraph>
            <section ids="metadata" names="metadata">
                <title>Metadata</title>
                <bullet_list bullet="*">
                    <list_item>
                        <paragraph>All metadata of source object is preserved during object copy.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>One can also provide additional metadata during PUT/COPY request. This will
                            over-write any existing conflicting keys.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Server side copy can also be used to change content-type of an existing
                            object.</paragraph>
                    </list_item>
                </bullet_list>
            </section>
            <section ids="object-copy" names="object\ copy">
                <title>Object Copy</title>
                <bullet_list bullet="*">
                    <list_item>
                        <paragraph>The destination container must exist before requesting copy of the object.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>When several replicas exist, the system copies from the most recent replica.
                            That is, the copy operation behaves as though the X-Newest header is in the
                            request.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>The request to copy an object should have no body (i.e. content-length of the
                            request must be zero).</paragraph>
                    </list_item>
                </bullet_list>
                <paragraph>There are two ways in which an object can be copied:</paragraph>
                <enumerated_list enumtype="arabic" prefix="" suffix=".">
                    <list_item>
                        <paragraph>Send a PUT request to the new object (destination/target) with an additional
                            header named <literal>X-Copy-From</literal> specifying the source object
                            (in ‘/container/object’ format). Example:</paragraph>
                        <literal_block xml:space="preserve">curl -i -X PUT http://&lt;storage_url&gt;/container1/destination_obj
 -H 'X-Auth-Token: &lt;token&gt;'
 -H 'X-Copy-From: /container2/source_obj'
 -H 'Content-Length: 0'</literal_block>
                    </list_item>
                    <list_item>
                        <paragraph>Send a COPY request with an existing object in URL with an additional header
                            named <literal>Destination</literal> specifying the destination/target object
                            (in ‘/container/object’ format). Example:</paragraph>
                        <literal_block xml:space="preserve">curl -i -X COPY http://&lt;storage_url&gt;/container2/source_obj
 -H 'X-Auth-Token: &lt;token&gt;'
 -H 'Destination: /container1/destination_obj'
 -H 'Content-Length: 0'</literal_block>
                    </list_item>
                </enumerated_list>
                <paragraph>Note that if the incoming request has some conditional headers (e.g. <literal>Range</literal>,
                    <literal>If-Match</literal>), the <emphasis>source</emphasis> object will be evaluated for these headers (i.e. if
                    PUT with both <literal>X-Copy-From</literal> and <literal>Range</literal>, Swift will make a partial copy to
                    the destination object).</paragraph>
            </section>
            <section ids="cross-account-object-copy" names="cross\ account\ object\ copy">
                <title>Cross Account Object Copy</title>
                <paragraph>Objects can also be copied from one account to another account if the user
                    has the necessary permissions (i.e. permission to read from container
                    in source account and permission to write to container in destination account).</paragraph>
                <paragraph>Similar to examples mentioned above, there are two ways to copy objects across
                    accounts:</paragraph>
                <enumerated_list enumtype="arabic" prefix="" suffix=".">
                    <list_item>
                        <paragraph>Like the example above, send PUT request to copy object but with an
                            additional header named <literal>X-Copy-From-Account</literal> specifying the source
                            account. Example:</paragraph>
                        <literal_block xml:space="preserve">curl -i -X PUT http://&lt;host&gt;:&lt;port&gt;/v1/AUTH_test1/container/destination_obj
 -H 'X-Auth-Token: &lt;token&gt;'
 -H 'X-Copy-From: /container/source_obj'
 -H 'X-Copy-From-Account: AUTH_test2'
 -H 'Content-Length: 0'</literal_block>
                    </list_item>
                    <list_item>
                        <paragraph>Like the previous example, send a COPY request but with an additional header
                            named <literal>Destination-Account</literal> specifying the name of destination account.
                            Example:</paragraph>
                        <literal_block xml:space="preserve">curl -i -X COPY http://&lt;host&gt;:&lt;port&gt;/v1/AUTH_test2/container/source_obj
 -H 'X-Auth-Token: &lt;token&gt;'
 -H 'Destination: /container/destination_obj'
 -H 'Destination-Account: AUTH_test1'
 -H 'Content-Length: 0'</literal_block>
                    </list_item>
                </enumerated_list>
            </section>
            <section ids="large-object-copy" names="large\ object\ copy">
                <title>Large Object Copy</title>
                <paragraph>The best option to copy a large object is to copy segments individually.
                    To copy the manifest object of a large object, add the query parameter to
                    the copy request:</paragraph>
                <literal_block xml:space="preserve">?multipart-manifest=get</literal_block>
                <paragraph>If a request is sent without the query parameter, an attempt will be made to
                    copy the whole object but will fail if the object size is
                    greater than 5GB.</paragraph>
            </section>
            <section ids="object-post-as-copy" names="object\ post\ as\ copy">
                <title>Object Post as Copy</title>
                <paragraph>Historically, this has been a feature (and a configurable option with default
                    set to True) in proxy server configuration. This has been moved to server side
                    copy middleware and the default changed to False.</paragraph>
                <paragraph>When <literal>object_post_as_copy</literal> is set to <literal>true</literal>, an incoming POST request is
                    morphed into a COPY request where source and destination objects are same.</paragraph>
                <paragraph>This feature was necessary because of a previous behavior where POSTS would
                    update the metadata on the object but not on the container. As a result,
                    features like container sync would not work correctly. This is no longer the
                    case and this option is now deprecated. It will be removed in a future release.</paragraph>
            </section>
        </section>
        <section ids="static-large-objects" names="static\ large\ objects">
            <title>Static Large Objects</title>
            <paragraph>Please see
                the SLO docs for <reference internal="True" refuri="overview_large_objects#slo-doc"><inline classes="std std-ref">Static Large Objects</inline></reference> further details.</paragraph>
            <target refid="staticweb"></target>
        </section>
        <section dupnames="staticweb" ids="staticweb id11" names="staticweb">
            <title>StaticWeb</title>
            <target ids="module-swift.common.middleware.staticweb" ismod="True"></target>
            <index entries="['single',\ u'swift.common.middleware.staticweb\ (module)',\ u'module-swift.common.middleware.staticweb',\ '',\ None]"></index>
            <paragraph>This StaticWeb WSGI middleware will serve container data as a static web site
                with index file and error file resolution and optional file listings. This mode
                is normally only active for anonymous requests. When using keystone for
                authentication set <literal>delay_auth_decision = true</literal> in the authtoken middleware
                configuration in your <literal>/etc/swift/proxy-server.conf</literal> file.  If you want to
                use it with authenticated requests, set the <literal>X-Web-Mode: true</literal> header on the
                request.</paragraph>
            <paragraph>The <literal>staticweb</literal> filter should be added to the pipeline in your
                <literal>/etc/swift/proxy-server.conf</literal> file just after any auth middleware. Also, the
                configuration section for the <literal>staticweb</literal> middleware itself needs to be
                added. For example:</paragraph>
            <literal_block xml:space="preserve">[DEFAULT]
...

[pipeline:main]
pipeline = catch_errors healthcheck proxy-logging cache ratelimit tempauth
           staticweb proxy-logging proxy-server

...

[filter:staticweb]
use = egg:swift#staticweb</literal_block>
            <paragraph>Any publicly readable containers (for example, <literal>X-Container-Read: .r:*</literal>, see
                <reference internal="True" refuri="misc#acls"><inline classes="std std-ref">ACLs</inline></reference> for more information on this) will be checked for
                X-Container-Meta-Web-Index and X-Container-Meta-Web-Error header values:</paragraph>
            <literal_block xml:space="preserve">X-Container-Meta-Web-Index  &lt;index.name&gt;
X-Container-Meta-Web-Error  &lt;error.name.suffix&gt;</literal_block>
            <paragraph>If X-Container-Meta-Web-Index is set, any &lt;index.name&gt; files will be served
                without having to specify the &lt;index.name&gt; part. For instance, setting
                <literal>X-Container-Meta-Web-Index: index.html</literal> will be able to serve the object
                …/pseudo/path/index.html with just …/pseudo/path or …/pseudo/path/</paragraph>
            <paragraph>If X-Container-Meta-Web-Error is set, any errors (currently just 401
                Unauthorized and 404 Not Found) will instead serve the
                …/&lt;status.code&gt;&lt;error.name.suffix&gt; object. For instance, setting
                <literal>X-Container-Meta-Web-Error: error.html</literal> will serve …/404error.html for
                requests for paths not found.</paragraph>
            <paragraph>For pseudo paths that have no &lt;index.name&gt;, this middleware can serve HTML file
                listings if you set the <literal>X-Container-Meta-Web-Listings: true</literal> metadata item
                on the container.</paragraph>
            <paragraph>If listings are enabled, the listings can have a custom style sheet by setting
                the X-Container-Meta-Web-Listings-CSS header. For instance, setting
                <literal>X-Container-Meta-Web-Listings-CSS: listing.css</literal> will make listings link to
                the …/listing.css style sheet. If you “view source” in your browser on a
                listing page, you will see the well defined document structure that can be
                styled.</paragraph>
            <paragraph>By default, the listings will be rendered with a label of
                “Listing of /v1/account/container/path”.  This can be altered by
                setting a <literal>X-Container-Meta-Web-Listings-Label: &lt;label&gt;</literal>.  For example,
                if the label is set to “example.com”, a label of
                “Listing of example.com/path” will be used instead.</paragraph>
            <paragraph>The content-type of directory marker objects can be modified by setting
                the <literal>X-Container-Meta-Web-Directory-Type</literal> header.  If the header is not set,
                application/directory is used by default.  Directory marker objects are
                0-byte objects that represent directories to create a simulated hierarchical
                structure.</paragraph>
            <paragraph>Example usage of this middleware via <literal>swift</literal>:</paragraph>
            <block_quote>
                <paragraph>Make the container publicly readable:</paragraph>
                <literal_block xml:space="preserve">swift post -r '.r:*' container</literal_block>
                <paragraph>You should be able to get objects directly, but no index.html resolution or
                    listings.</paragraph>
                <paragraph>Set an index file directive:</paragraph>
                <literal_block xml:space="preserve">swift post -m 'web-index:index.html' container</literal_block>
                <paragraph>You should be able to hit paths that have an index.html without needing to
                    type the index.html part.</paragraph>
                <paragraph>Turn on listings:</paragraph>
                <literal_block xml:space="preserve">swift post -r '.r:*,.rlistings' container
swift post -m 'web-listings: true' container</literal_block>
                <paragraph>Now you should see object listings for paths and pseudo paths that have no
                    index.html.</paragraph>
                <paragraph>Enable a custom listings style sheet:</paragraph>
                <literal_block xml:space="preserve">swift post -m 'web-listings-css:listings.css' container</literal_block>
                <paragraph>Set an error file:</paragraph>
                <literal_block xml:space="preserve">swift post -m 'web-error:error.html' container</literal_block>
                <paragraph>Now 401’s should load 401error.html, 404’s should load 404error.html, etc.</paragraph>
                <paragraph>Set Content-Type of directory marker object:</paragraph>
                <literal_block xml:space="preserve">swift post -m 'web-directory-type:text/directory' container</literal_block>
                <paragraph>Now 0-byte objects with a content-type of text/directory will be treated
                    as directories rather than objects.</paragraph>
            </block_quote>
            <index entries="['single',\ u'StaticWeb\ (class\ in\ swift.common.middleware.staticweb)',\ u'swift.common.middleware.staticweb.StaticWeb',\ '',\ None]"></index>
            <desc desctype="class" domain="py" noindex="False" objtype="class">
                <desc_signature class="" first="False" fullname="StaticWeb" ids="swift.common.middleware.staticweb.StaticWeb" module="swift.common.middleware.staticweb" names="swift.common.middleware.staticweb.StaticWeb"><desc_annotation xml:space="preserve">class </desc_annotation><desc_addname xml:space="preserve">swift.common.middleware.staticweb.</desc_addname><desc_name xml:space="preserve">StaticWeb</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">app</desc_parameter><desc_parameter xml:space="preserve">conf</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Bases: <literal classes="xref py py-class">object</literal></paragraph>
                    <paragraph>The Static Web WSGI middleware filter; serves container data as a static
                        web site. See <reference name="staticweb" refid="staticweb">staticweb</reference> for an overview.</paragraph>
                    <paragraph>The proxy logs created for any subrequests made will have swift.source set
                        to “SW”.</paragraph>
                    <field_list>
                        <field>
                            <field_name>Parameters</field_name>
                            <field_body>
                                <bullet_list>
                                    <list_item>
                                        <paragraph><literal_strong refspecific="True">app</literal_strong> – The next WSGI application/filter in the paste.deploy pipeline.</paragraph>
                                    </list_item>
                                    <list_item>
                                        <paragraph><literal_strong refspecific="True">conf</literal_strong> – The filter configuration dict.</paragraph>
                                    </list_item>
                                </bullet_list>
                            </field_body>
                        </field>
                    </field_list>
                    <index entries="['single',\ u'app\ (swift.common.middleware.staticweb.StaticWeb\ attribute)',\ u'swift.common.middleware.staticweb.StaticWeb.app',\ '',\ None]"></index>
                    <desc desctype="attribute" domain="py" noindex="False" objtype="attribute">
                        <desc_signature class="StaticWeb" first="False" fullname="StaticWeb.app" ids="swift.common.middleware.staticweb.StaticWeb.app" module="swift.common.middleware.staticweb" names="swift.common.middleware.staticweb.StaticWeb.app"><desc_name xml:space="preserve">app</desc_name><desc_annotation xml:space="preserve"> = None</desc_annotation></desc_signature>
                        <desc_content>
                            <paragraph>The next WSGI application/filter in the paste.deploy pipeline.</paragraph>
                        </desc_content>
                    </desc>
                    <index entries="['single',\ u'conf\ (swift.common.middleware.staticweb.StaticWeb\ attribute)',\ u'swift.common.middleware.staticweb.StaticWeb.conf',\ '',\ None]"></index>
                    <desc desctype="attribute" domain="py" noindex="False" objtype="attribute">
                        <desc_signature class="StaticWeb" first="False" fullname="StaticWeb.conf" ids="swift.common.middleware.staticweb.StaticWeb.conf" module="swift.common.middleware.staticweb" names="swift.common.middleware.staticweb.StaticWeb.conf"><desc_name xml:space="preserve">conf</desc_name><desc_annotation xml:space="preserve"> = None</desc_annotation></desc_signature>
                        <desc_content>
                            <paragraph>The filter configuration dict. Only used in tests.</paragraph>
                        </desc_content>
                    </desc>
                </desc_content>
            </desc>
            <index entries="['single',\ u'filter_factory()\ (in\ module\ swift.common.middleware.staticweb)',\ u'swift.common.middleware.staticweb.filter_factory',\ '',\ None]"></index>
            <desc desctype="function" domain="py" noindex="False" objtype="function">
                <desc_signature class="" first="False" fullname="filter_factory" ids="swift.common.middleware.staticweb.filter_factory" module="swift.common.middleware.staticweb" names="swift.common.middleware.staticweb.filter_factory"><desc_addname xml:space="preserve">swift.common.middleware.staticweb.</desc_addname><desc_name xml:space="preserve">filter_factory</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">global_conf</desc_parameter><desc_parameter xml:space="preserve">**local_conf</desc_parameter></desc_parameterlist></desc_signature>
                <desc_content>
                    <paragraph>Returns a Static Web WSGI filter for use with paste.deploy.</paragraph>
                </desc_content>
            </desc>
            <target refid="common-tempauth"></target>
        </section>
        <section ids="module-swift.common.middleware.tempauth tempauth common-tempauth" names="tempauth common_tempauth">
            <title>TempAuth</title>
            <index entries="['single',\ u'swift.common.middleware.tempauth\ (module)',\ u'module-swift.common.middleware.tempauth',\ '',\ None]"></index>
            <paragraph>Test authentication and authorization system.</paragraph>
            <paragraph>Add to your pipeline in proxy-server.conf, such as:</paragraph>
            <literal_block xml:space="preserve">[pipeline:main]
pipeline = catch_errors cache tempauth proxy-server</literal_block>
            <paragraph>Set account auto creation to true in proxy-server.conf:</paragraph>
            <literal_block xml:space="preserve">[app:proxy-server]
account_autocreate = true</literal_block>
            <paragraph>And add a tempauth filter section, such as:</paragraph>
            <literal_block xml:space="preserve">[filter:tempauth]
use = egg:swift#tempauth
user_admin_admin = admin .admin .reseller_admin
user_test_tester = testing .admin
user_test2_tester2 = testing2 .admin
user_test_tester3 = testing3
# To allow accounts/users with underscores you can base64 encode them.
# Here is the account "under_score" and username "a_b" (note the lack
# of padding equal signs):
user64_dW5kZXJfc2NvcmU_YV9i = testing4</literal_block>
            <paragraph>See the proxy-server.conf-sample for more information.</paragraph>
            <section ids="account-user-list" names="account/user\ list">
                <title>Account/User List</title>
                <paragraph>All accounts/users are listed in the filter section. The format is:</paragraph>
                <literal_block xml:space="preserve">user_&lt;account&gt;_&lt;user&gt; = &lt;key&gt; [group] [group] [...] [storage_url]</literal_block>
                <paragraph>If you want to be able to include underscores in the <literal>&lt;account&gt;</literal> or
                    <literal>&lt;user&gt;</literal> portions, you can base64 encode them (with <emphasis>no</emphasis> equal signs)
                    in a line like this:</paragraph>
                <literal_block xml:space="preserve">user64_&lt;account_b64&gt;_&lt;user_b64&gt; = &lt;key&gt; [group] [...] [storage_url]</literal_block>
                <paragraph>There are two special groups:</paragraph>
                <bullet_list bullet="*">
                    <list_item>
                        <paragraph><literal>.reseller_admin</literal> – can do anything to any account for this auth</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph><literal>.admin</literal> – can do anything within the account</paragraph>
                    </list_item>
                </bullet_list>
                <paragraph>If neither of these groups are specified, the user can only access
                    containers that have been explicitly allowed for them by a <literal>.admin</literal> or
                    <literal>.reseller_admin</literal>.</paragraph>
                <paragraph>The trailing optional <literal>storage_url</literal> allows you to specify an alternate
                    URL to hand back to the user upon authentication. If not specified, this
                    defaults to:</paragraph>
                <literal_block xml:space="preserve">$HOST/v1/&lt;reseller_prefix&gt;_&lt;account&gt;</literal_block>
                <paragraph>Where <literal>$HOST</literal> will do its best to resolve to what the requester would
                    need to use to reach this host, <literal>&lt;reseller_prefix&gt;</literal> is from this section,
                    and <literal>&lt;account&gt;</literal> is from the <literal>user_&lt;account&gt;_&lt;user&gt;</literal> name. Note that
                    <literal>$HOST</literal> cannot possibly handle when you have a load balancer in front of
                    it that does https while TempAuth itself runs with http; in such a case,
                    you’ll have to specify the  <literal>storage_url_scheme</literal> configuration value as
                    an override.</paragraph>
            </section>
            <section ids="multiple-reseller-prefix-items" names="multiple\ reseller\ prefix\ items">
                <title>Multiple Reseller Prefix Items</title>
                <paragraph>The reseller prefix specifies which parts of the account namespace this
                    middleware is responsible for managing authentication and authorization.
                    By default, the prefix is ‘AUTH’ so accounts and tokens are prefixed
                    by ‘AUTH_’. When a request’s token and/or path start with ‘AUTH_’, this
                    middleware knows it is responsible.</paragraph>
                <paragraph>We allow the reseller prefix to be a list. In tempauth, the first item
                    in the list is used as the prefix for tokens and user groups. The
                    other prefixes provide alternate accounts that user’s can access. For
                    example if the reseller prefix list is ‘AUTH, OTHER’, a user with
                    admin access to ‘AUTH_account’ also has admin access to
                    ‘OTHER_account’.</paragraph>
            </section>
            <section ids="required-group" names="required\ group">
                <title>Required Group</title>
                <paragraph>The group <literal>.admin</literal> is normally needed to access an account (ACLs provide
                    an additional way to access an account). You can specify the
                    <literal>require_group</literal> parameter. This means that you also need the named group
                    to access an account. If you have several reseller prefix items, prefix
                    the <literal>require_group</literal> parameter with the appropriate prefix.</paragraph>
            </section>
            <section ids="x-service-token" names="x-service-token">
                <title>X-Service-Token</title>
                <paragraph>If an <literal>X-Service-Token</literal> is presented in the request headers, the groups
                    derived from the token are appended to the roles derived from
                    <literal>X-Auth-Token</literal>. If <literal>X-Auth-Token</literal> is missing or invalid,
                    <literal>X-Service-Token</literal> is not processed.</paragraph>
                <paragraph>The <literal>X-Service-Token</literal> is useful when combined with multiple reseller
                    prefix items. In the following configuration, accounts prefixed
                    <literal>SERVICE\_</literal> are only accessible if <literal>X-Auth-Token</literal> is from the end-user
                    and <literal>X-Service-Token</literal> is from the <literal>glance</literal> user:</paragraph>
                <literal_block xml:space="preserve">[filter:tempauth]
use = egg:swift#tempauth
reseller_prefix = AUTH, SERVICE
SERVICE_require_group = .service
user_admin_admin = admin .admin .reseller_admin
user_joeacct_joe = joepw .admin
user_maryacct_mary = marypw .admin
user_glance_glance = glancepw .service</literal_block>
                <paragraph>The name <literal>.service</literal> is an example. Unlike <literal>.admin</literal> and
                    <literal>.reseller_admin</literal> it is not a reserved name.</paragraph>
                <paragraph>Please note that ACLs can be set on service accounts and are matched
                    against the identity validated by <literal>X-Auth-Token</literal>. As such ACLs can grant
                    access to a service account’s container without needing to provide a
                    service token, just like any other cross-reseller request using ACLs.</paragraph>
            </section>
            <section ids="account-acls" names="account\ acls">
                <title>Account ACLs</title>
                <paragraph>If a swift_owner issues a POST or PUT to the account with the
                    <literal>X-Account-Access-Control</literal> header set in the request, then this may
                    allow certain types of access for additional users.</paragraph>
                <bullet_list bullet="*">
                    <list_item>
                        <paragraph>Read-Only: Users with read-only access can list containers in the
                            account, list objects in any container, retrieve objects, and view
                            unprivileged account/container/object metadata.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Read-Write: Users with read-write access can (in addition to the
                            read-only privileges) create objects, overwrite existing objects,
                            create new containers, and set unprivileged container/object
                            metadata.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Admin: Users with admin access are swift_owners and can perform
                            any action, including viewing/setting privileged metadata (e.g.
                            changing account ACLs).</paragraph>
                    </list_item>
                </bullet_list>
                <paragraph>To generate headers for setting an account ACL:</paragraph>
                <literal_block xml:space="preserve">from swift.common.middleware.acl import format_acl
acl_data = { 'admin': ['alice'], 'read-write': ['bob', 'carol'] }
header_value = format_acl(version=2, acl_dict=acl_data)</literal_block>
                <paragraph>To generate a curl command line from the above:</paragraph>
                <literal_block xml:space="preserve">token=...
storage_url=...
python -c '
  from swift.common.middleware.acl import format_acl
  acl_data = { 'admin': ['alice'], 'read-write': ['bob', 'carol'] }
  headers = {'X-Account-Access-Control':
             format_acl(version=2, acl_dict=acl_data)}
  header_str = ' '.join(["-H '%s: %s'" % (k, v)
                         for k, v in headers.items()])
  print('curl -D- -X POST -H "x-auth-token: $token" %s '
        '$storage_url' % header_str)
'</literal_block>
                <index entries="['single',\ u'TempAuth\ (class\ in\ swift.common.middleware.tempauth)',\ u'swift.common.middleware.tempauth.TempAuth',\ '',\ None]"></index>
                <desc desctype="class" domain="py" noindex="False" objtype="class">
                    <desc_signature class="" first="False" fullname="TempAuth" ids="swift.common.middleware.tempauth.TempAuth" module="swift.common.middleware.tempauth" names="swift.common.middleware.tempauth.TempAuth"><desc_annotation xml:space="preserve">class </desc_annotation><desc_addname xml:space="preserve">swift.common.middleware.tempauth.</desc_addname><desc_name xml:space="preserve">TempAuth</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">app</desc_parameter><desc_parameter xml:space="preserve">conf</desc_parameter></desc_parameterlist></desc_signature>
                    <desc_content>
                        <paragraph>Bases: <literal classes="xref py py-class">object</literal></paragraph>
                        <field_list>
                            <field>
                                <field_name>Parameters</field_name>
                                <field_body>
                                    <bullet_list>
                                        <list_item>
                                            <paragraph><literal_strong refspecific="True">app</literal_strong> – The next WSGI app in the pipeline</paragraph>
                                        </list_item>
                                        <list_item>
                                            <paragraph><literal_strong refspecific="True">conf</literal_strong> – The dict of configuration values from the Paste config file</paragraph>
                                        </list_item>
                                    </bullet_list>
                                </field_body>
                            </field>
                        </field_list>
                        <index entries="['single',\ u'account_acls()\ (swift.common.middleware.tempauth.TempAuth\ method)',\ u'swift.common.middleware.tempauth.TempAuth.account_acls',\ '',\ None]"></index>
                        <desc desctype="method" domain="py" noindex="False" objtype="method">
                            <desc_signature class="TempAuth" first="False" fullname="TempAuth.account_acls" ids="swift.common.middleware.tempauth.TempAuth.account_acls" module="swift.common.middleware.tempauth" names="swift.common.middleware.tempauth.TempAuth.account_acls"><desc_name xml:space="preserve">account_acls</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">req</desc_parameter></desc_parameterlist></desc_signature>
                            <desc_content>
                                <paragraph>Return a dict of ACL data from the account server via get_account_info.</paragraph>
                                <paragraph>Auth systems may define their own format, serialization, structure,
                                    and capabilities implemented in the ACL headers and persisted in the
                                    sysmeta data.  However, auth systems are strongly encouraged to be
                                    interoperable with Tempauth.</paragraph>
                                <definition_list>
                                    <definition_list_item>
                                        <term>Account ACLs are set and retrieved via the header</term>
                                        <definition>
                                            <paragraph>X-Account-Access-Control</paragraph>
                                        </definition>
                                    </definition_list_item>
                                    <definition_list_item>
                                        <term>For header format and syntax, see:</term>
                                        <definition>
                                            <bullet_list bullet="*">
                                                <list_item>
                                                    <paragraph><reference internal="True" reftitle="swift.common.middleware.acl.parse_acl" refuri="misc#swift.common.middleware.acl.parse_acl"><literal classes="xref py py-func">swift.common.middleware.acl.parse_acl()</literal></reference></paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><reference internal="True" reftitle="swift.common.middleware.acl.format_acl" refuri="misc#swift.common.middleware.acl.format_acl"><literal classes="xref py py-func">swift.common.middleware.acl.format_acl()</literal></reference></paragraph>
                                                </list_item>
                                            </bullet_list>
                                        </definition>
                                    </definition_list_item>
                                </definition_list>
                            </desc_content>
                        </desc>
                        <index entries="['single',\ u'authorize()\ (swift.common.middleware.tempauth.TempAuth\ method)',\ u'swift.common.middleware.tempauth.TempAuth.authorize',\ '',\ None]"></index>
                        <desc desctype="method" domain="py" noindex="False" objtype="method">
                            <desc_signature class="TempAuth" first="False" fullname="TempAuth.authorize" ids="swift.common.middleware.tempauth.TempAuth.authorize" module="swift.common.middleware.tempauth" names="swift.common.middleware.tempauth.TempAuth.authorize"><desc_name xml:space="preserve">authorize</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">req</desc_parameter></desc_parameterlist></desc_signature>
                            <desc_content>
                                <paragraph>Returns None if the request is authorized to continue or a standard
                                    WSGI response callable if not.</paragraph>
                            </desc_content>
                        </desc>
                        <index entries="['single',\ u'denied_response()\ (swift.common.middleware.tempauth.TempAuth\ method)',\ u'swift.common.middleware.tempauth.TempAuth.denied_response',\ '',\ None]"></index>
                        <desc desctype="method" domain="py" noindex="False" objtype="method">
                            <desc_signature class="TempAuth" first="False" fullname="TempAuth.denied_response" ids="swift.common.middleware.tempauth.TempAuth.denied_response" module="swift.common.middleware.tempauth" names="swift.common.middleware.tempauth.TempAuth.denied_response"><desc_name xml:space="preserve">denied_response</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">req</desc_parameter></desc_parameterlist></desc_signature>
                            <desc_content>
                                <paragraph>Returns a standard WSGI response callable with the status of 403 or 401
                                    depending on whether the REMOTE_USER is set or not.</paragraph>
                            </desc_content>
                        </desc>
                        <index entries="['single',\ u'extract_acl_and_report_errors()\ (swift.common.middleware.tempauth.TempAuth\ method)',\ u'swift.common.middleware.tempauth.TempAuth.extract_acl_and_report_errors',\ '',\ None]"></index>
                        <desc desctype="method" domain="py" noindex="False" objtype="method">
                            <desc_signature class="TempAuth" first="False" fullname="TempAuth.extract_acl_and_report_errors" ids="swift.common.middleware.tempauth.TempAuth.extract_acl_and_report_errors" module="swift.common.middleware.tempauth" names="swift.common.middleware.tempauth.TempAuth.extract_acl_and_report_errors"><desc_name xml:space="preserve">extract_acl_and_report_errors</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">req</desc_parameter></desc_parameterlist></desc_signature>
                            <desc_content>
                                <paragraph>Return a user-readable string indicating the errors in the input ACL,
                                    or None if there are no errors.</paragraph>
                            </desc_content>
                        </desc>
                        <index entries="['single',\ u'get_groups()\ (swift.common.middleware.tempauth.TempAuth\ method)',\ u'swift.common.middleware.tempauth.TempAuth.get_groups',\ '',\ None]"></index>
                        <desc desctype="method" domain="py" noindex="False" objtype="method">
                            <desc_signature class="TempAuth" first="False" fullname="TempAuth.get_groups" ids="swift.common.middleware.tempauth.TempAuth.get_groups" module="swift.common.middleware.tempauth" names="swift.common.middleware.tempauth.TempAuth.get_groups"><desc_name xml:space="preserve">get_groups</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">env</desc_parameter><desc_parameter xml:space="preserve">token</desc_parameter></desc_parameterlist></desc_signature>
                            <desc_content>
                                <paragraph>Get groups for the given token.</paragraph>
                                <field_list>
                                    <field>
                                        <field_name>Parameters</field_name>
                                        <field_body>
                                            <bullet_list>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">env</literal_strong> – The current WSGI environment dictionary.</paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">token</literal_strong> – Token to validate and return a group string for.</paragraph>
                                                </list_item>
                                            </bullet_list>
                                        </field_body>
                                    </field>
                                    <field>
                                        <field_name>Returns</field_name>
                                        <field_body>
                                            <paragraph>None if the token is invalid or a string containing a comma
                                                separated list of groups the authenticated user is a member
                                                of. The first group in the list is also considered a unique
                                                identifier for that user.</paragraph>
                                        </field_body>
                                    </field>
                                </field_list>
                            </desc_content>
                        </desc>
                        <index entries="['single',\ u'handle()\ (swift.common.middleware.tempauth.TempAuth\ method)',\ u'swift.common.middleware.tempauth.TempAuth.handle',\ '',\ None]"></index>
                        <desc desctype="method" domain="py" noindex="False" objtype="method">
                            <desc_signature class="TempAuth" first="False" fullname="TempAuth.handle" ids="swift.common.middleware.tempauth.TempAuth.handle" module="swift.common.middleware.tempauth" names="swift.common.middleware.tempauth.TempAuth.handle"><desc_name xml:space="preserve">handle</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">env</desc_parameter><desc_parameter xml:space="preserve">start_response</desc_parameter></desc_parameterlist></desc_signature>
                            <desc_content>
                                <paragraph>WSGI entry point for auth requests (ones that match the
                                    self.auth_prefix).
                                    Wraps env in swob.Request object and passes it down.</paragraph>
                                <field_list>
                                    <field>
                                        <field_name>Parameters</field_name>
                                        <field_body>
                                            <bullet_list>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">env</literal_strong> – WSGI environment dictionary</paragraph>
                                                </list_item>
                                                <list_item>
                                                    <paragraph><literal_strong refspecific="True">start_response</literal_strong> – WSGI callable</paragraph>
                                                </list_item>
                                            </bullet_list>
                                        </field_body>
                                    </field>
                                </field_list>
                            </desc_content>
                        </desc>
                        <index entries="['single',\ u'handle_get_token()\ (swift.common.middleware.tempauth.TempAuth\ method)',\ u'swift.common.middleware.tempauth.TempAuth.handle_get_token',\ '',\ None]"></index>
                        <desc desctype="method" domain="py" noindex="False" objtype="method">
                            <desc_signature class="TempAuth" first="False" fullname="TempAuth.handle_get_token" ids="swift.common.middleware.tempauth.TempAuth.handle_get_token" module="swift.common.middleware.tempauth" names="swift.common.middleware.tempauth.TempAuth.handle_get_token"><desc_name xml:space="preserve">handle_get_token</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">req</desc_parameter></desc_parameterlist></desc_signature>
                            <desc_content>
                                <paragraph>Handles the various <title_reference>request for token and service end point(s)</title_reference> calls.
                                    There are various formats to support the various auth servers in the
                                    past. Examples:</paragraph>
                                <literal_block xml:space="preserve">GET &lt;auth-prefix&gt;/v1/&lt;act&gt;/auth
    X-Auth-User: &lt;act&gt;:&lt;usr&gt;  or  X-Storage-User: &lt;usr&gt;
    X-Auth-Key: &lt;key&gt;         or  X-Storage-Pass: &lt;key&gt;
GET &lt;auth-prefix&gt;/auth
    X-Auth-User: &lt;act&gt;:&lt;usr&gt;  or  X-Storage-User: &lt;act&gt;:&lt;usr&gt;
    X-Auth-Key: &lt;key&gt;         or  X-Storage-Pass: &lt;key&gt;
GET &lt;auth-prefix&gt;/v1.0
    X-Auth-User: &lt;act&gt;:&lt;usr&gt;  or  X-Storage-User: &lt;act&gt;:&lt;usr&gt;
    X-Auth-Key: &lt;key&gt;         or  X-Storage-Pass: &lt;key&gt;</literal_block>
                                <paragraph>On successful authentication, the response will have X-Auth-Token and
                                    X-Storage-Token set to the token to use with Swift and X-Storage-URL
                                    set to the URL to the default Swift cluster to use.</paragraph>
                                <field_list>
                                    <field>
                                        <field_name>Parameters</field_name>
                                        <field_body>
                                            <paragraph><literal_strong refspecific="True">req</literal_strong> – The swob.Request to process.</paragraph>
                                        </field_body>
                                    </field>
                                    <field>
                                        <field_name>Returns</field_name>
                                        <field_body>
                                            <paragraph>swob.Response, 2xx on success with data set as explained
                                                above.</paragraph>
                                        </field_body>
                                    </field>
                                </field_list>
                            </desc_content>
                        </desc>
                        <index entries="['single',\ u'handle_request()\ (swift.common.middleware.tempauth.TempAuth\ method)',\ u'swift.common.middleware.tempauth.TempAuth.handle_request',\ '',\ None]"></index>
                        <desc desctype="method" domain="py" noindex="False" objtype="method">
                            <desc_signature class="TempAuth" first="False" fullname="TempAuth.handle_request" ids="swift.common.middleware.tempauth.TempAuth.handle_request" module="swift.common.middleware.tempauth" names="swift.common.middleware.tempauth.TempAuth.handle_request"><desc_name xml:space="preserve">handle_request</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">req</desc_parameter></desc_parameterlist></desc_signature>
                            <desc_content>
                                <paragraph>Entry point for auth requests (ones that match the self.auth_prefix).
                                    Should return a WSGI-style callable (such as swob.Response).</paragraph>
                                <field_list>
                                    <field>
                                        <field_name>Parameters</field_name>
                                        <field_body>
                                            <paragraph><literal_strong refspecific="True">req</literal_strong> – swob.Request object</paragraph>
                                        </field_body>
                                    </field>
                                </field_list>
                            </desc_content>
                        </desc>
                    </desc_content>
                </desc>
                <index entries="['single',\ u'filter_factory()\ (in\ module\ swift.common.middleware.tempauth)',\ u'swift.common.middleware.tempauth.filter_factory',\ '',\ None]"></index>
                <desc desctype="function" domain="py" noindex="False" objtype="function">
                    <desc_signature class="" first="False" fullname="filter_factory" ids="swift.common.middleware.tempauth.filter_factory" module="swift.common.middleware.tempauth" names="swift.common.middleware.tempauth.filter_factory"><desc_addname xml:space="preserve">swift.common.middleware.tempauth.</desc_addname><desc_name xml:space="preserve">filter_factory</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">global_conf</desc_parameter><desc_parameter xml:space="preserve">**local_conf</desc_parameter></desc_parameterlist></desc_signature>
                    <desc_content>
                        <paragraph>Returns a WSGI filter app for use with paste.deploy.</paragraph>
                    </desc_content>
                </desc>
            </section>
            <target refid="tempurl"></target>
        </section>
        <section dupnames="tempurl" ids="tempurl id12" names="tempurl">
            <title>TempURL</title>
            <target ids="module-swift.common.middleware.tempurl" ismod="True"></target>
            <index entries="['single',\ u'swift.common.middleware.tempurl\ (module)',\ u'module-swift.common.middleware.tempurl',\ '',\ None]"></index>
            <paragraph>TempURL Middleware</paragraph>
            <paragraph>Allows the creation of URLs to provide temporary access to objects.</paragraph>
            <paragraph>For example, a website may wish to provide a link to download a large
                object in Swift, but the Swift account has no public access. The
                website can generate a URL that will provide GET access for a limited
                time to the resource. When the web browser user clicks on the link,
                the browser will download the object directly from Swift, obviating
                the need for the website to act as a proxy for the request.</paragraph>
            <paragraph>If the user were to share the link with all his friends, or
                accidentally post it on a forum, etc. the direct access would be
                limited to the expiration time set when the website created the link.</paragraph>
            <paragraph>Beyond that, the middleware provides the ability to create URLs, which
                contain signatures which are valid for all objects which share a
                common prefix. These prefix-based URLs are useful for sharing a set
                of objects.</paragraph>
            <section ids="client-usage" names="client\ usage">
                <title>Client Usage</title>
                <paragraph>To create temporary URLs, first an <literal>X-Account-Meta-Temp-URL-Key</literal>
                    header must be set on the Swift account. Then, an HMAC-SHA1 (RFC 2104)
                    signature is generated using the HTTP method to allow (<literal>GET</literal>, <literal>PUT</literal>,
                    <literal>DELETE</literal>, etc.), the Unix timestamp the access should be allowed until,
                    the full path to the object, and the key set on the account.</paragraph>
                <paragraph>For example, here is code generating the signature for a <literal>GET</literal> for 60
                    seconds on <literal>/v1/AUTH_account/container/object</literal>:</paragraph>
                <literal_block xml:space="preserve">import hmac
from hashlib import sha1
from time import time
method = 'GET'
expires = int(time() + 60)
path = '/v1/AUTH_account/container/object'
key = 'mykey'
hmac_body = '%s\n%s\n%s' % (method, expires, path)
sig = hmac.new(key, hmac_body, sha1).hexdigest()</literal_block>
                <paragraph>Be certain to use the full path, from the <literal>/v1/</literal> onward.</paragraph>
                <paragraph>Let’s say <literal>sig</literal> ends up equaling
                    <literal>da39a3ee5e6b4b0d3255bfef95601890afd80709</literal> and <literal>expires</literal> ends up
                    <literal>1323479485</literal>. Then, for example, the website could provide a link to:</paragraph>
                <literal_block xml:space="preserve">https://swift-cluster.example.com/v1/AUTH_account/container/object?
temp_url_sig=da39a3ee5e6b4b0d3255bfef95601890afd80709&amp;
temp_url_expires=1323479485</literal_block>
                <paragraph>You may also use ISO 8601 UTC timestamps with the format
                    <literal>"%Y-%m-%dT%H:%M:%SZ"</literal> instead of UNIX timestamps in the URL
                    (but NOT in the code above for generating the signature!).
                    So, the latter URL could also be formulated as:</paragraph>
                <block_quote>
                    <paragraph><reference refuri="https://swift-cluster.example.com/v1/AUTH_account/container/object">https://swift-cluster.example.com/v1/AUTH_account/container/object</reference>?
                        temp_url_sig=da39a3ee5e6b4b0d3255bfef95601890afd80709&amp;
                        temp_url_expires=2011-12-10T01:11:25Z</paragraph>
                </block_quote>
                <paragraph>If a prefix-based signature with the prefix <literal>pre</literal> is desired, set path to:</paragraph>
                <literal_block xml:space="preserve">path = 'prefix:/v1/AUTH_account/container/pre'</literal_block>
                <paragraph>The generated signature would be valid for all objects starting
                    with <literal>pre</literal>. The middleware detects a prefix-based temporary URL by
                    a query parameter called <literal>temp_url_prefix</literal>. So, if <literal>sig</literal> and <literal>expires</literal>
                    would end up like above, following URL would be valid:</paragraph>
                <literal_block xml:space="preserve">https://swift-cluster.example.com/v1/AUTH_account/container/pre/object?
temp_url_sig=da39a3ee5e6b4b0d3255bfef95601890afd80709&amp;
temp_url_expires=1323479485&amp;
temp_url_prefix=pre</literal_block>
                <paragraph>Another valid URL:</paragraph>
                <literal_block xml:space="preserve">https://swift-cluster.example.com/v1/AUTH_account/container/pre/
subfolder/another_object?
temp_url_sig=da39a3ee5e6b4b0d3255bfef95601890afd80709&amp;
temp_url_expires=1323479485&amp;
temp_url_prefix=pre</literal_block>
                <paragraph>Any alteration of the resource path or query arguments of a temporary URL
                    would result in <literal>401 Unauthorized</literal>. Similarly, a <literal>PUT</literal> where <literal>GET</literal> was
                    the allowed method would be rejected with <literal>401 Unauthorized</literal>.
                    However, <literal>HEAD</literal> is allowed if <literal>GET</literal>, <literal>PUT</literal>, or <literal>POST</literal> is allowed.</paragraph>
                <paragraph>Using this in combination with browser form post translation
                    middleware could also allow direct-from-browser uploads to specific
                    locations in Swift.</paragraph>
                <paragraph>TempURL supports both account and container level keys.  Each allows up to two
                    keys to be set, allowing key rotation without invalidating all existing
                    temporary URLs.  Account keys are specified by <literal>X-Account-Meta-Temp-URL-Key</literal>
                    and <literal>X-Account-Meta-Temp-URL-Key-2</literal>, while container keys are specified by
                    <literal>X-Container-Meta-Temp-URL-Key</literal> and <literal>X-Container-Meta-Temp-URL-Key-2</literal>.
                    Signatures are checked against account and container keys, if
                    present.</paragraph>
                <paragraph>With <literal>GET</literal> TempURLs, a <literal>Content-Disposition</literal> header will be set on the
                    response so that browsers will interpret this as a file attachment to
                    be saved. The filename chosen is based on the object name, but you
                    can override this with a filename query parameter. Modifying the
                    above example:</paragraph>
                <literal_block xml:space="preserve">https://swift-cluster.example.com/v1/AUTH_account/container/object?
temp_url_sig=da39a3ee5e6b4b0d3255bfef95601890afd80709&amp;
temp_url_expires=1323479485&amp;filename=My+Test+File.pdf</literal_block>
                <paragraph>If you do not want the object to be downloaded, you can cause
                    <literal>Content-Disposition: inline</literal> to be set on the response by adding the
                    <literal>inline</literal> parameter to the query string, like so:</paragraph>
                <literal_block xml:space="preserve">https://swift-cluster.example.com/v1/AUTH_account/container/object?
temp_url_sig=da39a3ee5e6b4b0d3255bfef95601890afd80709&amp;
temp_url_expires=1323479485&amp;inline</literal_block>
                <paragraph>In some cases, the client might not able to present the content of the object,
                    but you still want the content able to save to local with the specific
                    filename. So you can cause <literal>Content-Disposition: inline; filename=...</literal> to be
                    set on the response by adding the <literal>inline&amp;filename=...</literal> parameter to the
                    query string, like so:</paragraph>
                <literal_block xml:space="preserve">https://swift-cluster.example.com/v1/AUTH_account/container/object?
temp_url_sig=da39a3ee5e6b4b0d3255bfef95601890afd80709&amp;
temp_url_expires=1323479485&amp;inline&amp;filename=My+Test+File.pdf</literal_block>
            </section>
            <section ids="cluster-configuration" names="cluster\ configuration">
                <title>Cluster Configuration</title>
                <paragraph>This middleware understands the following configuration settings:</paragraph>
                <definition_list>
                    <definition_list_item>
                        <term><literal>incoming_remove_headers</literal></term>
                        <definition>
                            <paragraph>A whitespace-delimited list of the headers to remove from
                                incoming requests. Names may optionally end with <literal>*</literal> to
                                indicate a prefix match. <literal>incoming_allow_headers</literal> is a
                                list of exceptions to these removals.
                                Default: <literal>x-timestamp</literal></paragraph>
                        </definition>
                    </definition_list_item>
                    <definition_list_item>
                        <term><literal>incoming_allow_headers</literal></term>
                        <definition>
                            <paragraph>A whitespace-delimited list of the headers allowed as
                                exceptions to <literal>incoming_remove_headers</literal>. Names may
                                optionally end with <literal>*</literal> to indicate a prefix match.</paragraph>
                            <paragraph>Default: None</paragraph>
                        </definition>
                    </definition_list_item>
                    <definition_list_item>
                        <term><literal>outgoing_remove_headers</literal></term>
                        <definition>
                            <paragraph>A whitespace-delimited list of the headers to remove from
                                outgoing responses. Names may optionally end with <literal>*</literal> to
                                indicate a prefix match. <literal>outgoing_allow_headers</literal> is a
                                list of exceptions to these removals.</paragraph>
                            <paragraph>Default: <literal>x-object-meta-*</literal></paragraph>
                        </definition>
                    </definition_list_item>
                    <definition_list_item>
                        <term><literal>outgoing_allow_headers</literal></term>
                        <definition>
                            <paragraph>A whitespace-delimited list of the headers allowed as
                                exceptions to <literal>outgoing_remove_headers</literal>. Names may
                                optionally end with <literal>*</literal> to indicate a prefix match.</paragraph>
                            <paragraph>Default: <literal>x-object-meta-public-*</literal></paragraph>
                        </definition>
                    </definition_list_item>
                    <definition_list_item>
                        <term><literal>methods</literal></term>
                        <definition>
                            <paragraph>A whitespace delimited list of request methods that are
                                allowed to be used with a temporary URL.</paragraph>
                            <paragraph>Default: <literal>GET HEAD PUT POST DELETE</literal></paragraph>
                        </definition>
                    </definition_list_item>
                </definition_list>
                <index entries="['single',\ u'TempURL\ (class\ in\ swift.common.middleware.tempurl)',\ u'swift.common.middleware.tempurl.TempURL',\ '',\ None]"></index>
                <desc desctype="class" domain="py" noindex="False" objtype="class">
                    <desc_signature class="" first="False" fullname="TempURL" ids="swift.common.middleware.tempurl.TempURL" module="swift.common.middleware.tempurl" names="swift.common.middleware.tempurl.TempURL"><desc_annotation xml:space="preserve">class </desc_annotation><desc_addname xml:space="preserve">swift.common.middleware.tempurl.</desc_addname><desc_name xml:space="preserve">TempURL</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">app</desc_parameter><desc_parameter xml:space="preserve">conf</desc_parameter></desc_parameterlist></desc_signature>
                    <desc_content>
                        <paragraph>Bases: <literal classes="xref py py-class">object</literal></paragraph>
                        <paragraph>WSGI Middleware to grant temporary URLs specific access to Swift
                            resources. See the overview for more information.</paragraph>
                        <paragraph>The proxy logs created for any subrequests made will have swift.source set
                            to “TU”.</paragraph>
                        <field_list>
                            <field>
                                <field_name>Parameters</field_name>
                                <field_body>
                                    <bullet_list>
                                        <list_item>
                                            <paragraph><literal_strong refspecific="True">app</literal_strong> – The next WSGI filter or app in the paste.deploy
                                                chain.</paragraph>
                                        </list_item>
                                        <list_item>
                                            <paragraph><literal_strong refspecific="True">conf</literal_strong> – The configuration dict for the middleware.</paragraph>
                                        </list_item>
                                    </bullet_list>
                                </field_body>
                            </field>
                        </field_list>
                        <index entries="['single',\ u'agent\ (swift.common.middleware.tempurl.TempURL\ attribute)',\ u'swift.common.middleware.tempurl.TempURL.agent',\ '',\ None]"></index>
                        <desc desctype="attribute" domain="py" noindex="False" objtype="attribute">
                            <desc_signature class="TempURL" first="False" fullname="TempURL.agent" ids="swift.common.middleware.tempurl.TempURL.agent" module="swift.common.middleware.tempurl" names="swift.common.middleware.tempurl.TempURL.agent"><desc_name xml:space="preserve">agent</desc_name><desc_annotation xml:space="preserve"> = None</desc_annotation></desc_signature>
                            <desc_content>
                                <paragraph>HTTP user agent to use for subrequests.</paragraph>
                            </desc_content>
                        </desc>
                        <index entries="['single',\ u'app\ (swift.common.middleware.tempurl.TempURL\ attribute)',\ u'swift.common.middleware.tempurl.TempURL.app',\ '',\ None]"></index>
                        <desc desctype="attribute" domain="py" noindex="False" objtype="attribute">
                            <desc_signature class="TempURL" first="False" fullname="TempURL.app" ids="swift.common.middleware.tempurl.TempURL.app" module="swift.common.middleware.tempurl" names="swift.common.middleware.tempurl.TempURL.app"><desc_name xml:space="preserve">app</desc_name><desc_annotation xml:space="preserve"> = None</desc_annotation></desc_signature>
                            <desc_content>
                                <paragraph>The next WSGI application/filter in the paste.deploy pipeline.</paragraph>
                            </desc_content>
                        </desc>
                        <index entries="['single',\ u'conf\ (swift.common.middleware.tempurl.TempURL\ attribute)',\ u'swift.common.middleware.tempurl.TempURL.conf',\ '',\ None]"></index>
                        <desc desctype="attribute" domain="py" noindex="False" objtype="attribute">
                            <desc_signature class="TempURL" first="False" fullname="TempURL.conf" ids="swift.common.middleware.tempurl.TempURL.conf" module="swift.common.middleware.tempurl" names="swift.common.middleware.tempurl.TempURL.conf"><desc_name xml:space="preserve">conf</desc_name><desc_annotation xml:space="preserve"> = None</desc_annotation></desc_signature>
                            <desc_content>
                                <paragraph>The filter configuration dict.</paragraph>
                            </desc_content>
                        </desc>
                        <index entries="['single',\ u'incoming_allow_headers\ (swift.common.middleware.tempurl.TempURL\ attribute)',\ u'swift.common.middleware.tempurl.TempURL.incoming_allow_headers',\ '',\ None]"></index>
                        <desc desctype="attribute" domain="py" noindex="False" objtype="attribute">
                            <desc_signature class="TempURL" first="False" fullname="TempURL.incoming_allow_headers" ids="swift.common.middleware.tempurl.TempURL.incoming_allow_headers" module="swift.common.middleware.tempurl" names="swift.common.middleware.tempurl.TempURL.incoming_allow_headers"><desc_name xml:space="preserve">incoming_allow_headers</desc_name><desc_annotation xml:space="preserve"> = None</desc_annotation></desc_signature>
                            <desc_content>
                                <paragraph>Headers to allow in incoming requests. Uppercase WSGI env style,
                                    like <title_reference>HTTP_X_MATCHES_REMOVE_PREFIX_BUT_OKAY</title_reference>.</paragraph>
                            </desc_content>
                        </desc>
                        <index entries="['single',\ u'incoming_allow_headers_startswith\ (swift.common.middleware.tempurl.TempURL\ attribute)',\ u'swift.common.middleware.tempurl.TempURL.incoming_allow_headers_startswith',\ '',\ None]"></index>
                        <desc desctype="attribute" domain="py" noindex="False" objtype="attribute">
                            <desc_signature class="TempURL" first="False" fullname="TempURL.incoming_allow_headers_startswith" ids="swift.common.middleware.tempurl.TempURL.incoming_allow_headers_startswith" module="swift.common.middleware.tempurl" names="swift.common.middleware.tempurl.TempURL.incoming_allow_headers_startswith"><desc_name xml:space="preserve">incoming_allow_headers_startswith</desc_name><desc_annotation xml:space="preserve"> = None</desc_annotation></desc_signature>
                            <desc_content>
                                <paragraph>Header with match prefixes to allow in incoming requests. Uppercase
                                    WSGI env style, like <title_reference>HTTP_X_MATCHES_REMOVE_PREFIX_BUT_OKAY_*</title_reference>.</paragraph>
                            </desc_content>
                        </desc>
                        <index entries="['single',\ u'incoming_remove_headers\ (swift.common.middleware.tempurl.TempURL\ attribute)',\ u'swift.common.middleware.tempurl.TempURL.incoming_remove_headers',\ '',\ None]"></index>
                        <desc desctype="attribute" domain="py" noindex="False" objtype="attribute">
                            <desc_signature class="TempURL" first="False" fullname="TempURL.incoming_remove_headers" ids="swift.common.middleware.tempurl.TempURL.incoming_remove_headers" module="swift.common.middleware.tempurl" names="swift.common.middleware.tempurl.TempURL.incoming_remove_headers"><desc_name xml:space="preserve">incoming_remove_headers</desc_name><desc_annotation xml:space="preserve"> = None</desc_annotation></desc_signature>
                            <desc_content>
                                <paragraph>Headers to remove from incoming requests. Uppercase WSGI env style,
                                    like <title_reference>HTTP_X_PRIVATE</title_reference>.</paragraph>
                            </desc_content>
                        </desc>
                        <index entries="['single',\ u'incoming_remove_headers_startswith\ (swift.common.middleware.tempurl.TempURL\ attribute)',\ u'swift.common.middleware.tempurl.TempURL.incoming_remove_headers_startswith',\ '',\ None]"></index>
                        <desc desctype="attribute" domain="py" noindex="False" objtype="attribute">
                            <desc_signature class="TempURL" first="False" fullname="TempURL.incoming_remove_headers_startswith" ids="swift.common.middleware.tempurl.TempURL.incoming_remove_headers_startswith" module="swift.common.middleware.tempurl" names="swift.common.middleware.tempurl.TempURL.incoming_remove_headers_startswith"><desc_name xml:space="preserve">incoming_remove_headers_startswith</desc_name><desc_annotation xml:space="preserve"> = None</desc_annotation></desc_signature>
                            <desc_content>
                                <paragraph>Header with match prefixes to remove from incoming requests.
                                    Uppercase WSGI env style, like <title_reference>HTTP_X_SENSITIVE_*</title_reference>.</paragraph>
                            </desc_content>
                        </desc>
                        <index entries="['single',\ u'outgoing_allow_headers\ (swift.common.middleware.tempurl.TempURL\ attribute)',\ u'swift.common.middleware.tempurl.TempURL.outgoing_allow_headers',\ '',\ None]"></index>
                        <desc desctype="attribute" domain="py" noindex="False" objtype="attribute">
                            <desc_signature class="TempURL" first="False" fullname="TempURL.outgoing_allow_headers" ids="swift.common.middleware.tempurl.TempURL.outgoing_allow_headers" module="swift.common.middleware.tempurl" names="swift.common.middleware.tempurl.TempURL.outgoing_allow_headers"><desc_name xml:space="preserve">outgoing_allow_headers</desc_name><desc_annotation xml:space="preserve"> = None</desc_annotation></desc_signature>
                            <desc_content>
                                <paragraph>Headers to allow in outgoing responses. Lowercase, like
                                    <title_reference>x-matches-remove-prefix-but-okay</title_reference>.</paragraph>
                            </desc_content>
                        </desc>
                        <index entries="['single',\ u'outgoing_allow_headers_startswith\ (swift.common.middleware.tempurl.TempURL\ attribute)',\ u'swift.common.middleware.tempurl.TempURL.outgoing_allow_headers_startswith',\ '',\ None]"></index>
                        <desc desctype="attribute" domain="py" noindex="False" objtype="attribute">
                            <desc_signature class="TempURL" first="False" fullname="TempURL.outgoing_allow_headers_startswith" ids="swift.common.middleware.tempurl.TempURL.outgoing_allow_headers_startswith" module="swift.common.middleware.tempurl" names="swift.common.middleware.tempurl.TempURL.outgoing_allow_headers_startswith"><desc_name xml:space="preserve">outgoing_allow_headers_startswith</desc_name><desc_annotation xml:space="preserve"> = None</desc_annotation></desc_signature>
                            <desc_content>
                                <paragraph>Header with match prefixes to allow in outgoing responses.
                                    Lowercase, like <title_reference>x-matches-remove-prefix-but-okay-*</title_reference>.</paragraph>
                            </desc_content>
                        </desc>
                        <index entries="['single',\ u'outgoing_remove_headers\ (swift.common.middleware.tempurl.TempURL\ attribute)',\ u'swift.common.middleware.tempurl.TempURL.outgoing_remove_headers',\ '',\ None]"></index>
                        <desc desctype="attribute" domain="py" noindex="False" objtype="attribute">
                            <desc_signature class="TempURL" first="False" fullname="TempURL.outgoing_remove_headers" ids="swift.common.middleware.tempurl.TempURL.outgoing_remove_headers" module="swift.common.middleware.tempurl" names="swift.common.middleware.tempurl.TempURL.outgoing_remove_headers"><desc_name xml:space="preserve">outgoing_remove_headers</desc_name><desc_annotation xml:space="preserve"> = None</desc_annotation></desc_signature>
                            <desc_content>
                                <paragraph>Headers to remove from outgoing responses. Lowercase, like
                                    <title_reference>x-account-meta-temp-url-key</title_reference>.</paragraph>
                            </desc_content>
                        </desc>
                        <index entries="['single',\ u'outgoing_remove_headers_startswith\ (swift.common.middleware.tempurl.TempURL\ attribute)',\ u'swift.common.middleware.tempurl.TempURL.outgoing_remove_headers_startswith',\ '',\ None]"></index>
                        <desc desctype="attribute" domain="py" noindex="False" objtype="attribute">
                            <desc_signature class="TempURL" first="False" fullname="TempURL.outgoing_remove_headers_startswith" ids="swift.common.middleware.tempurl.TempURL.outgoing_remove_headers_startswith" module="swift.common.middleware.tempurl" names="swift.common.middleware.tempurl.TempURL.outgoing_remove_headers_startswith"><desc_name xml:space="preserve">outgoing_remove_headers_startswith</desc_name><desc_annotation xml:space="preserve"> = None</desc_annotation></desc_signature>
                            <desc_content>
                                <paragraph>Header with match prefixes to remove from outgoing responses.
                                    Lowercase, like <title_reference>x-account-meta-private-*</title_reference>.</paragraph>
                            </desc_content>
                        </desc>
                    </desc_content>
                </desc>
                <index entries="['single',\ u'filter_factory()\ (in\ module\ swift.common.middleware.tempurl)',\ u'swift.common.middleware.tempurl.filter_factory',\ '',\ None]"></index>
                <desc desctype="function" domain="py" noindex="False" objtype="function">
                    <desc_signature class="" first="False" fullname="filter_factory" ids="swift.common.middleware.tempurl.filter_factory" module="swift.common.middleware.tempurl" names="swift.common.middleware.tempurl.filter_factory"><desc_addname xml:space="preserve">swift.common.middleware.tempurl.</desc_addname><desc_name xml:space="preserve">filter_factory</desc_name><desc_parameterlist xml:space="preserve"><desc_parameter xml:space="preserve">global_conf</desc_parameter><desc_parameter xml:space="preserve">**local_conf</desc_parameter></desc_parameterlist></desc_signature>
                    <desc_content>
                        <paragraph>Returns the WSGI filter for use with paste.deploy.</paragraph>
                    </desc_content>
                </desc>
                <index entries="['single',\ u'DEFAULT_INCOMING_REMOVE_HEADERS\ (in\ module\ swift.common.middleware.tempurl)',\ u'swift.common.middleware.tempurl.DEFAULT_INCOMING_REMOVE_HEADERS',\ '',\ None]"></index>
                <desc desctype="data" domain="py" noindex="False" objtype="data">
                    <desc_signature class="" first="False" fullname="DEFAULT_INCOMING_REMOVE_HEADERS" ids="swift.common.middleware.tempurl.DEFAULT_INCOMING_REMOVE_HEADERS" module="swift.common.middleware.tempurl" names="swift.common.middleware.tempurl.DEFAULT_INCOMING_REMOVE_HEADERS"><desc_addname xml:space="preserve">swift.common.middleware.tempurl.</desc_addname><desc_name xml:space="preserve">DEFAULT_INCOMING_REMOVE_HEADERS</desc_name><desc_annotation xml:space="preserve"> = 'x-timestamp'</desc_annotation></desc_signature>
                    <desc_content>
                        <paragraph>Default headers to remove from incoming requests. Simply a whitespace
                            delimited list of header names and names can optionally end with ‘*’ to
                            indicate a prefix match. DEFAULT_INCOMING_ALLOW_HEADERS is a list of
                            exceptions to these removals.</paragraph>
                    </desc_content>
                </desc>
                <index entries="['single',\ u'DEFAULT_INCOMING_ALLOW_HEADERS\ (in\ module\ swift.common.middleware.tempurl)',\ u'swift.common.middleware.tempurl.DEFAULT_INCOMING_ALLOW_HEADERS',\ '',\ None]"></index>
                <desc desctype="data" domain="py" noindex="False" objtype="data">
                    <desc_signature class="" first="False" fullname="DEFAULT_INCOMING_ALLOW_HEADERS" ids="swift.common.middleware.tempurl.DEFAULT_INCOMING_ALLOW_HEADERS" module="swift.common.middleware.tempurl" names="swift.common.middleware.tempurl.DEFAULT_INCOMING_ALLOW_HEADERS"><desc_addname xml:space="preserve">swift.common.middleware.tempurl.</desc_addname><desc_name xml:space="preserve">DEFAULT_INCOMING_ALLOW_HEADERS</desc_name><desc_annotation xml:space="preserve"> = ''</desc_annotation></desc_signature>
                    <desc_content>
                        <paragraph>Default headers as exceptions to DEFAULT_INCOMING_REMOVE_HEADERS. Simply a
                            whitespace delimited list of header names and names can optionally end with
                            ‘*’ to indicate a prefix match.</paragraph>
                    </desc_content>
                </desc>
                <index entries="['single',\ u'DEFAULT_OUTGOING_REMOVE_HEADERS\ (in\ module\ swift.common.middleware.tempurl)',\ u'swift.common.middleware.tempurl.DEFAULT_OUTGOING_REMOVE_HEADERS',\ '',\ None]"></index>
                <desc desctype="data" domain="py" noindex="False" objtype="data">
                    <desc_signature class="" first="False" fullname="DEFAULT_OUTGOING_REMOVE_HEADERS" ids="swift.common.middleware.tempurl.DEFAULT_OUTGOING_REMOVE_HEADERS" module="swift.common.middleware.tempurl" names="swift.common.middleware.tempurl.DEFAULT_OUTGOING_REMOVE_HEADERS"><desc_addname xml:space="preserve">swift.common.middleware.tempurl.</desc_addname><desc_name xml:space="preserve">DEFAULT_OUTGOING_REMOVE_HEADERS</desc_name><desc_annotation xml:space="preserve"> = 'x-object-meta-*'</desc_annotation></desc_signature>
                    <desc_content>
                        <paragraph>Default headers to remove from outgoing responses. Simply a whitespace
                            delimited list of header names and names can optionally end with ‘*’ to
                            indicate a prefix match. DEFAULT_OUTGOING_ALLOW_HEADERS is a list of
                            exceptions to these removals.</paragraph>
                    </desc_content>
                </desc>
                <index entries="['single',\ u'DEFAULT_OUTGOING_ALLOW_HEADERS\ (in\ module\ swift.common.middleware.tempurl)',\ u'swift.common.middleware.tempurl.DEFAULT_OUTGOING_ALLOW_HEADERS',\ '',\ None]"></index>
                <desc desctype="data" domain="py" noindex="False" objtype="data">
                    <desc_signature class="" first="False" fullname="DEFAULT_OUTGOING_ALLOW_HEADERS" ids="swift.common.middleware.tempurl.DEFAULT_OUTGOING_ALLOW_HEADERS" module="swift.common.middleware.tempurl" names="swift.common.middleware.tempurl.DEFAULT_OUTGOING_ALLOW_HEADERS"><desc_addname xml:space="preserve">swift.common.middleware.tempurl.</desc_addname><desc_name xml:space="preserve">DEFAULT_OUTGOING_ALLOW_HEADERS</desc_name><desc_annotation xml:space="preserve"> = 'x-object-meta-public-*'</desc_annotation></desc_signature>
                    <desc_content>
                        <paragraph>Default headers as exceptions to DEFAULT_OUTGOING_REMOVE_HEADERS. Simply a
                            whitespace delimited list of header names and names can optionally end with
                            ‘*’ to indicate a prefix match.</paragraph>
                    </desc_content>
                </desc>
            </section>
        </section>
        <section ids="module-swift.common.middleware.xprofile xprofile" names="xprofile">
            <title>XProfile</title>
            <index entries="['single',\ u'swift.common.middleware.xprofile\ (module)',\ u'module-swift.common.middleware.xprofile',\ '',\ None]"></index>
            <paragraph>Profiling middleware for Swift Servers.</paragraph>
            <paragraph>The current implementation is based on eventlet aware profiler.(For the
                future, more profilers could be added in to collect more data for analysis.)
                Profiling all incoming requests and accumulating cpu timing statistics
                information for performance tuning and optimization. An mini web UI is also
                provided for profiling data analysis. It can be accessed from the URL as
                below.</paragraph>
            <paragraph>Index page for browse profile data:</paragraph>
            <literal_block xml:space="preserve">http://SERVER_IP:PORT/__profile__</literal_block>
            <paragraph>List all profiles to return profile ids in json format:</paragraph>
            <literal_block xml:space="preserve">http://SERVER_IP:PORT/__profile__/
http://SERVER_IP:PORT/__profile__/all</literal_block>
            <paragraph>Retrieve specific profile data in different formats:</paragraph>
            <literal_block xml:space="preserve">http://SERVER_IP:PORT/__profile__/PROFILE_ID?format=[default|json|csv|ods]
http://SERVER_IP:PORT/__profile__/current?format=[default|json|csv|ods]
http://SERVER_IP:PORT/__profile__/all?format=[default|json|csv|ods]</literal_block>
            <paragraph>Retrieve metrics from specific function in json format:</paragraph>
            <literal_block xml:space="preserve">http://SERVER_IP:PORT/__profile__/PROFILE_ID/NFL?format=json
http://SERVER_IP:PORT/__profile__/current/NFL?format=json
http://SERVER_IP:PORT/__profile__/all/NFL?format=json

NFL is defined by concatenation of file name, function name and the first
line number.
e.g.::
    account.py:50(GETorHEAD)
or with full path:
    opt/stack/swift/swift/proxy/controllers/account.py:50(GETorHEAD)

A list of URL examples:

http://localhost:8080/__profile__    (proxy server)
http://localhost:6200/__profile__/all    (object server)
http://localhost:6201/__profile__/current    (container server)
http://localhost:6202/__profile__/12345?format=json    (account server)</literal_block>
            <paragraph>The profiling middleware can be configured in paste file for WSGI servers such
                as proxy, account, container and object servers. Please refer to the sample
                configuration files in etc directory.</paragraph>
            <paragraph>The profiling data is provided with four formats such as binary(by default),
                json, csv and odf spreadsheet which requires installing odfpy library.</paragraph>
            <block_quote>
                <paragraph>sudo pip install odfpy</paragraph>
            </block_quote>
            <paragraph>There’s also a simple visualization capability which is enabled by using
                matplotlib toolkit. it is also required to be installed if you want to use
                it to visualize statistic data.</paragraph>
            <block_quote>
                <paragraph>sudo apt-get install python-matplotlib</paragraph>
            </block_quote>
        </section>
    </section>
</document>
